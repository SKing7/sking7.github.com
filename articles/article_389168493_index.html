
<!DOCTYPE html>
<html lang="en-US">


<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>Concurrency in JavaScript | TypedArray.org</title>

<link rel="stylesheet" type="text/css" media="all" href="http://typedarray.org/wp-content/themes/thumb/style.css" />
<link rel="pingback" href="http://typedarray.org/xmlrpc.php" />
	<link rel="icon" type="image/png" href="http://typedarray.org/wp-content/uploads/2013/06/favicon-1.ico">

<link rel="alternate" type="application/rss+xml" title="TypedArray.org &raquo; Feed" href="http://typedarray.org/feed/" />
<link rel="alternate" type="application/rss+xml" title="TypedArray.org &raquo; Comments Feed" href="http://typedarray.org/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="TypedArray.org &raquo; Concurrency in JavaScript Comments Feed" href="http://typedarray.org/concurrency-in-javascript/feed/" />
<link rel='stylesheet' id='crayon-css'  href='http://typedarray.org/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=2.3.0' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='http://typedarray.org/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css?ver=2.3.0' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='http://typedarray.org/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=2.3.0' type='text/css' media='all' />
<link rel='stylesheet' id='shortcodes-style-css'  href='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/css/shortcodes.css?ver=3.5.2' type='text/css' media='all' />
<link rel='stylesheet' id='fancybox-style-css'  href='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/css/fancybox.css?ver=3.5.2' type='text/css' media='all' />
<link rel='stylesheet' id='open-sans-css'  href='http://fonts.googleapis.com/css?family=Open+Sans%3A300italic%2C400italic%2C800italic%2C400%2C300%2C800&#038;ver=3.5.2' type='text/css' media='all' />
<link rel='stylesheet' id='mpcth-flexslider-css-css'  href='http://typedarray.org/wp-content/themes/thumb/../../plugins/js_composer/assets/flexslider/flexslider.css?ver=3.5.2' type='text/css' media='all' />
<link rel='stylesheet' id='tablepress-default-css'  href='http://typedarray.org/wp-content/plugins/tablepress/css/default.min.css?ver=0.9-RC' type='text/css' media='all' />
<link rel='stylesheet' id='really_simple_share_style-css'  href='http://typedarray.org/wp-content/plugins/really-simple-facebook-twitter-share-buttons/style.css?ver=3.5.2' type='text/css' media='all' />
<script type='text/javascript' src='https://platform.twitter.com/widgets.js?ver=3.5.2'></script>
<script type='text/javascript' src='http://typedarray.org/wp-includes/js/jquery/jquery.js?ver=1.8.3'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.3.0","is_admin":"0","ajaxurl":"http:\/\/typedarray.org\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='http://typedarray.org/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=2.3.0'></script>
<script type='text/javascript' src='http://typedarray.org/wp-includes/js/comment-reply.min.js?ver=3.5.2'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/html5.js?ver=3.5.2'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/mpcth-functions.js?ver=1.0'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/mpcth-theme.js?ver=1.0'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/mpcth-shortcodes.js?ver=1.0'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/jquery.easing.min.js?ver=1.3'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/jquery.fancybox.js?ver=1.3.4'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/jquery.validate.min.js?ver=1.8.1'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/../../plugins/js_composer/assets/flexslider/jquery.flexslider-min.js?ver=1.0'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/spin.min.js?ver=3.5.2'></script>
<script type='text/javascript' src='http://widgets.twimg.com/j/2/widget.js?ver=3.5.2'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/jquery.oembed.js?ver=3.5.2'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/massive-panel/js/cufon.js?ver=3.5.2'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://typedarray.org/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://typedarray.org/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Adobe Scout: Profiling Taken to the Next Level &#8211; Session video' href='http://typedarray.org/adobe-scout-profiling-taken-to-the-next-level-session-video/' />
<link rel='next' title='From microphone to .WAV with: getUserMedia and Web Audio' href='http://typedarray.org/from-microphone-to-wav-with-getusermedia-and-web-audio/' />
<meta name="generator" content="WordPress 3.5.2" />
<link rel='canonical' href='http://typedarray.org/concurrency-in-javascript/' />
<link rel='shortlink' href='http://typedarray.org/?p=69' />
<script type="text/javascript">
		  window.___gcfg = {lang: "en"};
		  (function() {
		    var po = document.createElement("script"); po.type = "text/javascript"; po.async = true;
		    po.src = "https://apis.google.com/js/plusone.js";
		    var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(po, s);
		  })();
		</script>
<!--[if lte IE 10]>
	<link rel="stylesheet" href="http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/css/ie.css"/>
<![endif]-->

<!--[if lt IE 9]>
	<script src="http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/html5.js" type="text/javascript"></script>
	<link rel="stylesheet" href="http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/css/ie8.css"/>
<![endif]-->





<style type="text/css">
	
/* ---------------------------------------------------------------- */
/*	FONTS
/* ---------------------------------------------------------------- */

	/* Menu Font */
	#mpcth_page_wrap #mpcth_nav #mpcth_menu {
			}

	/* Heading Font */
	#mpcth_page_wrap h1, #mpcth_page_wrap h2, #mpcth_page_wrap h3, #mpcth_page_wrap h4, #mpcth_page_wrap h5, #mpcth_page_wrap h6 {
			}

	/* Content Font */
	#mpcth_page_wrap {
			}

	/* Small Font */
	#mpcth_page_wrap small {
			}

	/* Content */
	#mpcth_page_wrap {
		font-size: 16px;
	}

	/* Menu */
	#mpcth_page_wrap #mpcth_nav #mpcth_menu .menu-item a {
		font-size: 16px;
	}

	/* Category Filter */
	#mpcth_page_wrap .mpcth-filterable-categories a {
		font-size: 16px;
	}

	/* Read More */
	#mpcth_page_wrap .mpcth-portfolio-read-more,
	#mpcth_page_wrap .mpcth-blog-read-more {
		font-size: 16px;
	}

	/* Form Text */
	#mpcth_page_wrap #mpcth_contact_form input,
	#mpcth_page_wrap #comments #respond #commentform input,
	#mpcth_page_wrap #mpcth_contact_form textarea,
	#mpcth_page_wrap #comments #respond #commentform .comment-form-comment textarea {
		font-size: 16px;
	}

	/* Form Button */
	#mpcth_page_wrap #mpcth_contact_form #submit,
	#mpcth_page_wrap #commentform #submit {
			}

	/* Footer */
	#mpcth_page_wrap #mpcth_footer #mpcth_footer_content,
	#mpcth_page_wrap #mpcth_footer #mpcth_bottom_footer {
		font-size: 16px;
	}

	/* Footer Heading */
	#mpcth_page_wrap #mpcth_footer #mpcth_footer_content ul > li .widget_title {
		font-size: 24px;
	}

	/* Sidebar */
	#mpcth_page_wrap #mpcth_sidebar ul > li {
		font-size: 14px;
	}

	/* Sidebar Heading  */
	#mpcth_page_wrap #mpcth_sidebar li .widget_title {
		font-size: 24px;
	}

	/* Small Font Size */
	#mpcth_page_wrap #mpcth_contact_form .form-allowed-tags,
	#mpcth_page_wrap #commentform .form-allowed-tags,
	#mpcth_page_wrap #mpcth_contact_form label.error,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform label.error,
	#mpcth_page_wrap #commentform label.error,
	#mpcth_page_wrap #comments header.vcard,
	#mpcth_page_wrap small,
	#mpcth_page_wrap meta {
		font-size: 14px;
	}

	/* Headings */
	#mpcth_page_wrap h1 {
		font-size: 32px;
	}

	#mpcth_page_wrap h2 {
		font-size: 30px;
	}

	#mpcth_page_wrap h3 {
		font-size: 28px;
	}

	#mpcth_page_wrap h4 {
		font-size: 25px;
	}

	#mpcth_page_wrap h5 {
		font-size: 22px;
	}

	#mpcth_page_wrap h6 {
		font-size: 18px;
	}

/* ---------------------------------------------------------------- */
/*	COLORS
/* ---------------------------------------------------------------- */

	/* Global */
	#mpcth_page_wrap h1, #mpcth_page_wrap h2, #mpcth_page_wrap h3, #mpcth_page_wrap h4, #mpcth_page_wrap h5, #mpcth_page_wrap h6,
	#mpcth_page_wrap h1 a, #mpcth_page_wrap h2 a, #mpcth_page_wrap h3 a, #mpcth_page_wrap h4 a, #mpcth_page_wrap h5 a, #mpcth_page_wrap h6 a {
		color: #565656;
	}
	#mpcth_page_wrap {
		color: #676767;
	}
	#mpcth_page_wrap a {
		color: #42B7AB;
	}
	#mpcth_page_wrap a:hover {
		color: #676767;
	}
	
	#mpcth_page_wrap a.mpcth-alt-link {
		color: #676767;
	}

	#mpcth_page_wrap a.mpcth-alt-link:hover {
		color: #42B7AB;
	}

	#mpcth_page_wrap h1 a:hover, #mpcth_page_wrap h2 a:hover, #mpcth_page_wrap h3 a:hover, #mpcth_page_wrap h4 a:hover, #mpcth_page_wrap h5 a:hover, #mpcth_page_wrap h6 a:hover {
		color: #42B7AB;
	}

	/* Backgrounds */
	/*#mpcth_page_header_wrap {
			}*/
	body {
		background-image: url('http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/images/');		background-color: #FFFFFF;
	}
	#mpcth_footer {
		background: #F5F5F5;
	}
	#mpcth_sidebar {
		background: #F5F5F5;
	}
	#mpcth_page_articles {
		background: #FFFFFF;
	}
	#mpcth_menu {
			}
	#mpcth_menu > ul {
			}

	#mpcth_page_articles .post .mpcth-post-thumbnail,
	#mpcth_page_articles .post {
		background: #F5F5F5;
	}
	#mpcth_top_widget_area {
			}

	/* Main Menu */
	#mpcth_nav #mpcth_menu .menu-item a {
		color: #676767;
		background: ;
	}
	#mpcth_nav #mpcth_menu .menu-item .sub-menu a {
		color: #676767;
		background: #EEEEEE;
	}
	#mpcth_nav #mpcth_menu .menu-item.current-menu-item a,
	#mpcth_nav #mpcth_menu .menu-item.current-menu-ancestor > a {
		color: #42B7AB;
			}
	#mpcth_nav #mpcth_menu .menu-item .sub-menu .current-menu-item a {
		color: #42B7AB;
		background: #EEEEEE;
	}
	#mpcth_nav #mpcth_menu .menu-item a:hover,
	#mpcth_nav #mpcth_menu .menu-item.current-menu-item a:hover,
	#mpcth_nav #mpcth_menu .menu-item.current-menu-ancestor a:hover {
		color: #42B7AB;
		background: ;
	}
	#mpcth_nav #mpcth_menu .menu-item .sub-menu a:hover,
	#mpcth_nav #mpcth_menu .menu-item .sub-menu .current-menu-item a:hover {
		color: #42B7AB;
		background: #EEEEEE;
	}

	#mpcth_nav #mpcth_menu ul.sub-menu li.first-item {
		border-color: #42B7AB;
	}

	/* Top Menu */
	#mpcth_page_header_content #mpcth_secondary_nav #mpcth_secondary_menu .menu-item a {
					}
	#mpcth_page_header_content #mpcth_secondary_nav #mpcth_secondary_menu .menu-item a:hover,
	#mpcth_page_header_content #mpcth_secondary_nav #mpcth_secondary_menu .menu-item.current-menu-item a:hover {
					}
	#mpcth_page_header_content #mpcth_secondary_nav #mpcth_secondary_menu .menu-item.current-menu-item a {
					}
	#mpcth_page_header_content #mpcth_secondary_nav {
			}

	/* Comment Form */
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-url input,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-email input,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-author input,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-comment textarea {
		color: #515151;
		background: #E7E7E7;
			}

	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-url input:hover,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-email input:hover,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-author input:hover,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-comment textarea:hover {
		color: #515151;
		background: #DDDDDD;
			}

	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-url input:focus,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-email input:focus,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-author input:focus,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-comment textarea:focus {
		color: #515151;
		background: #DDDDDD;
			}
	
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-url input.error,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-email input.error,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-author input.error,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-comment textarea.error {
		color: #FFFFFF;
		background: #FF6469;
			}

	#mpcth_page_articles #comments .commentlist article.comment .comment-edit-link,
	#mpcth_page_articles #comments .commentlist article.comment header.comment-meta span {
		color: #FFFFFF;
		background: #42B7AB;
	}

	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform label.error {
		color: #FF6469;
	}

	/* Contact Form */
	#mpcth_contact_form .mpcth-cf-form-url input,
	#mpcth_contact_form .mpcth-cf-form-email input,
	#mpcth_contact_form .mpcth-cf-form-author input,
	#mpcth_contact_form .mpcth-cf-form-message textarea {
		color: #515151;
		background: #E7E7E7;
			}

	#mpcth_contact_form .mpcth-cf-form-url input:hover,
	#mpcth_contact_form .mpcth-cf-form-email input:hover,
	#mpcth_contact_form .mpcth-cf-form-author input:hover,
	#mpcth_contact_form .mpcth-cf-form-message textarea:hover {
		color: #515151;
		background: #E7E7E7;
			}
	
	#mpcth_contact_form .mpcth-cf-form-url input:focus,
	#mpcth_contact_form .mpcth-cf-form-email input:focus,
	#mpcth_contact_form .mpcth-cf-form-author input:focus,
	#mpcth_contact_form .mpcth-cf-form-message textarea:focus {
		color: #515151;
		background: #E7E7E7;
			}

	#mpcth_contact_form .mpcth-cf-form-author input.error,
	#mpcth_contact_form .mpcth-cf-form-email input.error,
	#mpcth_contact_form .mpcth-cf-form-message textarea.error {
		color: #FFFFFF;
		background: #FF6469;
			}

	#mpcth_contact_form p.mpcth-cf-response.error,
	#mpcth_contact_form label.error {
		color: #FF6469;
	}

	#mpcth_contact_form .success {
		color: #679D43;
	}

	/* Logo */
	#mpcth_page_wrap #mpcth_logo {
		margin-top: 0px;
		margin-right: 0px;
		margin-bottom: 0px;
		margin-left: 0px;
	}
	#mpcth_page_wrap #mpcth_logo h1 {
		color: #FFFFFF;
		background: #42B7AB;
	}
	#mpcth_page_wrap #mpcth_logo small {
		color: #AAAAAA;
			}

	/* Submit Button */
	#mpcth_page_wrap #mpcth_contact_form #submit,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .form-submit #submit {
		color: #FFFFFF;
		background: #42B7AB;
			}

	#mpcth_page_wrap #mpcth_contact_form #submit:hover,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .form-submit #submit:hover {
		color: #F5F5F5;
		background: #48a59a;
			}

	/* Blog & Portfolio */
	#mpcth_page_wrap article.post small,
	#mpcth_page_wrap #comments header.vcard {
		color: #AAAAAA;
	}

	#mpcth_page_wrap article.post small a,
	#mpcth_page_wrap #comments header.vcard a {
		color: #42B7AB;
	}


	#mpcth_page_wrap article.post small a:hover,
	#mpcth_page_wrap #comments header.vcard a:hover {
		color: #676767;
	}

	#mpcth_page_wrap article.post .mpcth-portfolio-read-more,
	#mpcth_page_wrap article.post .mpcth-blog-read-more {
		color: #FFFFFF;
		background: #42B7AB;
	}

	#mpcth_page_wrap article.post .mpcth-portfolio-read-more:hover,
	#mpcth_page_wrap article.post .mpcth-blog-read-more:hover {
		color: #FFFFFF;
		background: #3DABA0;
	}

	#mpcth_page_wrap .mpcth-lm-button {
			}

	#mpcth_page_wrap .mpcth-lm-button:hover {
			}

	#mpcth_page_wrap article.post a.mpcth-fancybox {
		color: #FFFFFF;
	}

	#mpcth_page_wrap article.post a.mpcth-fancybox:hover {
		color: #F5F5F5;
	
	}

	#mpcth_page_content .mpcth-filterable-categories ul li {
			}	

	#mpcth_page_content .mpcth-filterable-categories ul li a {
			}

	#mpcth_page_content .mpcth-filterable-categories ul li:hover {
			}

	#mpcth_page_content .mpcth-filterable-categories ul li:hover a {
			}

	#mpcth_page_wrap #mpcth_page_articles .mpcth-post-ribbon {
		background: #42B7AB;
	}

	#mpcth_page_wrap #mpcth_page_articles .zilla-likes:after {
		color: #AAAAAA;
	}

	#mpcth_page_wrap #mpcth_page_articles .zilla-likes.active:after, 
	#mpcth_page_wrap #mpcth_page_articles .zilla-likes:hover:after {
		color: #42B7AB;
	}



	/* Other */
	#mpcth_page_wrap hr {
		background-color: #E9E9E9;
	}

	#mpcth_page_wrap #mpcth_sidebar ul.parent_menu_item > li .widget_title {
		color: #565656;
	}

	#mpcth_page_wrap #mpcth_sidebar ul.parent_menu_item > li,
	#mpcth_page_wrap #mpcth_sidebar ul.parent_menu_item > li a {
		color: #676767;
	
	}

	#mpcth_page_wrap #mpcth_sidebar ul.parent_menu_item > li a {
		color: #676767;
	
	}

	#mpcth_page_wrap #mpcth_sidebar ul.parent_menu_item > li a:hover {
		color: #42B7AB;
	
	}


	#mpcth_page_wrap #mpcth_page_articles .flexslider ol.flex-control-nav li a.flex-active, 
	#mpcth_page_wrap #mpcth_page_articles .flexslider ol.flex-control-nav li a:hover {
		background: #42B7AB;
	}

	#mpcth_page_articles .flexslider .flex-direction-nav a.flex-next:after {
		border-left-color: #42B7AB;
	}

	#mpcth_page_articles .flexslider .flex-direction-nav a.flex-prev:after {
		border-right-color: #42B7AB;
	}

	#mpcth_page_wrap #mpcth_footer > #mpcth_footer_content > ul > li .widget_title {
		color: #565656;
	}

	#mpcth_page_wrap #mpcth_footer > #mpcth_footer_content > ul > li
	#mpcth_page_wrap #mpcth_footer > #mpcth_footer_content > ul > li a {
		color: #676767;
	
	}

	#mpcth_page_wrap #mpcth_footer > #mpcth_footer_content > ul > li a:hover {
		color: #676767;
	
	}

	#mpcth_page_wrap .mpcth-social-bg {
			}

	#mpcth_page_wrap a.mpcth-alt-link {
		color: #676767;
	
	}

	#mpcth_page_wrap #mpcth_page_header_content #mpcth_logo small:after {
		background-color: #EEEEEE;
	}

	#mpcth_page_wrap .mpcth-fb-overlay {
		background-color: #42B7AB;
	}

	/* Shortcodes */

	#mpcth_page_wrap .wpb_content_element .ui-tabs .ui-tabs-nav li, 
	#mpcth_page_wrap .wpb_call_to_action, 
	#mpcth_page_wrap .wpb_content_element .ui-accordion .ui-accordion-header {
		background-color: #E9E9E9;
	}

	#mpcth_page_wrap .wpb_content_element .ui-tabs .ui-tabs-nav li:hover,
	#mpcth_page_wrap .wpb_call_to_action:hover,
	#mpcth_page_wrap .wpb_content_element .ui-accordion .ui-accordion-header:hover {
		background-color: #F0F0F0;
	}

	#mpcth_page_wrap .wpb_separator,
	#mpcth_page_wrap .vc_text_separator {
		border-color: #E9E9E9;
	}

	#mpcth_page_wrap .vc_text_separator div {
		background-color: #42B7AB;
		color: #ffffff;
	}

</style>
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<style type="text/css" id="syntaxhighlighteranchor"></style>

</head>
<body class="single single-post postid-69 single-format-standard wpb-js-composer js-comp-ver-3.5.4 vc_responsive">
	<div id="mpcth_page_wrap" class="mpcth-layout-fluid mpcth-reponsive">
		<header id="mpcth_page_header_wrap">
			<div id="mpcth_page_header_content">
				<div id="mpcth_top_dropdown"><ul></ul><div class="mpcth-clear-fix"></div></div><a id="mpcth_logo" href="http://typedarray.org"><h1>TypedArray.org</h1><small>JavaScript for interactive developers</small></a><nav id="mpcth_nav" class="mpcth-visible-desktop"><ul id="nav"><li class="page_item page-item-2"><a href="http://typedarray.org/about/">About</a></li>
</ul><a class="mpcth-header-search mpcth-sc-icon-search mpcth-alt-link"></a></nav><!-- end #mpcth_nav --> <!-- end menu --> 

				 
<form method="get" id="searchform" action="http://typedarray.org/">
	<input type="text" class="field mpcth-search" name="s" id="s" value="Type something and hit enter" onfocus="if(this.value=='Type something and hit enter')this.value='';" onblur="if(this.value=='')this.value='Type something and hit enter';"/>
	<input type="submit" class="submit" name="submit" id="searchsubmit" value="Search"/>
</form>
				<div class="mpcth-clear-fix"></div>
			</div> <!-- end #mpcth_page_header_content -->
		</header><!-- end #mpcth_page_header_wrap -->
<div id="mpcth_page_container" class="mpcth-sidebar-none single-post">
		
		<!-- Display menu on the side and logo (if set in settings ) -->
		
<!-- Menu on the side of a page -->
<!-- End Menu on the side -->

		<div id="mpcth_page_content">
				<div id="mpcth_page_articles" class="mpcth-single-post mpcth-sidebar-open">
												

					<article id="post-69"  class="post-69 post type-post status-publish format-standard hentry category-javascript tag-asynchronous tag-concurrency tag-threading tag-workers blog-post" >
															<div class="mpcth-post-thumbnail">
										<img width="800" height="534" src="http://typedarray.org/wp-content/uploads/2013/06/parallel-lines.jpg" class="attachment-post-thumbnail wp-post-image" alt="Parallel" />																			</div>
									<div class="mpcth-post-content">
																											<header>
											<h2 class="mpcth-post-title"><a href="http://typedarray.org/concurrency-in-javascript/" title="Concurrency in JavaScript">
												Concurrency in JavaScript											</a></h2>
										</header>
																										<p style="text-align: justify;">Just like with Flash, JavaScript code runs by default on the UI thread, and any expensive computation will usually affect the UI responsiveness. As you may know, at 60 fps, you have around 16ms (1000ms/60) per frame to do what you have to do (computations, rendering and other misc logic). If you exceed that budget, you will alter the frame rate and potentially make your content feel sluggish or worse, unresponsive.</p>
<div id="attachment_70" class="wp-caption alignleft" style="width: 293px"><img class="wp-image-70 " alt="Frame budget" src="http://typedarray.org/wp-content/uploads/2013/06/budget-frame-med.jpg" width="283" height="262" /><p class="wp-caption-text">Frame budget</p></div>
<p style="text-align: justify;">Web Workers are now broadly available in most browsers even on mobile <a title="Web Workers support" href="http://caniuse.com/#search=web%20workers" target="_blank">(caniuse.com stats for Web Workers)</a> and give you the power of concurrency from within JavaScript. It will allow you to move expensive computations to other threads, to permit best responsive programming, and ideally open the doors in the future to true parallelization in JavaScript. Let&#8217;s have a look at the reasons why you may be interested into leveraging Web Workers.</p>
<ul>
<li><span style="line-height: 1.5em;"><em>Responsive programming</em>: When you have an expensive computation and don&#8217;t want to block the UI.</span></li>
<li><em>Parallel programming</em>: When you want to leverage multiple CPU cores by having computations running concurrently to solve a specific task.</li>
</ul>
<p style="text-align: justify;">We will see later on that parallel programming with Web Workers can be challenging, and that they are not really designed for that today unfortunately. But before we dive into the details of responsive programming and parallel programming, let&#8217;s start with some more details about Web Workers. Note that we will cover here dedicated Web Workers, not the shared Web Workers.</p>
<p style="text-align: justify;"><span id="more-69"></span></p>
<h5><span style="line-height: 1.5em;">Workers and threads</span></h5>
<p style="text-align: justify;">A very common question around Web Workers is how they compare to low-level threads available in other languages like C++, Java or C#.</p>
<p style="text-align: justify;">First off, Web Workers are way more high-level and heavier than threads, when newing a Web Worker, you are actually instantiating a new JS VM. As a result, instantiating a Web Worker does indeed create another low-level thread behind the scenes to power the VM that runs your code, but you never work with it directly. Therefore, it is important to remember that the cost of a single Worker in memory is pretty high, and same for its instantiation time. Based on that, you can imagine that instantiating many workers on a mobile browser is usually not an option, in fact, most browsers have a limitation in the number of workers that can be allocated for that reason.</p>
<p style="text-align: justify;">Another major difference with threads is how data passing works, where nothing is shared. As we will see later with Web Workers, data is passed by default through <strong>message cloning</strong>, in other words, any data passed is cloned. Given the overhead of cloning for large objects, you can also <strong>transfer ownership</strong> when needed. That allows you to pass the reference of your object to another Web Worker, without cloning it, you just lose its reference from where you sent it. It is a pretty elegant approach and very simple to use and works well with the responsive use cases.</p>
<h5>Workers and cores</h5>
<p style="text-align: justify;">On a multi-core environment, multiple threads can truly run concurrently if distributed over multiple cores. On a single core system, the CPU performs what is called context switching betweens the threads. It happens so fast that you cannot actually tell the threads are not running concurrently but they truly aren&#8217;t. This leads to another common question: can I leverage multi-core architectures with Web Workers ? In other words, can I choose specifically which core to leverage?</p>
<p style="text-align: justify;">That is not in your control, the OS will decide if the thread utilized by the instantiated VM is spawn on another core or not. It is also not possible to query the number of cores available, even if libraries have emerged to guess that, but you ideally want to stay out of this and let the OS balance things best for you.<span style="color: #676767; font-size: 16px; line-height: 1.5em;"><br />
</span></p>
<h5>Life as a worker</h5>
<p style="text-align: justify;">You can use all of the JavaScript features inside a Worker, but the amount of browser APIs available is limited. The main restriction is that there is no way to display anything inside from a Worker, simply because there is no DOM available, which lives on the UI thread. Imaging making the DOM thread safe, that would be pretty tricky across workers. Hence why if you try to access the document object from within a worker, you will get the following runtime exception:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075a7e042191853" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
Uncaught ReferenceError: document is not defined</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075a7e042191853-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075a7e042191853-1"><span class="crayon-e">Uncaught </span><span class="crayon-i">ReferenceError</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">document </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-i">defined</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0012 seconds] -->
<p></p>
<p style="text-align: justify;">At this point, an error event will be dispatched by the worker, that can be listened to. As a result, it is impossible to render anything on screen from a Web Worker. To achieve this, you will have to send the object back to the main (UI) thread for display. A very classic scenario is anything related to image processing. Given how expensive image processing can be, it is very tempting to offload the expensive code to a Web Worker. In the initial Web Workers specification, it was not possible to pass an <a title="ImageData (canvas)" href="https://developer.mozilla.org/en-US/docs/Web/API/ImageData" target="_blank">ImageData</a> object between Web Workers, you had to pass an array of pixel colors. Recently, the specification got updated to allow message passing of ImageData objects, which is quite nice, given that many use cases rely on image/bitmap manipulation.</p>
<p style="text-align: justify;">Another important use case is resource loading. You may want to load a remote resource from a worker, and that is possible through the XMLHttpRequest object. That is very useful if you want to do some expensive parsing of a resource that you are loading within a game, like parsing an object model, or more simply logging to a server some analytics you have been cooking within a background worker. You can find <a title="Functions available from within Web Workers" href="https://developer.mozilla.org/en-US/docs/DOM/Worker/Functions_available_to_workers" target="_blank">here</a> more details about the functions available from within Web Workers.</p>
<p style="text-align: justify;">Another thing you may try is to use the console to log things from within a worker, this is also not supported, but you can build a wrapper on top of the postMessage API that we will cover in a few minutes. David Flanagan has posted one <a title="WorkerConsole" href="https://github.com/davidflanagan/WorkerConsole/" target="_blank">there</a> which works well. In addition, you can also use the Chrome Dev Tools which offer you a way to debug Web Workers.</p>
<h5>Instantiating a Worker</h5>
<p style="text-align: justify;">To instantiate a worker, two approaches are available. The first one requires you to point to the JavaScript code needed to run in the background:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075aba261095980" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var worker = new Worker("background.js");</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075aba261095980-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075aba261095980-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">worker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-sy">(</span><span class="crayon-s">"background.js"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0015 seconds] -->
<p></p>
<p style="text-align: justify;">When the script logic is passed to the Worker object, the code is immediately ran. Simple and easy. The limitation here is that it relies on a separate file, you may be in a situation where you need to reduce as much as possible the file dependencies. Another technique allows you to remove such a dependency and create the worker logic through the createObjectURL API and a <em>Blob</em> object:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075ac5450440875" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// worker logic
var blob = new Blob(["self.addEventListener('message', messageReceived);function messageReceived(e) {self.postMessage('Doing pretty good here!');}"], {type: 'text/javascript'});

// webkit handling
var URL = window.URL || window.webkitURL;

// create the virtual file
var code = URL.createObjectURL(blob);

// create the worker
var worker = new Worker(code);</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075ac5450440875-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ac5450440875-2">2</div><div class="crayon-num" data-line="crayon-5249342075ac5450440875-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ac5450440875-4">4</div><div class="crayon-num" data-line="crayon-5249342075ac5450440875-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ac5450440875-6">6</div><div class="crayon-num" data-line="crayon-5249342075ac5450440875-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ac5450440875-8">8</div><div class="crayon-num" data-line="crayon-5249342075ac5450440875-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ac5450440875-10">10</div><div class="crayon-num" data-line="crayon-5249342075ac5450440875-11">11</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075ac5450440875-1"><span class="crayon-c">// worker logic</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ac5450440875-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">blob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Blob</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-s">"self.addEventListener('message', messageReceived);function messageReceived(e) {self.postMessage('Doing pretty good here!');}"</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">type:</span><span class="crayon-h"> </span><span class="crayon-s">'text/javascript'</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075ac5450440875-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ac5450440875-4"><span class="crayon-c">// webkit handling</span></div><div class="crayon-line" id="crayon-5249342075ac5450440875-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">URL</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">webkitURL</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ac5450440875-6">&nbsp;</div><div class="crayon-line" id="crayon-5249342075ac5450440875-7"><span class="crayon-c">// create the virtual file</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ac5450440875-8"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-sy">.</span><span class="crayon-e">createObjectURL</span><span class="crayon-sy">(</span><span class="crayon-i">blob</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075ac5450440875-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ac5450440875-10"><span class="crayon-c">// create the worker</span></div><div class="crayon-line" id="crayon-5249342075ac5450440875-11"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">worker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-sy">(</span><span class="crayon-i">code</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0083 seconds] -->
<p></p>
<p style="text-align: justify;">Note that the way you retrieve the string passed to the <em>Blob</em> object can vary. Obviously, passing the string like above is not very optimal. As <a title="Using Web Workers | Mozilla" href="https://developer.mozilla.org/en-US/docs/Web/Guide/Performance/Using_web_workers" target="_blank">Mozilla</a> points out in their documentation, you can also store the JavaScript code inside a custom script tag and extract its content dynamically and pass it to the Blob object.</p>
<p style="text-align: justify;">In the code below, the JavaScript code is located inside a custom script tag:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075ad1612061972" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
&lt;script type="mce-text/js-worker"&gt;
self.addEventListener('message', messageReceived); 

function messageReceived(e) {
    self.postMessage('Doing pretty good here!');
}
&lt;/script&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075ad1612061972-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ad1612061972-2">2</div><div class="crayon-num" data-line="crayon-5249342075ad1612061972-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ad1612061972-4">4</div><div class="crayon-num" data-line="crayon-5249342075ad1612061972-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ad1612061972-6">6</div><div class="crayon-num" data-line="crayon-5249342075ad1612061972-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075ad1612061972-1"><span class="crayon-ta">&lt;script </span><span class="crayon-e ">type</span><span class="crayon-o">=</span><span class="crayon-s">"mce-text/js-worker"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ad1612061972-2"><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">messageReceived</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5249342075ad1612061972-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ad1612061972-4"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">messageReceived</span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5249342075ad1612061972-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-s">'Doing pretty good here!'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ad1612061972-6"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5249342075ad1612061972-7"><span class="crayon-ta">&lt;/script&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0029 seconds] -->
<p></p>
<p style="text-align: justify;">Did you notice the use of the keyword <em>self</em>? This is how we refer (from the background code) to the worker itself.</p>
<p style="text-align: justify;">We retrieve the script using the querySelector API and pass it to the <em>Blob</em> object:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075adb800189291" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// extract the string
var logic = document.querySelectorAll("script[type=\"text\/js-worker\"]")[0].textContent;

// worker logic
var blob = new Blob([logic], {type: 'text/javascript'});

// webkit handling
var URL = window.URL || window.webkitURL;

// create the virtual file
var code = URL.createObjectURL(blob);

// create the worker
var worker = new Worker(code);</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075adb800189291-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075adb800189291-2">2</div><div class="crayon-num" data-line="crayon-5249342075adb800189291-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075adb800189291-4">4</div><div class="crayon-num" data-line="crayon-5249342075adb800189291-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075adb800189291-6">6</div><div class="crayon-num" data-line="crayon-5249342075adb800189291-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075adb800189291-8">8</div><div class="crayon-num" data-line="crayon-5249342075adb800189291-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075adb800189291-10">10</div><div class="crayon-num" data-line="crayon-5249342075adb800189291-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075adb800189291-12">12</div><div class="crayon-num" data-line="crayon-5249342075adb800189291-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075adb800189291-14">14</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075adb800189291-1"><span class="crayon-c">// extract the string</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075adb800189291-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">logic</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">document</span><span class="crayon-sy">.</span><span class="crayon-e">querySelectorAll</span><span class="crayon-sy">(</span><span class="crayon-s">"script[type=\"text\/js-worker\"]"</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-i">textContent</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075adb800189291-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075adb800189291-4"><span class="crayon-c">// worker logic</span></div><div class="crayon-line" id="crayon-5249342075adb800189291-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">blob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Blob</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-i">logic</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">type:</span><span class="crayon-h"> </span><span class="crayon-s">'text/javascript'</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075adb800189291-6">&nbsp;</div><div class="crayon-line" id="crayon-5249342075adb800189291-7"><span class="crayon-c">// webkit handling</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075adb800189291-8"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">URL</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">webkitURL</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075adb800189291-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075adb800189291-10"><span class="crayon-c">// create the virtual file</span></div><div class="crayon-line" id="crayon-5249342075adb800189291-11"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-sy">.</span><span class="crayon-e">createObjectURL</span><span class="crayon-sy">(</span><span class="crayon-i">blob</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075adb800189291-12">&nbsp;</div><div class="crayon-line" id="crayon-5249342075adb800189291-13"><span class="crayon-c">// create the worker</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075adb800189291-14"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">worker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-sy">(</span><span class="crayon-i">code</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0061 seconds] -->
<p></p>
<p style="text-align: justify;">Relying on a separate file for the worker logic is the most common way to work with Workers but you now have seen different options in case you had to get rid of a dependent file.</p>
<h5 style="text-align: justify;">Terminating a Web Worker</h5>
<p style="text-align: justify;">To terminate a Worker, just call the terminate API:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075ae6189226224" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
worker.terminate()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075ae6189226224-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075ae6189226224-1"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">terminate</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0041 seconds] -->
<p></p>
<p style="text-align: justify;">In the same way, a Worker can close itself through the close API:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075aef912920752" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
self.close()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075aef912920752-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075aef912920752-1"><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">close</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0008 seconds] -->
<p></p>
<p style="text-align: justify;">Note that once terminated or closed, a Web Worker cannot be restored, it would have to be recreated. Now that our Worker object is created, let&#8217;s send some data back and forth to see how things work.</p>
<h5 style="text-align: justify;">Sub Web Workers</h5>
<p style="text-align: justify;">If needed, a Worker can create a Worker within itself:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075af9721665173" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
self.addEventListener('message', messageReceived);

// a sub worker
var subworker = new Worker ('Task.js');

subworker.addEventListener('message', subTaskReceived);

function messageReceived(e) {
    // some logic
}

function subTaskReceived(e) {
    // some logic
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075af9721665173-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075af9721665173-2">2</div><div class="crayon-num" data-line="crayon-5249342075af9721665173-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075af9721665173-4">4</div><div class="crayon-num" data-line="crayon-5249342075af9721665173-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075af9721665173-6">6</div><div class="crayon-num" data-line="crayon-5249342075af9721665173-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075af9721665173-8">8</div><div class="crayon-num" data-line="crayon-5249342075af9721665173-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075af9721665173-10">10</div><div class="crayon-num" data-line="crayon-5249342075af9721665173-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075af9721665173-12">12</div><div class="crayon-num" data-line="crayon-5249342075af9721665173-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075af9721665173-14">14</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075af9721665173-1"><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">messageReceived</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075af9721665173-2">&nbsp;</div><div class="crayon-line" id="crayon-5249342075af9721665173-3"><span class="crayon-c">// a sub worker</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075af9721665173-4"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">subworker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">'Task.js'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075af9721665173-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075af9721665173-6"><span class="crayon-v">subworker</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">subTaskReceived</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075af9721665173-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075af9721665173-8"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">messageReceived</span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5249342075af9721665173-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// some logic</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075af9721665173-10"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5249342075af9721665173-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075af9721665173-12"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">subTaskReceived</span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5249342075af9721665173-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// some logic</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075af9721665173-14"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0042 seconds] -->
<p></p>
<h5><span style="line-height: 1.5em;">Passing data</span></h5>
<p style="text-align: justify;">To communicate, we use the postMessage API (not to be confused with window.postMessage). Any message sent with postMessage triggers the &#8220;message&#8221; event that dispatched by the Worker object:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b03693259205" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// extract the string
var logic = document.querySelectorAll("script[type=\"text\/js-worker\"]")[0].textContent;

// worker logic
var blob = new Blob([logic], {type: 'text/javascript'});

// webkit handling
var URL = window.URL || window.webkitURL;

// create the virtual file
var code = URL.createObjectURL(blob);

// create the worker
var worker = new Worker(code);

// listen to the response from the Worker
worker.addEventListener('message', receiveMessage);

// pass some data
worker.postMessage('How is it going over there?');

// callback handling the response, data is available in the event object
function receiveMessage (e)
{
    console.log (e.data);
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b03693259205-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b03693259205-2">2</div><div class="crayon-num" data-line="crayon-5249342075b03693259205-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b03693259205-4">4</div><div class="crayon-num" data-line="crayon-5249342075b03693259205-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b03693259205-6">6</div><div class="crayon-num" data-line="crayon-5249342075b03693259205-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b03693259205-8">8</div><div class="crayon-num" data-line="crayon-5249342075b03693259205-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b03693259205-10">10</div><div class="crayon-num" data-line="crayon-5249342075b03693259205-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b03693259205-12">12</div><div class="crayon-num" data-line="crayon-5249342075b03693259205-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b03693259205-14">14</div><div class="crayon-num" data-line="crayon-5249342075b03693259205-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b03693259205-16">16</div><div class="crayon-num" data-line="crayon-5249342075b03693259205-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b03693259205-18">18</div><div class="crayon-num" data-line="crayon-5249342075b03693259205-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b03693259205-20">20</div><div class="crayon-num" data-line="crayon-5249342075b03693259205-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b03693259205-22">22</div><div class="crayon-num" data-line="crayon-5249342075b03693259205-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b03693259205-24">24</div><div class="crayon-num" data-line="crayon-5249342075b03693259205-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b03693259205-26">26</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b03693259205-1"><span class="crayon-c">// extract the string</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b03693259205-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">logic</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">document</span><span class="crayon-sy">.</span><span class="crayon-e">querySelectorAll</span><span class="crayon-sy">(</span><span class="crayon-s">"script[type=\"text\/js-worker\"]"</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-i">textContent</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b03693259205-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b03693259205-4"><span class="crayon-c">// worker logic</span></div><div class="crayon-line" id="crayon-5249342075b03693259205-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">blob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Blob</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-i">logic</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">type:</span><span class="crayon-h"> </span><span class="crayon-s">'text/javascript'</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b03693259205-6">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b03693259205-7"><span class="crayon-c">// webkit handling</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b03693259205-8"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">URL</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">webkitURL</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b03693259205-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b03693259205-10"><span class="crayon-c">// create the virtual file</span></div><div class="crayon-line" id="crayon-5249342075b03693259205-11"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-sy">.</span><span class="crayon-e">createObjectURL</span><span class="crayon-sy">(</span><span class="crayon-i">blob</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b03693259205-12">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b03693259205-13"><span class="crayon-c">// create the worker</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b03693259205-14"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">worker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-sy">(</span><span class="crayon-i">code</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b03693259205-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b03693259205-16"><span class="crayon-c">// listen to the response from the Worker</span></div><div class="crayon-line" id="crayon-5249342075b03693259205-17"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">receiveMessage</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b03693259205-18">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b03693259205-19"><span class="crayon-c">// pass some data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b03693259205-20"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-s">'How is it going over there?'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b03693259205-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b03693259205-22"><span class="crayon-c">// callback handling the response, data is available in the event object</span></div><div class="crayon-line" id="crayon-5249342075b03693259205-23"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">receiveMessage</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b03693259205-24"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5249342075b03693259205-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-i">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b03693259205-26"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0083 seconds] -->
<p></p>
<p style="text-align: justify;">Our code sends a message to the Worker, which returns a message back to the main thread. The code above outputs the following message:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b0e783557451" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
Doing pretty good here!</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b0e783557451-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b0e783557451-1"><span class="crayon-e">Doing </span><span class="crayon-e">pretty </span><span class="crayon-e">good </span><span class="crayon-i">here</span><span class="crayon-o">!</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0008 seconds] -->
<p></p>
<p style="text-align: justify;">In that case, we sent the string: <em>&#8216;How is it going over there&#8217;</em>, and the Worker returned <em>&#8216;Doing pretty good here&#8217;</em>. We sent different data to illustrate how simply message passing works. But in most cases you want to send similar data that you can retrieve on both sides. Some coordinates, a path that has been computed in a game, or more simply a binary blob that you want to process, like a PDF or an image that has been generated. To retrieve the data that is being passed, we use the <em>data</em> property of the event object.</p>
<p style="text-align: justify;">In the code below, we update our worker logic to return the data back to the main thread:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b19669821048" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
self.addEventListener('message', messageReceived);

function messageReceived(e) {
    self.postMessage(e.data);
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b19669821048-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b19669821048-2">2</div><div class="crayon-num" data-line="crayon-5249342075b19669821048-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b19669821048-4">4</div><div class="crayon-num" data-line="crayon-5249342075b19669821048-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b19669821048-1"><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">messageReceived</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b19669821048-2">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b19669821048-3"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">messageReceived</span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b19669821048-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-i">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b19669821048-5"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0022 seconds] -->
<p></p>
<p style="text-align: justify;">We still pass a simple string, but it is now sent back to the main thread:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b22145154174" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// extract the string
var logic = document.querySelectorAll("script[type=\"text\/js-worker\"]")[0].textContent;

// worker logic
var blob = new Blob([logic], {type: 'text/javascript'});

// webkit handling
var URL = window.URL || window.webkitURL;

// create the virtual file
var code = URL.createObjectURL(blob);

// create the worker
var worker = new Worker(code);

// listen to the response from the Worker
worker.addEventListener('message', receiveMessage);

// we send some data
worker.postMessage("Some data passed back and forth!")

// callback handling the response, data is available in the event object
function receiveMessage (e)
{
    console.log (e.data);
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b22145154174-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b22145154174-2">2</div><div class="crayon-num" data-line="crayon-5249342075b22145154174-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b22145154174-4">4</div><div class="crayon-num" data-line="crayon-5249342075b22145154174-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b22145154174-6">6</div><div class="crayon-num" data-line="crayon-5249342075b22145154174-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b22145154174-8">8</div><div class="crayon-num" data-line="crayon-5249342075b22145154174-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b22145154174-10">10</div><div class="crayon-num" data-line="crayon-5249342075b22145154174-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b22145154174-12">12</div><div class="crayon-num" data-line="crayon-5249342075b22145154174-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b22145154174-14">14</div><div class="crayon-num" data-line="crayon-5249342075b22145154174-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b22145154174-16">16</div><div class="crayon-num" data-line="crayon-5249342075b22145154174-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b22145154174-18">18</div><div class="crayon-num" data-line="crayon-5249342075b22145154174-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b22145154174-20">20</div><div class="crayon-num" data-line="crayon-5249342075b22145154174-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b22145154174-22">22</div><div class="crayon-num" data-line="crayon-5249342075b22145154174-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b22145154174-24">24</div><div class="crayon-num" data-line="crayon-5249342075b22145154174-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b22145154174-26">26</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b22145154174-1"><span class="crayon-c">// extract the string</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b22145154174-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">logic</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">document</span><span class="crayon-sy">.</span><span class="crayon-e">querySelectorAll</span><span class="crayon-sy">(</span><span class="crayon-s">"script[type=\"text\/js-worker\"]"</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-i">textContent</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b22145154174-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b22145154174-4"><span class="crayon-c">// worker logic</span></div><div class="crayon-line" id="crayon-5249342075b22145154174-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">blob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Blob</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-i">logic</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">type:</span><span class="crayon-h"> </span><span class="crayon-s">'text/javascript'</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b22145154174-6">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b22145154174-7"><span class="crayon-c">// webkit handling</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b22145154174-8"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">URL</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">webkitURL</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b22145154174-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b22145154174-10"><span class="crayon-c">// create the virtual file</span></div><div class="crayon-line" id="crayon-5249342075b22145154174-11"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-sy">.</span><span class="crayon-e">createObjectURL</span><span class="crayon-sy">(</span><span class="crayon-i">blob</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b22145154174-12">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b22145154174-13"><span class="crayon-c">// create the worker</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b22145154174-14"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">worker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-sy">(</span><span class="crayon-i">code</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b22145154174-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b22145154174-16"><span class="crayon-c">// listen to the response from the Worker</span></div><div class="crayon-line" id="crayon-5249342075b22145154174-17"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">receiveMessage</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b22145154174-18">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b22145154174-19"><span class="crayon-c">// we send some data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b22145154174-20"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-s">"Some data passed back and forth!"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5249342075b22145154174-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b22145154174-22"><span class="crayon-c">// callback handling the response, data is available in the event object</span></div><div class="crayon-line" id="crayon-5249342075b22145154174-23"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">receiveMessage</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b22145154174-24"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5249342075b22145154174-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-i">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b22145154174-26"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0081 seconds] -->
<p></p>
<p style="text-align: justify;">If we run the code above, the console outputs:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b2d299785030" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
Some data passed back and forth!</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b2d299785030-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b2d299785030-1"><span class="crayon-e">Some </span><span class="crayon-e">data </span><span class="crayon-e">passed </span><span class="crayon-e">back </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-i">forth</span><span class="crayon-o">!</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0009 seconds] -->
<p></p>
<p style="text-align: justify;">Remember that we are not sharing anything here, our string got cloned implicitly. Now you may wonder, can I pass any kind of data? If you stick to all the primitive types available in the JavaScript language, like Number, String, Boolean, you will be fine. For composite data types, plain JSON objects are supported, in addition to the ImageData and TypedArray types.</p>
<p style="text-align: justify;">In the code below, we pass a simple JSON object:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b37574685996" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// a user
var user = { name : "Bob", age: 30, city: "San Francisco" };

// we pass our object
worker.postMessage ( user );</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b37574685996-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b37574685996-2">2</div><div class="crayon-num" data-line="crayon-5249342075b37574685996-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b37574685996-4">4</div><div class="crayon-num" data-line="crayon-5249342075b37574685996-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b37574685996-1"><span class="crayon-c">// a user</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b37574685996-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">user</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-i">name</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"Bob"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">age</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">30</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">city</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"San Francisco"</span><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b37574685996-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b37574685996-4"><span class="crayon-c">// we pass our object</span></div><div class="crayon-line" id="crayon-5249342075b37574685996-5"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-h"> </span><span class="crayon-i">user</span><span class="crayon-h"> </span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0025 seconds] -->
<p>Here again, the object is cloned and accessible from our Worker code:</p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b41874549140" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
self.addEventListener('message', messageReceived);

function messageReceived (e)
{
    var user = e.data;
    var name = user.name;
    var age = user.age;
    var city = user.city;
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b41874549140-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b41874549140-2">2</div><div class="crayon-num" data-line="crayon-5249342075b41874549140-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b41874549140-4">4</div><div class="crayon-num" data-line="crayon-5249342075b41874549140-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b41874549140-6">6</div><div class="crayon-num" data-line="crayon-5249342075b41874549140-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b41874549140-8">8</div><div class="crayon-num" data-line="crayon-5249342075b41874549140-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b41874549140-1"><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">messageReceived</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b41874549140-2">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b41874549140-3"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">messageReceived</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b41874549140-4"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5249342075b41874549140-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">user</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-i">data</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b41874549140-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-i">name</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b41874549140-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">age</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-i">age</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b41874549140-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">city</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-i">city</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b41874549140-9"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0038 seconds] -->
<p></p>
<p style="text-align: justify;">If you try to pass an unsupported type, you will get a <em>DataCloneError</em> exception. In the code below, we try to pass a reference to the window object:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b4b012580947" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// attempt to pass the window object
worker.postMessage(this.window);</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b4b012580947-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b4b012580947-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b4b012580947-1"><span class="crayon-c">// attempt to pass the window object</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b4b012580947-2"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-i">window</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p>Which triggers the following exception:</p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b54954796277" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
Uncaught Error: DataCloneError: DOM Exception 25</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b54954796277-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b54954796277-1"><span class="crayon-e">Uncaught </span><span class="crayon-v">Error:</span><span class="crayon-h"> </span><span class="crayon-v">DataCloneError:</span><span class="crayon-h"> </span><span class="crayon-e">DOM </span><span class="crayon-i">Exception</span><span class="crayon-h"> </span><span class="crayon-cn">25</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p></p>
<p style="text-align: justify;">Same thing with an XHR object:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b5e637832681" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// attempt to pass an XHR object
worker.postMessage(new XMLHttpRequest());</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b5e637832681-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b5e637832681-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b5e637832681-1"><span class="crayon-c">// attempt to pass an XHR object</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b5e637832681-2"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">XMLHttpRequest</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p></p>
<p style="text-align: justify;">Which also results in a runtime exception:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b68489253657" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
Uncaught Error: DataCloneError: DOM Exception 25</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b68489253657-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b68489253657-1"><span class="crayon-e">Uncaught </span><span class="crayon-i">Error</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">DataCloneError</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">DOM </span><span class="crayon-i">Exception</span><span class="crayon-h"> </span><span class="crayon-cn">25</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p></p>
<p style="text-align: justify;">In the same way, passing a custom type is not supported. In the code below, we try to pass an Array of Ball objects:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b71418600466" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var radius = 10;
var Ball = (function () {
    function Ball(radius, x, y, destX, destY, context, balls) {
        this.friction = .1;
        this.color = 'green';
        this.radius = radius;
        this.x = x;
        this.y = y;
        this.destX = destX;
        this.destY = destY;
        this.context = context;
        this.balls = balls;
    }
    return Ball;
})();

var BALLS_NUM = 100;
var balls = new Array();

for(var i = 0; i &lt; BALLS_NUM; i++) {
    var obj = new Ball(radius, Math.round(Math.random() * 1024), Math.round(Math.random() * 768), Math.random() * 1024, Math.random() * 768, context, balls);
    balls.push(obj);
}

// attempt to pass an array of custom type (Ball) objects
worker.postMessage (balls);</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b71418600466-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b71418600466-2">2</div><div class="crayon-num" data-line="crayon-5249342075b71418600466-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b71418600466-4">4</div><div class="crayon-num" data-line="crayon-5249342075b71418600466-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b71418600466-6">6</div><div class="crayon-num" data-line="crayon-5249342075b71418600466-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b71418600466-8">8</div><div class="crayon-num" data-line="crayon-5249342075b71418600466-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b71418600466-10">10</div><div class="crayon-num" data-line="crayon-5249342075b71418600466-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b71418600466-12">12</div><div class="crayon-num" data-line="crayon-5249342075b71418600466-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b71418600466-14">14</div><div class="crayon-num" data-line="crayon-5249342075b71418600466-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b71418600466-16">16</div><div class="crayon-num" data-line="crayon-5249342075b71418600466-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b71418600466-18">18</div><div class="crayon-num" data-line="crayon-5249342075b71418600466-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b71418600466-20">20</div><div class="crayon-num" data-line="crayon-5249342075b71418600466-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b71418600466-22">22</div><div class="crayon-num" data-line="crayon-5249342075b71418600466-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b71418600466-24">24</div><div class="crayon-num" data-line="crayon-5249342075b71418600466-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b71418600466-26">26</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b71418600466-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">radius</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">10</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b71418600466-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">Ball</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5249342075b71418600466-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">Ball</span><span class="crayon-sy">(</span><span class="crayon-i">radius</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">x</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">destX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">destY</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">context</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">balls</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b71418600466-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">friction</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b71418600466-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">color</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'green'</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b71418600466-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">radius</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">radius</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b71418600466-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">x</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b71418600466-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">y</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b71418600466-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">destX</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">destX</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b71418600466-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">destY</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">destY</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b71418600466-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">context</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">context</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b71418600466-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">balls</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">balls</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b71418600466-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b71418600466-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-i">Ball</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b71418600466-15"><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b71418600466-16">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b71418600466-17"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">BALLS_NUM</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">100</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b71418600466-18"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">balls</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-t">Array</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b71418600466-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b71418600466-20"><span class="crayon-st">for</span><span class="crayon-sy">(</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-i">BALLS_NUM</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-o">++</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5249342075b71418600466-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">obj</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Ball</span><span class="crayon-sy">(</span><span class="crayon-i">radius</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">round</span><span class="crayon-sy">(</span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">random</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">1024</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">round</span><span class="crayon-sy">(</span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">random</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">768</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">random</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">1024</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">random</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">768</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">context</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">balls</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b71418600466-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">balls</span><span class="crayon-sy">.</span><span class="crayon-e">push</span><span class="crayon-sy">(</span><span class="crayon-i">obj</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b71418600466-23"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b71418600466-24">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b71418600466-25"><span class="crayon-c">// attempt to pass an array of custom type (Ball) objects</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b71418600466-26"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">balls</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0151 seconds] -->
<p></p>
<p style="text-align: justify;">This code will also trigger the same <em>DataCloneError</em> exception. As you can imagine, passing data through cloning has overhead. If you try to pass a big amount of data at a high frequency, cloning will not be the most efficient path. However, this approach has one merit, it is very safe. Given that everything is cloned, it is therefore impossible to get in a situation where data is corrupted or simply ending up with unsynchronized shared data.</p>
<h6 style="text-align: justify;">Sending larger objects</h6>
<p style="text-align: justify;">In the following example, we create a 16mb byte array that we send to the worker, we capture the time it takes to allocate and transfer back and forth:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b7c709364482" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// extract the string
var logic = document.querySelectorAll("script[type=\"text\/js-worker\"]")[0].textContent;

// worker logic
var blob = new Blob([logic], {type: 'text/javascript'});

// webkit handling
var URL = window.URL || window.webkitURL;

// create the virtual file
var code = URL.createObjectURL(blob);

// create the worker
var worker = new Worker(code);

// listen to the response from the Worker
worker.addEventListener('message', receiveMessage);

// capture current time
var started = Date.now();

// Create a 16MB "file" and fill it.
var uInt8View = new Uint8Array(1024*1024*16); // 16MB
for (var i = 0; i &lt; uInt8View.length; ++i) {
    uInt8View[i] = i;
}

console.log ( "Memory allocation : " + (Date.now() - started) + " ms" );

// capture current time
started = Date.now();

// pass the bytearray (cloned)
worker.postMessage(uInt8View.buffer);

// callback handling the response, data is available in the event object
function receiveMessage (e)
{
    console.log ("Back/forth transfer : " + (Date.now() - started) + " ms");
    console.log ("Byte array size : " + e.data.byteLength);
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b7c709364482-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-2">2</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-4">4</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-6">6</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-8">8</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-10">10</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-12">12</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-14">14</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-16">16</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-18">18</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-20">20</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-22">22</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-24">24</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-26">26</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-28">28</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-30">30</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-32">32</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-34">34</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-36">36</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-38">38</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b7c709364482-40">40</div><div class="crayon-num" data-line="crayon-5249342075b7c709364482-41">41</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b7c709364482-1"><span class="crayon-c">// extract the string</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">logic</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">document</span><span class="crayon-sy">.</span><span class="crayon-e">querySelectorAll</span><span class="crayon-sy">(</span><span class="crayon-s">"script[type=\"text\/js-worker\"]"</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-i">textContent</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-4"><span class="crayon-c">// worker logic</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">blob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Blob</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-i">logic</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">type:</span><span class="crayon-h"> </span><span class="crayon-s">'text/javascript'</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-6">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b7c709364482-7"><span class="crayon-c">// webkit handling</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-8"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">URL</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">webkitURL</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-10"><span class="crayon-c">// create the virtual file</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-11"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-sy">.</span><span class="crayon-e">createObjectURL</span><span class="crayon-sy">(</span><span class="crayon-i">blob</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-12">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b7c709364482-13"><span class="crayon-c">// create the worker</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-14"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">worker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-sy">(</span><span class="crayon-i">code</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-16"><span class="crayon-c">// listen to the response from the Worker</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-17"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">receiveMessage</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-18">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b7c709364482-19"><span class="crayon-c">// capture current time</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-20"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">started</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Date</span><span class="crayon-sy">.</span><span class="crayon-e">now</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-22"><span class="crayon-c">// Create a 16MB "file" and fill it.</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-23"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">uInt8View</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Uint8Array</span><span class="crayon-sy">(</span><span class="crayon-cn">1024</span><span class="crayon-o">*</span><span class="crayon-cn">1024</span><span class="crayon-o">*</span><span class="crayon-cn">16</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// 16MB</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-24"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">uInt8View</span><span class="crayon-sy">.</span><span class="crayon-i">length</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-i">i</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">uInt8View</span><span class="crayon-sy">[</span><span class="crayon-i">i</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-26"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-27">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-28"><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-h"> </span><span class="crayon-s">"Memory allocation : "</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Date</span><span class="crayon-sy">.</span><span class="crayon-e">now</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-i">started</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">" ms"</span><span class="crayon-h"> </span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-29">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-30"><span class="crayon-c">// capture current time</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-31"><span class="crayon-v">started</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Date</span><span class="crayon-sy">.</span><span class="crayon-e">now</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-32">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b7c709364482-33"><span class="crayon-c">// pass the bytearray (cloned)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-34"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-v">uInt8View</span><span class="crayon-sy">.</span><span class="crayon-i">buffer</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-35">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-36"><span class="crayon-c">// callback handling the response, data is available in the event object</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-37"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">receiveMessage</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-38"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">"Back/forth transfer : "</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Date</span><span class="crayon-sy">.</span><span class="crayon-e">now</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-i">started</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">" ms"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b7c709364482-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">"Byte array size : "</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-i">byteLength</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b7c709364482-41"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0164 seconds] -->
<p></p>
<p style="text-align: justify;">If we run this code on different devices and environments, we get the following results: 
<table id="tablepress-4" class="tablepress tablepress-id-4">
<thead>
<tr class="row-1 odd">
	<th class="column-1"><div>Platform</div></th><th class="column-2"><div>Time (ms)</div></th>
</tr>
</thead>
<tbody class="row-hover">
<tr class="row-2 even">
	<td class="column-1">iOS7 (Safari/iPhone5)</td><td class="column-2">214</td>
</tr>
<tr class="row-3 odd">
	<td class="column-1">iOS6 (Safari/iPhone4S)</td><td class="column-2">524</td>
</tr>
<tr class="row-4 even">
	<td class="column-1">MacBook Pro (Chrome/10.8.4)</td><td class="column-2">75</td>
</tr>
</tbody>
</table>
<!-- #tablepress-4 from cache --></p>
<p style="text-align: justify;">Note how expensive data cloning is on a recent device and OS. Let&#8217;s see if transfer of ownership can help performance.</p>
<h6>Transferable objects</h6>
<p style="text-align: justify;">In a scenario where you need to pass a large amount of data and cloning could be too costly, you can rely on transferrable objects. To transfer an object, the postMessage API accepts a second optional second argument, which is an array containing the objects to transfer ownership from:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b88384028959" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// transfer ownership to the worker
worker.postMessage(uInt8View.buffer, [uInt8View.buffer]);</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b88384028959-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b88384028959-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b88384028959-1"><span class="crayon-c">// transfer ownership to the worker</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b88384028959-2"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-v">uInt8View</span><span class="crayon-sy">.</span><span class="crayon-i">buffer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">uInt8View</span><span class="crayon-sy">.</span><span class="crayon-i">buffer</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0015 seconds] -->
<p></p>
<p style="text-align: justify;">With that change, we see that passing data becomes much more efficient, around a 3x performance boost on mobile: 
<table id="tablepress-5" class="tablepress tablepress-id-5">
<thead>
<tr class="row-1 odd">
	<th class="column-1"><div>Platform</div></th><th class="column-2"><div>Time (ms)</div></th>
</tr>
</thead>
<tbody class="row-hover">
<tr class="row-2 even">
	<td class="column-1">iOS7 (Safari/iPhone5)</td><td class="column-2">80</td>
</tr>
<tr class="row-3 odd">
	<td class="column-1">iOS6 (Safari/iPhone4S)</td><td class="column-2">162</td>
</tr>
<tr class="row-4 even">
	<td class="column-1">MacBook Pro (Chrome/10.8.4)</td><td class="column-2">37</td>
</tr>
</tbody>
</table>
<!-- #tablepress-5 from cache --></p>
<p style="text-align: justify;">Note that just before calling postMessage, our byte array is available, right after the transfer, the reference is no longer accesssible and trying to access it throws a runtime exception:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b93764766307" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// outputs: 16777216
// access to the bytearray possible
console.log ( uInt8View.buffer.byteLength );

// transfer ownership to the worker
worker.postMessage(uInt8View.buffer, [uInt8View.buffer]);

// triggers runtime exception: Uncaught TypeError: Cannot read property 'byteLength' of null
console.log ( uInt8View.buffer.byteLength );</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b93764766307-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b93764766307-2">2</div><div class="crayon-num" data-line="crayon-5249342075b93764766307-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b93764766307-4">4</div><div class="crayon-num" data-line="crayon-5249342075b93764766307-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b93764766307-6">6</div><div class="crayon-num" data-line="crayon-5249342075b93764766307-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b93764766307-8">8</div><div class="crayon-num" data-line="crayon-5249342075b93764766307-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b93764766307-1"><span class="crayon-c">// outputs: 16777216</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b93764766307-2"><span class="crayon-c">// access to the bytearray possible</span></div><div class="crayon-line" id="crayon-5249342075b93764766307-3"><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-h"> </span><span class="crayon-v">uInt8View</span><span class="crayon-sy">.</span><span class="crayon-v">buffer</span><span class="crayon-sy">.</span><span class="crayon-i">byteLength</span><span class="crayon-h"> </span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b93764766307-4">&nbsp;</div><div class="crayon-line" id="crayon-5249342075b93764766307-5"><span class="crayon-c">// transfer ownership to the worker</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b93764766307-6"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-v">uInt8View</span><span class="crayon-sy">.</span><span class="crayon-i">buffer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">uInt8View</span><span class="crayon-sy">.</span><span class="crayon-i">buffer</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5249342075b93764766307-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b93764766307-8"><span class="crayon-c">// triggers runtime exception: Uncaught TypeError: Cannot read property 'byteLength' of null</span></div><div class="crayon-line" id="crayon-5249342075b93764766307-9"><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-h"> </span><span class="crayon-v">uInt8View</span><span class="crayon-sy">.</span><span class="crayon-v">buffer</span><span class="crayon-sy">.</span><span class="crayon-i">byteLength</span><span class="crayon-h"> </span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0035 seconds] -->
<p></p>
<p style="text-align: justify;">This technique can be useful in a scenario where you need to pass a big amount of data, like a big binary blob. Note that since the beginning, we passed data from the main thread to the Worker, but data could be passed the other way around. This time, we will create the memory buffer from the worker and send it to the main thread.</p>
<p style="text-align: justify;">To achieve this, we modify our worker logic:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075b9d152849372" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// Create a 16MB "file" and fill it.
var uInt8View = new Uint8Array(1024*1024*16); // 16MB

for (var i = 0; i &lt; uInt8View.length; ++i) {
    uInt8View[i] = i;
} 

self.postMessage(uInt8View.buffer, [uInt8View.buffer]);</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075b9d152849372-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b9d152849372-2">2</div><div class="crayon-num" data-line="crayon-5249342075b9d152849372-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b9d152849372-4">4</div><div class="crayon-num" data-line="crayon-5249342075b9d152849372-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b9d152849372-6">6</div><div class="crayon-num" data-line="crayon-5249342075b9d152849372-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075b9d152849372-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075b9d152849372-1"><span class="crayon-c">// Create a 16MB "file" and fill it.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b9d152849372-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">uInt8View</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Uint8Array</span><span class="crayon-sy">(</span><span class="crayon-cn">1024</span><span class="crayon-o">*</span><span class="crayon-cn">1024</span><span class="crayon-o">*</span><span class="crayon-cn">16</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// 16MB</span></div><div class="crayon-line" id="crayon-5249342075b9d152849372-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b9d152849372-4"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">uInt8View</span><span class="crayon-sy">.</span><span class="crayon-i">length</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-i">i</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5249342075b9d152849372-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">uInt8View</span><span class="crayon-sy">[</span><span class="crayon-i">i</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b9d152849372-6"><span class="crayon-sy">}</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5249342075b9d152849372-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075b9d152849372-8"><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-v">uInt8View</span><span class="crayon-sy">.</span><span class="crayon-i">buffer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">uInt8View</span><span class="crayon-sy">.</span><span class="crayon-i">buffer</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0047 seconds] -->
<p></p>
<p style="text-align: justify;">Then, we listen to the message coming from the worker:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075ba7983148735" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// extract the string 
var logic = document.querySelectorAll("script[type=\"text\/js-worker\"]")[0].textContent; 

// worker logic 
var blob = new Blob([logic], {type: 'text/javascript'}); 

// webkit handling 
var URL = window.URL || window.webkitURL; 

// create the virtual file 
var code = URL.createObjectURL(blob); 

// create the Worker 
var worker = new Worker(code); 

// listen to the incoming message from the Worker 
worker.addEventListener('message', receiveMessage); 

function receiveMessage (e) { 
    console.log (e.data.byteLength); 
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075ba7983148735-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ba7983148735-2">2</div><div class="crayon-num" data-line="crayon-5249342075ba7983148735-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ba7983148735-4">4</div><div class="crayon-num" data-line="crayon-5249342075ba7983148735-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ba7983148735-6">6</div><div class="crayon-num" data-line="crayon-5249342075ba7983148735-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ba7983148735-8">8</div><div class="crayon-num" data-line="crayon-5249342075ba7983148735-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ba7983148735-10">10</div><div class="crayon-num" data-line="crayon-5249342075ba7983148735-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ba7983148735-12">12</div><div class="crayon-num" data-line="crayon-5249342075ba7983148735-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ba7983148735-14">14</div><div class="crayon-num" data-line="crayon-5249342075ba7983148735-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ba7983148735-16">16</div><div class="crayon-num" data-line="crayon-5249342075ba7983148735-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ba7983148735-18">18</div><div class="crayon-num" data-line="crayon-5249342075ba7983148735-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5249342075ba7983148735-20">20</div><div class="crayon-num" data-line="crayon-5249342075ba7983148735-21">21</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075ba7983148735-1"><span class="crayon-c">// extract the string </span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ba7983148735-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">logic</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">document</span><span class="crayon-sy">.</span><span class="crayon-e">querySelectorAll</span><span class="crayon-sy">(</span><span class="crayon-s">"script[type=\"text\/js-worker\"]"</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-i">textContent</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5249342075ba7983148735-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ba7983148735-4"><span class="crayon-c">// worker logic </span></div><div class="crayon-line" id="crayon-5249342075ba7983148735-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">blob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Blob</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-i">logic</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">type:</span><span class="crayon-h"> </span><span class="crayon-s">'text/javascript'</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ba7983148735-6">&nbsp;</div><div class="crayon-line" id="crayon-5249342075ba7983148735-7"><span class="crayon-c">// webkit handling </span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ba7983148735-8"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">URL</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">webkitURL</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5249342075ba7983148735-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ba7983148735-10"><span class="crayon-c">// create the virtual file </span></div><div class="crayon-line" id="crayon-5249342075ba7983148735-11"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-sy">.</span><span class="crayon-e">createObjectURL</span><span class="crayon-sy">(</span><span class="crayon-i">blob</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ba7983148735-12">&nbsp;</div><div class="crayon-line" id="crayon-5249342075ba7983148735-13"><span class="crayon-c">// create the Worker </span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ba7983148735-14"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">worker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-sy">(</span><span class="crayon-i">code</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5249342075ba7983148735-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ba7983148735-16"><span class="crayon-c">// listen to the incoming message from the Worker </span></div><div class="crayon-line" id="crayon-5249342075ba7983148735-17"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">receiveMessage</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ba7983148735-18">&nbsp;</div><div class="crayon-line" id="crayon-5249342075ba7983148735-19"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">receiveMessage</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5249342075ba7983148735-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-i">byteLength</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5249342075ba7983148735-21"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0092 seconds] -->
<p></p>
<p style="text-align: justify;">If we run the code above, the console outputs:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5249342075bb2318343591" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
16777216</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5249342075bb2318343591-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5249342075bb2318343591-1"><span class="crayon-cn">16777216</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p></p>
<p style="text-align: justify;">We are now transferring our data from the background Web Worker to the main UI thread.</p>
<h5>Responsive use cases</h5>
<p style="text-align: justify;">As we said earlier, Web Workers are commonly used today to perform expensive/synchronous tasks in the background. This allows you as a developer to perform expensive computations in the background, without causing the UI to lock so that your application stays always responsive.</p>
<p>Here is below a few use cases:</p>
<ul>
<li>Generating or parsing/rendering a PDF.</li>
<li>Compressing an image to a custom file format (JPEG, etc.).</li>
<li>Compute an A* path inside a game.</li>
<li>Lookup a word in a database for a spell checker in a text editor.</li>
<li>Load and parse some resources inside a game.</li>
<li>Perform general complex computations in the background and log that remotely.</li>
<li>And many others&#8230;</li>
</ul>
<p style="text-align: justify;">For these, message cloning works just fine, because low-latency is acceptable. All you need is to pass your data back to the UI thread and that&#8217;s it, you don&#8217;t need to pass messages at a high frequency</p>
<h5>Concurrency and the future of the web</h5>
<p style="text-align: justify;">As you can see, Web Workers are very easy to use and pretty powerful. The message passing model is simple and easy and they can be leveraged today on desktop and mobile to make your application more responsive and snappier. So, are we done with them or could they be improved? We will see in the following section that there is room for a few improvements that could really move the web forward.</p>
<h6 style="text-align: justify;">Parallelization</h6>
<p style="text-align: justify;">So far, we have covered techniques to offload expensive computations to a background worker, using message cloning and transfer of ownership, but we have not discussed the parallelization use cases. Instead of relying on a single Web Worker to perform a computation in the background, the idea of parallelization is to have multiple Web Workers run in parallel and working on solving the same task but faster, given that we distribute the task to multiple threads. Microsoft has posted <a title="Web Workers and image manipulation" href="http://blogs.msdn.com/b/eternalcoding/archive/2012/09/20/using-web-workers-to-improve-performance-of-image-manipulation.aspx" target="_blank">a good example</a> about this for image manipulation.</p>
<p style="text-align: justify;">As we have seen, two communication models currently exist for Web Workers, <strong>cloning</strong> and <strong>ownership transfer</strong>, unfortunately, both do not work well today for parallelization. The former does not, giving data ownership to one Web Worker at a time. The latter allows you to parallelize tasks by duplicating data when needed, but the cloning has real overhead and that can become limiting in some scenarios. In my tests, passing an array of 100 JSON objects over a few frames brought the performance to a crawl. Being able to truly share some memory (like a simple TypedArray) between workers would be fast, but it would expose some additional complexity to web developers, like having to deal with synchronization of data.</p>
<p style="text-align: justify;">Most of the time, the idea of shared memory makes people worried about nasty things we usually don&#8217;t want to deal with, like data races and locks leading to memory corruption. I actually agree that within the context of low-level languages, this is pretty scary, but with a managed language like JavaScript, I would argue that it is not as bad. In addition, the main UI thread and Web Workers have been designed so that blocking cannot happen when one is waiting for the other and blocking the UI can already happen today with a simple while (true) sitting on the main thread.</p>
<p style="text-align: justify;">So, really, I am not sure a shared memory model with Web Workers would necessarily hurt the web, but I agree that there is probably a better solution than exposing plain simple shared memory. This would expose to web developers some additional complexity, like dealing with conditions and mutexes, and there&#8217;s gotta be something better for web developers. Anyway, I am following discussions about bringing a better message passing model to Web Workers with great passion.</p>
<h6>Shared resources (WebGL)</h6>
<p style="text-align: justify;">Web Workers also offer some great potential when it comes to GPU programming. The most exciting one to me, is the idea of <a title="Shared Resources" href="http://www.khronos.org/webgl/wiki/SharedResouces" target="_blank">shared resources</a> for WebGL relying on Web Workers. Today, when you are programming with WebGL, all the initialization work required to initialize WebGL, like shader programs initialization and texture uploads happen on the UI thread. In other words, to see something on screen, WebGL requires you to upload your textures and programs (vertex/fragments shaders) and all of this still happens on the main UI thread. In addition. two things usually required when working with GPU APIs have always been slow historically and most importantly blocking operations: texture upload and texture readback.</p>
<p style="text-align: justify;">This is a big limitation, as you obviously need to upload textures and this will once again lock the UI if expensive, making your game/application feel janky. Same thing for texture readback (which means copying the texture uploaded on the GPU back to RAM) to perform other computations on the CPU. With shared resources support for WebGL, multiple contexts could be created across Web Workers to perform some of the tasks mentioned earlier in other threads, allowing developers to produce lock-free, snappy, super responsive GPU experiences.</p>
<h5 style="text-align: justify;">Additional Web Workers resources</h5>
<ul>
<li><a title="The Basics of Web Workers" href="http://www.html5rocks.com/en/tutorials/workers/basics/" target="_blank"><span style="line-height: 1.5em;">The Basics of Web Workers (HTML5 Rocks)</span></a></li>
<li><a title="Using Web Workers to improve performance of image manipulation" href="http://blogs.msdn.com/b/eternalcoding/archive/2012/09/20/using-web-workers-to-improve-performance-of-image-manipulation.aspx" target="_blank">Using Web Workers to improve performance of image manipulation (Microsoft)</a></li>
<li><a title="NodeJS Web Workers design" href="http://blog.std.in/2010/07/08/nodejs-webworker-design/" target="_blank">Design of Web Workers for NodeJS </a></li>
</ul>
<p style="text-align: justify;">I hope you enjoyed reading these additional details on Web Workers!</p>
<div style="min-height:33px;" class="really_simple_share really_simple_share_button robots-nocontent snap_nopreview"><div class="really_simple_share_facebook_like" style="width:100px;"><iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Ftypedarray.org%2Fconcurrency-in-javascript%2F&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;height=27&amp;locale=en_US" 
							scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:27px;" allowTransparency="true"></iframe></div><div class="really_simple_share_twitter" style="width:100px;"><a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal"  data-text="Concurrency in JavaScript" data-url="http://typedarray.org/concurrency-in-javascript/"  data-via=""  ></a></div><div class="really_simple_share_google1" style="width:80px;"><div class="g-plusone" data-size="medium" data-href="http://typedarray.org/concurrency-in-javascript/" ></div></div></div>
		<div style="clear:both;"></div>																	
<small>
	Posted on <a href="http://typedarray.org/2013/07/">July 1, 2013</a>
	by <a href="http://typedarray.org/author/admin/">Thibault Imbert</a>
	&middot;
	<span class="dsq-postid" rel="69 http://typedarray.org/?p=69">20 comments</span>
</small>
								
														<span class="mpcth-post-tags">
									Tags: <a href="http://typedarray.org/tag/asynchronous/">asynchronous</a>, <a href="http://typedarray.org/tag/concurrency/">concurrency</a>, <a href="http://typedarray.org/tag/threading/">threading</a>, <a href="http://typedarray.org/tag/workers/">workers</a>. 

								</span>
													
						<!-- Required by wordpress -->
						<div class="mpcth-clear-fix"></div>
												
						  

												</div>
						
<div id="disqus_thread">
                    <div id="dsq-content">


            <ul id="dsq-comments">
                    <li class="comment even thread-even depth-1" id="dsq-comment-91">
        <div id="dsq-comment-header-91" class="dsq-comment-header">
            <cite id="dsq-cite-91">
                <span id="dsq-author-user-91">Yo Dirkx</span>
            </cite>
        </div>
        <div id="dsq-comment-body-91" class="dsq-comment-body">
            <div id="dsq-comment-message-91" class="dsq-comment-message"><p>The <code>user = e;</code> example is wrong. <code>e</code> is the message event. <code>e.data</code> will be the user.</p>
</div>
        </div>

    <ul class='children'>
    <li class="comment odd alt depth-2" id="dsq-comment-92">
        <div id="dsq-comment-header-92" class="dsq-comment-header">
            <cite id="dsq-cite-92">
                <span id="dsq-author-user-92">Thibault Imbert</span>
            </cite>
        </div>
        <div id="dsq-comment-body-92" class="dsq-comment-body">
            <div id="dsq-comment-message-92" class="dsq-comment-message"><p>Oh, good catch! Thanks, fixed.</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-93">
        <div id="dsq-comment-header-93" class="dsq-comment-header">
            <cite id="dsq-cite-93">
                <span id="dsq-author-user-93">armetiz</span>
            </cite>
        </div>
        <div id="dsq-comment-body-93" class="dsq-comment-body">
            <div id="dsq-comment-message-93" class="dsq-comment-message"><p>&#8220;Design of Web Workers for NodeJS&#8221;<br />
This link above is missing the &#8216;http://&#8217;. </p>
<p>Great article!</p>
</div>
        </div>

    <ul class='children'>
    <li class="comment odd alt depth-2" id="dsq-comment-98">
        <div id="dsq-comment-header-98" class="dsq-comment-header">
            <cite id="dsq-cite-98">
                <span id="dsq-author-user-98">Thibault Imbert</span>
            </cite>
        </div>
        <div id="dsq-comment-body-98" class="dsq-comment-body">
            <div id="dsq-comment-message-98" class="dsq-comment-message"><p>Thanks! Link fixed!</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li class="post pingback">
        <p>Pingback: <a href='http://www.scoop.it/t/javascript-for-line-of-business-applications/p/4004459770/concurrency-in-javascript' rel='external nofollow' class='url'>Concurrency in JavaScript | JavaScript for Line...</a></p>
    </li>
    </li>
    <li class="post pingback">
        <p>Pingback: <a href='http://www.scoop.it/t/whateverjs/p/4004464732/concurrency-in-javascript-typedarray-org' rel='external nofollow' class='url'>Concurrency in JavaScript | TypedArray.org | wh...</a></p>
    </li>
    </li>
    <li class="comment even thread-even depth-1" id="dsq-comment-97">
        <div id="dsq-comment-header-97" class="dsq-comment-header">
            <cite id="dsq-cite-97">
                <span id="dsq-author-user-97">Lindsey Simon</span>
            </cite>
        </div>
        <div id="dsq-comment-body-97" class="dsq-comment-body">
            <div id="dsq-comment-message-97" class="dsq-comment-message"><p>In the transfer ownership example the times are still frighteningly high right(100ms)? &#8211; high enough that a user might notice a pause/glitch?</p>
</div>
        </div>

    <ul class='children'>
    <li class="comment odd alt depth-2" id="dsq-comment-99">
        <div id="dsq-comment-header-99" class="dsq-comment-header">
            <cite id="dsq-cite-99">
                <span id="dsq-author-user-99">Thibault Imbert</span>
            </cite>
        </div>
        <div id="dsq-comment-body-99" class="dsq-comment-body">
            <div id="dsq-comment-message-99" class="dsq-comment-message"><p>Yes, unfortunately, it would, especially on mobile. We are getting there with more recent hardware but there is still a lot of room for improvements.<br />
Hopefully a new model will appear in the future allowing faster transfer, as fast as shared memory but safer!</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li class="post pingback">
        <p>Pingback: <a href='http://www.scoop.it/t/aoj/p/4004481222/concurrency-in-javascript-typedarray-org' rel='external nofollow' class='url'>Concurrency in JavaScript | TypedArray.org | Ao...</a></p>
    </li>
    </li>
    <li class="post pingback">
        <p>Pingback: <a href='http://www.pearltrees.com/carlopellegrini/javascript/id8577426#pearl83480346&#038;show=reveal,6' rel='external nofollow' class='url'>Javascript | Pearltrees</a></p>
    </li>
    </li>
    <li class="post pingback">
        <p>Pingback: <a href='http://www.pearltrees.com/semihgokduman/watch-read/id6447499#pearl83645536&#038;show=reveal,6' rel='external nofollow' class='url'>Watch || read | Pearltrees</a></p>
    </li>
    </li>
    <li class="post pingback">
        <p>Pingback: <a href='http://blog.absolutedisaster.co.uk/web-workers-a-practical-guide/' rel='external nofollow' class='url'>I really need to think of a clever name for my blog</a></p>
    </li>
    </li>
    <li class="post pingback">
        <p>Pingback: <a href='http://www.cssauthor.com/best-web-design-and-web-development-articles-roundup-2/' rel='external nofollow' class='url'>Best Web Design and Web Development Articles Roundup</a></p>
    </li>
    </li>
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-105">
        <div id="dsq-comment-header-105" class="dsq-comment-header">
            <cite id="dsq-cite-105">
                <span id="dsq-author-user-105">Laszlo Radics</span>
            </cite>
        </div>
        <div id="dsq-comment-body-105" class="dsq-comment-body">
            <div id="dsq-comment-message-105" class="dsq-comment-message"><p>to think one step further, you can create a worker from a simple function:<br />
function createWorker(func){<br />
  var blob = new Blob(['('+func.toString() + ')()'], {type: &#8216;text/javascript&#8217;});<br />
  var URL = window.URL || window.webkitURL;<br />
  var code = URL.createObjectURL(blob);<br />
  var worker = new Worker(code);<br />
}</p>
</div>
        </div>

    <ul class='children'>
    <li class="comment odd alt depth-2" id="dsq-comment-107">
        <div id="dsq-comment-header-107" class="dsq-comment-header">
            <cite id="dsq-cite-107">
                <span id="dsq-author-user-107">Thibault Imbert</span>
            </cite>
        </div>
        <div id="dsq-comment-body-107" class="dsq-comment-body">
            <div id="dsq-comment-message-107" class="dsq-comment-message"><p>Ah nice one. Thanks!</p>
</div>
        </div>

    </li>
</ul>
</li>
    <li class="post pingback">
        <p>Pingback: <a href='http://kvarkson.com/13-15-iyulya-bednyj-osminog/' rel='external nofollow' class='url'>Ежедневник kvarkson&#039;a | 13 - 15 Июля / Бедный осьминог</a></p>
    </li>
    </li>
    <li class="post pingback">
        <p>Pingback: <a href='http://typedarray.org/from-microphone-to-wav-with-getusermedia-and-web-audio/' rel='external nofollow' class='url'>From microphone to .WAV with: getUserMedia and Web Audio | TypedArray.org</a></p>
    </li>
    </li>
    <li class="post pingback">
        <p>Pingback: <a href='http://www.iamntz.com/3860/frontend-developer/cateva-link-uri/' rel='external nofollow' class='url'>Câteva link-uri &laquo; Staicu Ionuț-Bogdan</a></p>
    </li>
    </li>
    <li class="post pingback">
        <p>Pingback: <a href='http://www.techleadershipnews.com/issue-55-greatness-rarely-happens-by-following-the-rules/' rel='external nofollow' class='url'>Issue 55 &#8211; Greatness Rarely Happens By Following The Rules | TLN</a></p>
    </li>
    </li>
    <li class="comment even thread-even depth-1" id="dsq-comment-124">
        <div id="dsq-comment-header-124" class="dsq-comment-header">
            <cite id="dsq-cite-124">
                <span id="dsq-author-user-124">masswerk</span>
            </cite>
        </div>
        <div id="dsq-comment-body-124" class="dsq-comment-body">
            <div id="dsq-comment-message-124" class="dsq-comment-message"><p>First, thanks for the great article.</p>
<p>@laszloradics:disqus @thibaulttimbert:disqus<br />
Using the toSource() method of a function object provides also a fall-back for older browsers (just use an instance of the inlined function). I actually wrote a small library with abstractions for this and all the communication/messaging issues, including transferable objects. See: Plexer.js <a href="http://www.masswerk.at/plexer" rel="nofollow">http://www.masswerk.at/plexer</a> (MIT license).</p>
<p>A note on transferable objects: I didn&#8217;t find any documentation of the transfer map (the array used to specify the values which are to be communicated as transferable objects). It seems that you may reference any of the values that are passed on the first nesting level in any order. The transfer map itself is just an array of reference(s) to the object(s) to be transfered. If there is any facility for nesting levels, I didn&#8217;t detect them yet.</p>
</div>
        </div>

    </li>
            </ul>


        </div>

    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://typedarray.org/concurrency-in-javascript/';
    var disqus_identifier = '69 http://typedarray.org/?p=69';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'typedarray';
    var disqus_title = "Concurrency in JavaScript";
        var disqus_config = function () {
        var config = this; // Access to the config object
        config.language = '';

        /*
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            var script = document.createElement('script');
            script.async = true;
            script.src = '?cf_action=sync_comments&post_id=69';

            var firstScript = document.getElementsByTagName( "script" )[0];
            firstScript.parentNode.insertBefore(script, firstScript);
        });
                    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
            {
                'author_name':    "Concurrency in JavaScript | JavaScript for Line...",
                'author_url':    "http:\/\/www.scoop.it\/t\/javascript-for-line-of-business-applications\/p\/4004459770\/concurrency-in-javascript",
                'date':            "07\/10\/2013 01:32 PM",
                'excerpt':        "[...] Just like with Flash, JavaScript code runs by default on the UI thread, and any expensive JavaScript computation will ...",
                'type':            "pingback"            }
,            {
                'author_name':    "Concurrency in JavaScript | TypedArray.org | wh...",
                'author_url':    "http:\/\/www.scoop.it\/t\/whateverjs\/p\/4004464732\/concurrency-in-javascript-typedarray-org",
                'date':            "07\/10\/2013 03:10 PM",
                'excerpt':        "[...] &nbsp; [...] ",
                'type':            "pingback"            }
,            {
                'author_name':    "Concurrency in JavaScript | TypedArray.org | Ao...",
                'author_url':    "http:\/\/www.scoop.it\/t\/aoj\/p\/4004481222\/concurrency-in-javascript-typedarray-org",
                'date':            "07\/10\/2013 09:52 PM",
                'excerpt':        "[...] RT @JavaScriptDaily: Concurrency in JavaScript with Workers: http:\/\/t.co\/pkHCAksEjY (A practical look at Web Workers.)&nbsp; [...] ",
                'type':            "pingback"            }
,            {
                'author_name':    "Javascript | Pearltrees",
                'author_url':    "http:\/\/www.pearltrees.com\/carlopellegrini\/javascript\/id8577426#pearl83480346&#038;show=reveal,6",
                'date':            "07\/11\/2013 08:35 PM",
                'excerpt':        "[...] Concurrency in JavaScript | TypedArray.org [...] ",
                'type':            "pingback"            }
,            {
                'author_name':    "Watch || read | Pearltrees",
                'author_url':    "http:\/\/www.pearltrees.com\/semihgokduman\/watch-read\/id6447499#pearl83645536&#038;show=reveal,6",
                'date':            "07\/12\/2013 10:12 AM",
                'excerpt':        "[...] Concurrency in JavaScript | TypedArray.org [...] ",
                'type':            "pingback"            }
,            {
                'author_name':    "I really need to think of a clever name for my blog",
                'author_url':    "http:\/\/blog.absolutedisaster.co.uk\/web-workers-a-practical-guide\/",
                'date':            "07\/12\/2013 03:58 PM",
                'excerpt':        "[...] http:\/\/typedarray.org\/concurrency-in-javascript\/ [...] ",
                'type':            "pingback"            }
,            {
                'author_name':    "Best Web Design and Web Development Articles Roundup",
                'author_url':    "http:\/\/www.cssauthor.com\/best-web-design-and-web-development-articles-roundup-2\/",
                'date':            "07\/13\/2013 06:01 PM",
                'excerpt':        "[...] → Go To Article Page [...] ",
                'type':            "pingback"            }
,            {
                'author_name':    "Ежедневник kvarkson&#039;a | 13 - 15 Июля \/ Бедный осьминог",
                'author_url':    "http:\/\/kvarkson.com\/13-15-iyulya-bednyj-osminog\/",
                'date':            "07\/16\/2013 08:51 PM",
                'excerpt':        "[...] Варианты реализации многопоточности на JS. [...] ",
                'type':            "pingback"            }
,            {
                'author_name':    "From microphone to .WAV with: getUserMedia and Web Audio | TypedArray.org",
                'author_url':    "http:\/\/typedarray.org\/from-microphone-to-wav-with-getusermedia-and-web-audio\/",
                'date':            "07\/22\/2013 08:35 PM",
                'excerpt':        "[...] if WAV packaging becomes to expensive, it is an ideal task to offload to a background worker  Once ...",
                'type':            "pingback"            }
,            {
                'author_name':    "Câteva link-uri &laquo; Staicu Ionuț-Bogdan",
                'author_url':    "http:\/\/www.iamntz.com\/3860\/frontend-developer\/cateva-link-uri\/",
                'date':            "07\/25\/2013 02:58 PM",
                'excerpt':        "[...] Concurrency in JavaScript. O introducere în Web Workers. [...] ",
                'type':            "pingback"            }
,            {
                'author_name':    "Issue 55 &#8211; Greatness Rarely Happens By Following The Rules | TLN",
                'author_url':    "http:\/\/www.techleadershipnews.com\/issue-55-greatness-rarely-happens-by-following-the-rules\/",
                'date':            "07\/29\/2013 04:00 AM",
                'excerpt':        "[...] the short post with a good reminder to Do the right thing, Wait to get fired, and a deep ...",
                'type':            "pingback"            }
        ],
        'trackback_url': "http:\/\/typedarray.org\/concurrency-in-javascript\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.' + 'disqus.com' + '/embed.js?pname=wordpress&pver=2.74';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

					</article>
									 
			</div> <!-- end #mpcth_page_articles -->
			<div class="mpcth-pagination">
				<a href="#" class="mpcth-footer-switch mpcth-alt-link mpcth-footer-open"><span class="icon-plus"></span></a>
			</div>
		</div><!-- end #mpcth_page_content -->

		
	</div><!-- #mpcth_page_container -->


<footer id="mpcth_footer" class="mpcth-footer-open">
			<div id="mpcth_footer_content">
			<ul>
									<li data-row="3" class="widget widget_3">
						<h2 class="widget_title footer_title">About</h2>
						<div class="textwidget">JavaScript for interactive developers. </br><a href="http://typedarray.org/about/">More infos</a>
						</div>
					</li>
					<li data-row="3" class="widget widget_3"><h2 class="widget_title footer_title">Categories</h2>
						<ul>
								<li class="cat-item cat-item-2"><a href="http://typedarray.org/category/javascript/" title="View all posts filed under JavaScript">JavaScript</a> (11)
</li>
	<li class="cat-item cat-item-22"><a href="http://typedarray.org/category/web-audio/" title="View all posts filed under Web Audio">Web Audio</a> (1)
</li>
	<li class="cat-item cat-item-5"><a href="http://typedarray.org/category/webgl/" title="View all posts filed under WebGL">WebGL</a> (2)
</li>
						</ul>
					</li>
					<li data-row="3" class="widget widget_3"><h2 class="widget_title sidebar_widget_title">Archives</h2>
						<ul>
								<li><a href='http://typedarray.org/2013/08/' title='August 2013'>August 2013</a></li>
	<li><a href='http://typedarray.org/2013/07/' title='July 2013'>July 2013</a></li>
	<li><a href='http://typedarray.org/2013/05/' title='May 2013'>May 2013</a></li>
	<li><a href='http://typedarray.org/2013/04/' title='April 2013'>April 2013</a></li>
	<li><a href='http://typedarray.org/2013/03/' title='March 2013'>March 2013</a></li>
						</ul>
					</li>
							</ul>
			<div class="mpcth-clear-fix"></div>
		</div>	
		
	</footer><!-- end #mpcth_footer -->

</div><!-- end #mpcth_page_wrap -->
	<script type='text/javascript' src='http://typedarray.org/wp-content/plugins/tablepress/js/jquery.datatables.min.js?ver=0.9-RC'></script>
<script type="text/javascript">
jQuery(document).ready(function($){
$('#tablepress-4').dataTable({"aaSorting":[],"bSortClasses":false,"asStripeClasses":['even','odd']});
$('#tablepress-5').dataTable({"aaSorting":[],"bSortClasses":false,"asStripeClasses":['even','odd']});
});
</script></body>
</html>		