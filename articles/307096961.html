<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="keywords" content="web performance faster web sites high performance web sites website optimization best practices javascript css web development mobile">
<title>Reloading post-onload resources | High Performance Web Sites</title>
<link rel="stylesheet" type="text/css" media="all" href="http://www.stevesouders.com/blog/wp-content/themes/SteveSouders/style.css" />
<link rel="alternate" type="application/rss+xml" title="High Performance Web Sites &raquo; Reloading post-onload resources Comments Feed" href="http://www.stevesouders.com/blog/2013/02/26/reloading-post-onload-resources/feed/" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.stevesouders.com/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.stevesouders.com/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='HTTP Archive: new stats' href='http://www.stevesouders.com/blog/2013/02/16/http-archive-new-stats/' />
<link rel='next' title='Zopflinator' href='http://www.stevesouders.com/blog/2013/03/08/zopflinator/' />
<meta name="generator" content="WordPress 3.6.1" />
<link rel='canonical' href='http://www.stevesouders.com/blog/2013/02/26/reloading-post-onload-resources/' />
<link rel='shortlink' href='http://www.stevesouders.com/blog/?p=3225' />
<script type="text/javascript">
	window._wp_rp_static_base_url = 'http://dtmvdvtzf8rz0.cloudfront.net/static/';
	window._wp_rp_wp_ajax_url = "http://www.stevesouders.com/blog/wp-admin/admin-ajax.php";
	window._wp_rp_plugin_version = '2.6';
	window._wp_rp_post_id = '3225';
	window._wp_rp_num_rel_posts = '5';
</script>

<script>
(function(d, s) {
	var js = d.getElementsByTagName(s)[0],
		ln = d.createElement(s);
	ln.src = '//lognormal.net/boomerang/8fa4fc2785a82fae20c596ca4f45d1b218a9ab12ffef741d09b29532';
	js.parentNode.insertBefore(ln, js);
})(document, 'script');
</script>

<script type="text/javascript">
// GOOGLE ANALYTICS
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-15026169-1']);
_gaq.push(['_setSiteSpeedSampleRate', 100]);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
</head>

<body>
<div id="header">
	<div class="containerwrapper">
  		<h1 id="logo"><a href="http://stevesouders.com/"><span>SteveSouders.com</span></a></h1>
        <ul id="topnav">
        <li><a href="http://stevesouders.com/about.php">about</a></li>
        <li><a href="http://stevesouders.com/contact.php">contact</a></li>
        <li class="last"> <a href="http://twitter.com/#!/souders/"><img src="/images/twitter-icon.png" width=16 height=16 border=0 style="vertical-align: bottom;"></a>
        </ul>
	</div>    
</div>
<div id="contentWrapper" class="containerwrapper">
<div id="sidebar">
<div id="search-3" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action="http://www.stevesouders.com/blog/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="Search" />
				</div>
			</form></div><div id="custom-recent-posts-3" class="widget custom-recent-posts"><h3 class="blockheader">Most Recent Posts</h3>		<ul style="list-style-type: none; margin-left: 20px; text-indent: -20px;">
        		<li><a href="http://www.stevesouders.com/blog/2013/09/05/domain-sharding-revisited/" rel="bookmark">Domain Sharding revisited</a></li>
				<li><a href="http://www.stevesouders.com/blog/2013/08/27/web-performance-for-the-future/" rel="bookmark">Web performance for the future</a></li>
				<li><a href="http://www.stevesouders.com/blog/2013/07/16/activetable-bookmarklet/" rel="bookmark">ActiveTable bookmarklet</a></li>
				<li><a href="http://www.stevesouders.com/blog/2013/07/15/twitter-widget-update/" rel="bookmark">Twitter widget update</a></li>
				<li><a href="http://www.stevesouders.com/blog/2013/06/16/browser-busy-indicators/" rel="bookmark">Browser Busy Indicators</a></li>
				</ul>
		<a href="http://www.stevesouders.com/blog/archives/">View Archive</a></div><div id="text-3" class="widget widget_text"><h3 class="blockheader">Feeds</h3>			<div class="textwidget"><a href="http://www.stevesouders.com/blog/feed/"><img src="/blog/wp-content/uploads/2011/02/feed.png" width="10" height="10" /> </a><a href="http://www.stevesouders.com/blog/feed/">Posts</a><br />
<a href="http://www.stevesouders.com/blog/comments/feed/"><img src="/blog/wp-content/uploads/2011/02/feed.png" width="10" height="10" /> </a><a href="http://www.stevesouders.com/blog/comments/feed/">Comments</a></li></div>
		</div>        
</div><div id="content">



		<div id="post-3225" class="post-3225 post type-post status-publish format-standard hentry category-browsers category-chrome category-firefox category-internet-explorer category-performance category-web-development tag-onload tag-reload">
        	            	<h1>Reloading post-onload resources</h1>
            
			<p class="meta">February 26, 2013 5:35 pm | <a href="http://www.stevesouders.com/blog/2013/02/26/reloading-post-onload-resources/#comments" title="Comment on Reloading post-onload resources">16 Comments</a></p><!-- .entry-meta -->

			<p>Two performance best practices are to <a title="High Performance Web Sites: Rule 3 â€“ Add an Expires Header" href="http://developer.yahoo.com/blogs/ydn/posts/2007/05/high_performanc_2/">add a far future expiration date</a> and to <a title="Splitting the Initial Payload" href="http://www.stevesouders.com/blog/2008/05/14/split-the-initial-payload/">delay loading resources</a> (esp. scripts) until after the onload event. But it turns out that the combination of these best practices leads to a situation where it&#8217;s hard for users to refresh resources. More specifically, hitting Reload (or even shift+Reload) doesn&#8217;t refresh these cacheable, lazy-loaded resources in Firefox, Chrome, Safari, Android, and iPhone.</p>
<h4>What we expect from Reload</h4>
<p>The browser has a cache (or <a title="Chrome's 10 Caches" href="http://gent.ilcore.com/2011/02/chromes-10-caches.html">10</a>) where it saves copies of responses. If the user feels those cached responses are stale, she can hit the Reload button to ignore the cache and refetch everything, thus ensuring she&#8217;s seeing the latest copy of the website&#8217;s content. I couldn&#8217;t find anything in the <a title="Rfc 2616 - W3C" href="http://www.w3.org/Protocols/rfc2616/rfc2616.txt">HTTP Spec</a> dictating the behavior of the Reload button, but all browsers have this behavior AFAIK:</p>
<ul>
<li>If you click Reload (or control+R or command+R) then all the resources are refetched using a <a title="MNot's Caching Tutorial" href="http://www.mnot.net/cache_docs/">Conditional GET request</a> (with the If-Modified-Since and If-None-Match validators). If the server&#8217;s version of the response has <em>not</em> changed, it returns a short &#8220;304 Not Modified&#8221; status with no response body. If the response <em>has</em> changed then &#8220;200 OK&#8221; and the entire response body is returned.</li>
<li>If you click shift+Reload (or control+Reload or control+shift+R or command+shift+R) then all the resources are refetched withOUT the validation headers. This is less efficient since every response body is returned, but guarantees that any cached responses that are stale are overwritten.</li>
</ul>
<p>Bottomline, regardless of expiration dates we expect that hitting Reload gets the latest version of the website&#8217;s resources, and shift+Reload will do so even more aggressively.</p>
<h4>Welcome to Reload 2.0</h4>
<p>In the days of Web 1.0, 