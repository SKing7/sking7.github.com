<!DOCTYPE html>
<html lang="zh_CN">
<head>
  <meta charset="utf-8"/>
  <title>清空当前页面的用户体验 -一淘-UX-用户体验中心</title>
  <link href="/assets/application-fe15efd9491000393c2504e4810dc705.css" media="all" rel="stylesheet" type="text/css" />
    <!--[if lt IE 8]>
  <link href="/kissy/editor/theme/cool/editor-pkg-sprite-min.css" media="screen" rel="stylesheet" type="text/css" />
  <![endif]-->
  <!--[if gte IE 8]><!-->
  <link href="/kissy/editor/theme/cool/editor-pkg-min-datauri.css" media="screen" rel="stylesheet" type="text/css" />
  <!--<![endif]-->

  <meta content="authenticity_token" name="csrf-param" />
<meta content="P5dm+2W4AwvUYAOSQdB+863pEjVbWpSKnUhHIScyHyE=" name="csrf-token" />
  <link href="/feeds/posts.rss" rel="alternate" title="RSS" type="application/rss+xml" />
  <link rel="shortcut icon" href="/assets/favicon-dc9f9a71b2b09c76114c5d70a5f79e58.ico" type="image/x-icon" />
  <meta name="application-name" content="UX 体验工作平台"/>
  <meta name="msapplication-tooltip" content="UX 体验工作平台" />
  <meta name="msapplication-task" content="name=文章;action-uri=http://ux.etao.com/posts;icon-uri=/assets/favicon-dc9f9a71b2b09c76114c5d70a5f79e58.ico" />
  <meta name="msapplication-task" content="name=工作;action-uri=http://ux.etao.com/works;icon-uri=/assets/favicon-dc9f9a71b2b09c76114c5d70a5f79e58.ico" />
  <meta name="msapplication-task" content="name=招聘;action-uri=http://ux.etao.com/jobs;icon-uri=/assets/favicon-dc9f9a71b2b09c76114c5d70a5f79e58.ico" />
  <meta name="msapplication-task" content="name=团队;action-uri=http://ux.etao.com/team;icon-uri=/assets/favicon-dc9f9a71b2b09c76114c5d70a5f79e58.ico" />
</head>
<body >
  <div class="page-bg"></div>
  <div id="J_page" class="page ">
    <div id="header">
  <h1 class="ux-logo">
    <a href="/" title="一淘UX" class="dim">
      <span class="iconfont ux-logo-at">&#481;</span>
      <span class="iconfont">&#482;</span>
      <span class="ux-name">
        体验工作平台 <br/>
        <span>ux.etao.com</span>
      </span>
    </a>
  </h1>
  <div class="menu">
    <div class="search-con">
      <div class="search">
        <div class="search-inner">
          <form action="/search">
            <button type="submit" class="search-submit iconfont">&#337;</button>
            <button type="button" class="search-clear iconfont" id="J_sBtnClear">&#223;</button>
            <div class="search-input-box">
              <fieldset tabindex="0">
                <label class="search-label" for="J_searchInput"></label>
                <input id="J_searchInput" class="search-input" accesskey="s" autocomplete="off" type="text" name="q" value="" maxlength="100" data-autofocus="autofocus">
              </fieldset>
            </div>
          </form>
        </div>
      </div>
    </div>
    <ul class="main-nav">
      <li class="current "><a href="/posts">文章</a></li>
      <li class="">
        <a href="/works" class="J_dropdownTrigger" data-login="login">工作</a>
        <div class="J_dropdown hidden user-dropdown">
          <ul>
            <li class="sprite arrow"></li>
            <li><a href="/works/bricks">PC组件库</a></li>
            <li><a href="/works/mobile-components">无线组件库</a></li>
            <li><a href="/works/visual-identification">品牌</a></li>
            <li><a href="/works/interaction-design">交互</a></li>
            <li><a href="/works/user-research">用研</a></li>
            <li><a href="/works/visual-design">视觉</a></li>
          </ul>
        </div>
      </li>
      <li class=" "><a href="/jobs">招聘</a></li>
      <li class=" "><a href="/team">团队</a></li>
    </ul>
    <div class="user-info">
        <div id="J_loginBoxTrigger" class="user-ribbon sprite"><i class="iconfont">&#338</i></div>
        <div id="J_loginBox" class="login-box hidden">
  <div class="login-box-con" style="display:none">
    <!--  已经不使用 -->
    <form accept-charset="UTF-8" action="/user_sessions" class="new_user_session" id="J_loginForm" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="P5dm+2W4AwvUYAOSQdB+863pEjVbWpSKnUhHIScyHyE=" /></div>
      <ul>
        <li class="field"><input class="field-text" data-valid="{email:[true,&quot;邮箱格式有误&quot;]}" id="user_session_email" name="user_session[email]" placeholder="E-mail" size="30" type="text" /></li>
        <li class="field"><input class="field-text" id="user_session_password" name="user_session[password]" placeholder="密码" size="30" type="password" /></li>
        <li class="field clear login-field-last">
          <input name="user_session[remember_me]" type="hidden" value="0" /><input class="field-check" id="user_session_remember_me" name="user_session[remember_me]" type="checkbox" value="1" />
          <label for="user_session_remember_me">记住我</label> &nbsp;
          <input class="login-btn" name="commit" type="submit" value="登录" />
        </li>
      </ul>
</form>  </div>

      <div class="login-methods">
      选择登录方式:
        <ul class="login-lists clear">

          <li>
            <a href="/auth/taobao" class="avatar avatar-60">
              <span class="avatar-mask"></span>
              <span class="login-icons">
                <span class="login-icon"><i class="iconfont">&#440;</i><i class="iconfont iconfont-tao">&#440;</i></span>
              </span>
            </a>
            淘宝账号
          </li>
          <li>
            <a href="/auth/weibo" class="avatar avatar-60">
              <span class="avatar-mask"></span>
              <span class="login-icons">
                <span class="login-icon"><i class="iconfont">&#468;</i><i class="iconfont iconfont-weibo">&#468;</i></span>
              </span>
            </a>
            新浪账号
          </li>
          <li class="last">
            <a href="/login_domain" class="avatar avatar-60">
              <span class="avatar-mask"></span>
              <span class="login-icons">
                <span class="login-icon"><i class="iconfont">&#232;</i><i class="iconfont iconfont-domain">&#232;</i></span>
              </span>
            </a>
            域账号
          </li>
        </ul>

    </div>
</div>
    </div>
  </div>
</div>
    <div id="banner" style="position:relative;">
  <h2 class="title-posts title"><span class="f">文</span><span class="l">章</span></h2>
  <div class="bd"><div class="bd-content" data-editable="false" data-tkey="posts"><p>文章就是博客，这里聊的更多的是和工作无关，可以是你有心得体会，心动感受，新奇创新，让我们交流起来</p></div></div>
</div>


    <div id="wrapper">
        <div id="aside">
  <ul class="channels" id="J_channels">
    <li class="current latest">
      <a href="/posts" class="J_channel" ux-channel="archive">最新</a>
    </li>
      <li class="">
        <a href="/posts/visual-design" class="J_channel" ux-channel="visual-design" ux-count="46">视觉</a>
      </li>
      <li class="">
        <a href="/posts/user-research" class="J_channel" ux-channel="user-research" ux-count="7">用研</a>
      </li>
      <li class="">
        <a href="/posts/interaction-design" class="J_channel" ux-channel="interaction-design" ux-count="24">交互</a>
      </li>
      <li class="">
        <a href="/posts/front-end" class="J_channel" ux-channel="front-end" ux-count="17">前端</a>
      </li>
      <li class="">
        <a href="/posts/team" class="J_channel" ux-channel="team" ux-count="47">团队</a>
      </li>
  </ul>
  <div class="categories" id="J_categories">
    <p class="title-bar">
      <a class="J_all" href="/posts/">所有<em>（<span class="J_count">134</span>）</em></a>
      <a class="toggler J_toggler" href="#">展开类目</a>
    </p>
    <ul ux-channel="archive" class="">
        <li><span class="category-name">2013年</span>
          <ul>
            <li><a href="/posts/2013/09" class="sub-category J_subCategory">2013年09月（1）</a>
            </li>
            <li><a href="/posts/2013/08" class="sub-category J_subCategory">2013年08月（2）</a>
            </li>
            <li><a href="/posts/2013/07" class="sub-category J_subCategory">2013年07月（5）</a>
            </li>
            <li><a href="/posts/2013/06" class="sub-category J_subCategory">2013年06月（3）</a>
            </li>
            <li><a href="/posts/2013/05" class="sub-category J_subCategory">2013年05月（6）</a>
            </li>
            <li><a href="/posts/2013/04" class="sub-category J_subCategory">2013年04月（5）</a>
            </li>
            <li><a href="/posts/2013/03" class="sub-category J_subCategory">2013年03月（9）</a>
            </li>
            <li><a href="/posts/2013/02" class="sub-category J_subCategory">2013年02月（4）</a>
            </li>
            <li><a href="/posts/2013/01" class="sub-category J_subCategory">2013年01月（5）</a>
            </li>
          </ul>
        </li>
        <li><span class="category-name">2012年</span>
          <ul>
            <li><a href="/posts/2012/12" class="sub-category J_subCategory">2012年12月（28）</a>
            </li>
            <li><a href="/posts/2012/11" class="sub-category J_subCategory">2012年11月（13）</a>
            </li>
            <li><a href="/posts/2012/10" class="sub-category J_subCategory">2012年10月（8）</a>
            </li>
            <li><a href="/posts/2012/09" class="sub-category J_subCategory">2012年09月（17）</a>
            </li>
            <li><a href="/posts/2012/08" class="sub-category J_subCategory">2012年08月（3）</a>
            </li>
            <li><a href="/posts/2012/07" class="sub-category J_subCategory">2012年07月（22）</a>
            </li>
            <li><a href="/posts/2012/06" class="sub-category J_subCategory">2012年06月（2）</a>
            </li>
            <li><a href="/posts/2012/05" class="sub-category J_subCategory">2012年05月（1）</a>
            </li>
          </ul>
        </li>
    </ul>
      <ul ux-channel="visual-design" class="hidden">
          <li><span class="category-name">产品展示</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/visual-design/160-chuangxinchanpin" class="sub-category J_subCategory">创新产品</a>
</li>            </ul>
          </li>
          <li><span class="category-name">经验分享</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/visual-design/175-beijingzhishi" class="sub-category J_subCategory">背景知识</a>
</li>                <li>
                  <a href="/posts/visual-design/256-shishangshenghuo" class="sub-category J_subCategory">时尚生活</a>
</li>                <li>
                  <a href="/posts/visual-design/171-gongzuoganxiang" class="sub-category J_subCategory">工作感想</a>
</li>            </ul>
          </li>
      </ul>
      <ul ux-channel="user-research" class="hidden">
          <li><span class="category-name">研究方法</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/user-research/167-shejiyanjiufangfa" class="sub-category J_subCategory">设计研究方法</a>
</li>            </ul>
          </li>
          <li><span class="category-name">工作感想</span>
            <ul class="sub-category-list">
            </ul>
          </li>
          <li><span class="category-name">搜索研究</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/user-research/165-leimuyanjiu" class="sub-category J_subCategory">类目研究</a>
</li>                <li>
                  <a href="/posts/user-research/254-jueceyanjiu" class="sub-category J_subCategory">决策研究</a>
</li>            </ul>
          </li>
          <li><span class="category-name">合作</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/user-research/239-uxneibu" class="sub-category J_subCategory">UX内部</a>
</li>            </ul>
          </li>
      </ul>
      <ul ux-channel="interaction-design" class="hidden">
          <li><span class="category-name">交互设计</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/interaction-design/157-jiaohushejiyuanze" class="sub-category J_subCategory">交互设计原则</a>
</li>                <li>
                  <a href="/posts/interaction-design/158-shejifangfa" class="sub-category J_subCategory">设计方法</a>
</li>                <li>
                  <a href="/posts/interaction-design/255-shejifenxiang" class="sub-category J_subCategory">设计分享</a>
</li>            </ul>
          </li>
          <li><span class="category-name">经验分享</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/interaction-design/197-gongzuoganxiang" class="sub-category J_subCategory">工作感想</a>
</li>            </ul>
          </li>
      </ul>
      <ul ux-channel="front-end" class="hidden">
          <li><span class="category-name">pc</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/front-end/182-qianduanjizhu" class="sub-category J_subCategory">前端技术</a>
</li>                <li>
                  <a href="/posts/front-end/250-gongjujineng" class="sub-category J_subCategory">工具技能</a>
</li>            </ul>
          </li>
          <li><span class="category-name">平台</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/front-end/187-brix" class="sub-category J_subCategory">Brix</a>
</li>                <li>
                  <a href="/posts/front-end/208-chart" class="sub-category J_subCategory">Chart</a>
</li>                <li>
                  <a href="/posts/front-end/240-mix" class="sub-category J_subCategory">Mix</a>
</li>            </ul>
          </li>
          <li><span class="category-name">mobile</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/front-end/191-shejifangan" class="sub-category J_subCategory">设计方案</a>
</li>            </ul>
          </li>
          <li><span class="category-name">淘宝H5</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/front-end/231-kongjian" class="sub-category J_subCategory">控件</a>
</li>                <li>
                  <a href="/posts/front-end/232-zujian" class="sub-category J_subCategory">组件</a>
</li>            </ul>
          </li>
      </ul>
      <ul ux-channel="team" class="hidden">
          <li><span class="category-name">团队活动</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/team/178-guanggao" class="sub-category J_subCategory">广告</a>
</li>                <li>
                  <a href="/posts/team/189-gongyi" class="sub-category J_subCategory">公益</a>
</li>                <li>
                  <a href="/posts/team/241-tuanjian" class="sub-category J_subCategory">团建</a>
</li>            </ul>
          </li>
          <li><span class="category-name">兴趣小组</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/team/180-tangmiaohui" class="sub-category J_subCategory">堂描绘</a>
</li>                <li>
                  <a href="/posts/team/181-shijuexingquxiaozu" class="sub-category J_subCategory">视觉兴趣小组</a>
</li>            </ul>
          </li>
          <li><span class="category-name">业界交流</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/team/252-adc" class="sub-category J_subCategory">ADC</a>
</li>                <li>
                  <a href="/posts/team/253-upd" class="sub-category J_subCategory">UPA</a>
</li>            </ul>
          </li>
          <li><span class="category-name">随笔</span>
            <ul class="sub-category-list">
                <li>
                  <a href="/posts/team/247-gongzuoxinde" class="sub-category J_subCategory">工作心德</a>
</li>                <li>
                  <a href="/posts/team/248-yuedubiji" class="sub-category J_subCategory">阅读笔记</a>
</li>                <li>
                  <a href="/posts/team/249-xinqinggushi" class="sub-category J_subCategory">心情故事</a>
</li>            </ul>
          </li>
      </ul>
  </div>
</div>

      <div id="main">
        <div class="article">
  <div class="article-nav">
  <div class="alpha-bg"></div>
  <div class="bar">
    <a href="/posts/549#main" class="prev sprite">清空当前页面的用户体验</a>
    <span class="current">730/9</span>
    <a href="/posts/613#main" class="next sprite">清空当前页面的用户体验</a>
  </div>
</div>

    <div class="article-hd-wrap">
    <div class="article-hd">
      <span class="article-hd-left"></span>
      <span class="article-hd-right"></span>
      <h3 class="title">
        <span>清空当前页面的用户体验</span>
        <i class="iconfont toggle-toc">&#405;</i>
      </h3>
      <div class="publish-date">2012/12/10</div>
      <div class="authors">
           <a href="/users/594" class="avatar avatar-30" title=""><span class="avatar-mask"></span><img alt="嘘..." src="http://img1.tbcdn.cn/tfscom/T1KqL4XchlXXaCwpjX.png_30x30.jpg" /></a>
      </div>

      
<div class="actions J_bar_actions" data-target="#J_atAside_580">
  <a class="comments" href="#!comments" title="评论"><i class="iconfont">&#343</i>1</a>
  <a class="likes" href="#!likes" title="喜欢"><i class="iconfont">&#362</i>0/1765</a>
  <a href="http://v.t.sina.com.cn/share/share.php?appkey=2059991429&amp;title=%25E6%25B8%2585%25E7%25A9%25BA%25E5%25BD%2593%25E5%2589%258D%25E9%25A1%25B5%25E9%259D%25A2%25E7%259A%2584%25E7%2594%25A8%25E6%2588%25B7%25E4%25BD%2593%25E9%25AA%258C%2520%2523%25E4%25B8%2580%25E6%25B7%2598UX%2523%2520&amp;url=http%3A%2F%2Fux.etao.com%2Fposts%2F580" class="weibo" data-aside="0" target="_blank"><i class="iconfont">&#468</i></a>
</div>

    </div>
  </div>

  <div class="article-bd">
    <div class="article-content">
      <div class="article-content-bd">
        <p><img style="float:none;margin:0px;" alt="" src="http://img1.tbcdn.cn/tfscom/T1q8ZfXctiXXaCwpjX.png" /></p><p>本文为译文，原文地址：（clear current page UX）<a href="http://www.stevesouders.com/blog/2012/12/05/clear-current-page-ux/">http://www.stevesouders.com/blog/2012/12/05/clear-current-page-ux/</a></p><p>&nbsp;</p><p>昨天在<span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;"> </span><a style="margin:0px;padding:0px;border:0px;outline:0px;font-size:12.727272033691406px;vertical-align:baseline;color:#315667;font-family:lucida grande, lucida sans unicode, sans-serif;line-height:18.196969985961914px;white-space:normal;" href="http://www.stevesouders.com/blog/2012/12/03/the-perception-of-speed/">Perception of Speed</a> 一文中我写了关于点击一个连接浏览器如何没有立即清除屏幕，而是清除前“等到下一个页面到来”。这提升了用户体验，用户可以浏览当前页面而不是空等待（看到一个空白的屏幕）。</p><p>&nbsp;</p><p>那么，到底浏览器何时清除屏幕呢？可以选择下你认为最好的答案：</p><p>A.当页面第一个字节到达时</p><p>B.当新页面的body元素渲染时</p><p>C.当<span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;">DOMContentLoaded触发时</span></p><p><span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;">D.当<span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;">window.onload触发时</span></span></p><p><span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;"><span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;"></span></span><span class="read-more"><!--more-->阅读全文</span></p><p><span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;"><span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;">我早就猜到是“A”。事实上，多年来我一直告诉别人当前页面是在文档的第一个字节到达时清除的。当昨天我的同事<span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;"> </span><a style="margin:0px;padding:0px;border:0px;outline:0px;font-size:12.727272033691406px;vertical-align:baseline;color:#315667;font-family:lucida grande, lucida sans unicode, sans-serif;line-height:18.196969985961914px;white-space:normal;" href="http://www.igvita.com/">Ilya Grigorik</a> 想知到底真浏览器何时清除页面时，这个看法改变了。事实证明答案是B，或者略在"B"之前——当新页面的body元素创建时。</span></span></p><p><span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;"><span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;"><br /> </span></span></p><p><span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;"><span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;">测试页面<br /> </span></span></p><p><span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;"><span style="color:#333333;font-family:lucida grande, lucida sans unicode, sans-serif;font-size:12.727272033691406px;">这里有一个测试页面来帮助大家探索这种行为：<br /> </span></span></p><p><span><span><strong><a href="http://stevesouders.com/tests/clear.php">Clear UX test page</a></strong><br /> </span></span></p><p><img alt="" style="float:none;margin:0px;" src="http://img1.tbcdn.cn/tfscom/T1lcAgXoJgXXb1upjX.jpg" /></p><p>这个页面包含里一段10秒才返回的脚本。（你可以改变URL中delay参数来控制延迟时间）。使用脚本的原因是它会阻塞浏览器解析HTML。把这段脚本放到页面的不同位置可以帮助我们隔离的判断屏幕何时被清除。脚本放置的三个位置选择：</p><p>1.head的顶部——script标签放置在head标签后面，title前面。这就当等同于新的文档的“首字节”。</p><p>2.head的底部——script标签放在&lt;/head&gt;前面。当解析head的时候这里有些处理style块的工作。这可以让我们观察body标签创建前的状态。</p><p>3.body的顶部——script标签放在&lt;body&gt;标签后。这可以隔离出body元素创建后的状态。</p><p>背景被定义成随机的，这样可以清楚的判断body被渲染。</p><p>&nbsp;</p><p>测试结果</p><p>我在主要的浏览器中运行了这3个测试，测量清除页面前各自等待的时间。我以为会是0或者10s，但是有些浏览器是在这之间。下面表格中统计出了各浏览器运行这3个测试用例的等待时间。</p><table style="text-align:center;margin-left:5em;margin-bottom:1em;"><tbody><tr><td colspan="4" style="padding-bottom:6px;"><strong>表格 1: 页面被清除前等待的秒时间</strong></td></tr><tr><th style="padding:0 1em 0 1em;"><span style="text-decoration:underline;">浏览器</span></th><th style="padding:0 1em 0 1em;"><span style="text-decoration:underline;">HEAD顶部</span></th><th style="padding:0 1em 0 1em;"><span style="text-decoration:underline;">HEAD底部</span></th><th style="padding:0 1em 0 1em;"><span style="text-decoration:underline;">BODY顶部</span></th></tr><tr><td style="text-align:left;">Chrome 23</td><td>~5</td><td>~5</td><td>0</td></tr><tr><td style="text-align:left;">Firefox 17</td><td>10</td><td>10</td><td>0</td></tr><tr><td style="text-align:left;">IE 6-9</td><td>10</td><td>10</td><td>0</td></tr><tr><td style="text-align:left;">Opera 12</td><td>~4</td><td>~4</td><td>~4</td></tr><tr><td style="text-align:left;">Safari 6</td><td>10</td><td>10</td><td>0</td></tr></tbody></table><p>让我们来分析下每个脚本位置情况下的结果，看看可以发现些什么。</p><p>&nbsp;</p><p>#1：HEAD顶部</p><p>在这个测试中，10秒钟返回的脚本放在head和title之间：</p><pre style="background:#eee;">	&lt;head&gt;
&lt;script src=...
&lt;title&gt;...
</pre><p>尽管html文档已经到达而且已经开始解析，没有一个浏览器在这个时候清除屏幕。所以，浏览器不会在第一个字节到达时清除页面。Firefox，IE，和Safari直到10s过后才清除屏幕，body标签已经被解析了（测试#3可以确认）。Chrome和Opera有非常有趣的行为——它们都在4-5秒之后清除屏幕。</p><p>&nbsp;</p><p>主流浏览器在处理这个情况上有些各自的不同。哪一种更好——在新页面的body ready前保持老的页面，还是在几秒后清除老的页面？立即清除屏幕会给用户一些反馈，告诉用户过程正在进行中，但是也会留给用户一个空白的屏幕。（而且从昨天的假设来看，留下一个空白的屏幕是空闲的时间，这不太令人满意。）</p><p>&nbsp;</p><p>Chrome和Opera会故意清除页面给用户反馈，还是通过其它方式来触发？ILya用chrome做了些深入的研究（<a title="Wait, Chrome DevTools could do THAT?" href="http://www.igvita.com/2012/11/14/wait-chrome-devtools-could-do-that/">deep dive tracing with Chrome</a>），发现屏幕清除会配合GC回收。哪种行为更好并没有明确的答案，但是不同的浏览器在body解析后等待多久再清除屏幕会有差异，这非常有意思。</p><p>&nbsp;</p><p>在这个测试中发现另一个有趣的事是title改变的时间。我惊奇的发现，所有浏览器会立即清除掉老的title，尽管老的页面的内容还没有改变。这就导致标题与页面的不匹配。除一个浏览器外，每个浏览器都用请求的URL替换掉老的title。这种方法有点笨重，因为URL在tab里没有足够的空间显示。Firefox是个例外，会在tab里显示“Connecting...”。这是一个非常有趣的主意，这个“临时”的标题显示了10秒，直到脚本下载完毕。这就说明脚本阻塞了title标签的解析。在下一个测试中可以看到script标签往下移之后title标题立马更新了。</p><p>&nbsp;</p><p>#2：head底部</p><p>在这个测试中，10秒延迟的脚本放在head结束标签前面：</p><pre style="background:#eee;">	&lt;script src=...
&lt;/head&gt;
&lt;body&gt;
</pre><p>这个测试结果跟测试#1的结果是一样的。Firefox，IE，Safari 10秒，Chrome，Opera4-5秒。这个测试的主要点是确认浏览器不会在body标签解析前立即清除掉页面。</p><p>&nbsp;</p><p>新页面的title会立即显示。因为title标签没有像测试#1中那样被脚本下载阻塞。这非常有趣，总之，浏览器解析title标签并更新标题，但是不会清除掉老页面的内容。这比前面的不比配更糟糕。在测试#1中临时的标题显示url或者“Connecting...”。现在新页面的真实标题现在了老页面的内容上面了。</p><p>&nbsp;</p><p>#3：body顶部</p><p>在这个测试中10秒延迟的script标签放在body标签之后：</p><pre style="background:#eee;">	&lt;/head&gt;
&lt;body&gt;
&lt;script src=...
</pre><p>因为没有东西阻塞浏览器解析body标签了，除一个之外，其它浏览器都立即清除老的页面渲染新的body（通过随机的毕竟色来观察）。但是，因为下一个标签是10秒延时的脚本，阻止了页面的渲染，所以用户看到10秒钟的空白页面。Opera的行为不同——它在清除屏幕前保留了4s延迟。这非常的稀奇，它在等待啥？它解析了body标签而且在0时间时就知道新的页面有一个新的背景色，但是它等待了几秒钟才渲染。难道是脚本下载阻塞了渲染？但是脚本还有几秒才下载完，又是什么原因导致它回过头来渲染页面呢？</p><p>&nbsp;</p><p>在这几个测试中，依我的观点，Opera做的最好。其它浏览器留给用户老的页面10秒钟，用户以为发生了什么问题呢（测试#1,#2 firefox，ie和Safari），或者留给用户一个空白页面10s钟当页面被阻塞渲染时（测试#3Chrome，Firefox，IE和Safari）。Opera始终折中让用户在清除页面前看3-4秒钟老的页面，然后剩下的6-7秒才显示空白页面或者新页面的body。</p><p>&nbsp;</p><p>延伸</p><p>这些例子虽然有些认为故意的，但是会有些真实场景的延伸。</p><p>*<strong>浏览器通常在解析body标签后清除页面，而不是在第一个字节到达时</strong>。我说“通常”是因为在测试中可以通过在body前添加异步和内敛的脚本，但是这有点过分讲究。改变几行可能会改变行为，比如我不太确定浏览器会在何时清除掉页面。但是所有这些行为肯定是在页面的第一个字节到达之后。</p><p>*<strong>没有明确的最好的清除页面体验</strong>。主流浏览器有相当不同的行为，而且不确定这些差异是不是有意的。从一个页面切换到另一个页面每天都有数十亿次。我很惊讶，没有更多一致的数据来产生最好的用户体验。</p><p>*<strong>避免前端SPOF(single point of failure)</strong>。我已经写了广泛的内容关于为何加载同步的脚本会在页面中创建单点故障（<a target="_self" href="http://www.stevesouders.com/blog/2010/06/01/frontend-spof/">Frontend SPOF</a>）。这部分新的信息页面何时被清除添加到了slow-loading同步脚本，尤其是浏览器处理的不同方式。不管如何，尽可能的使用异步脚本加载（<a target="_self" href="http://www.stevesouders.com/blog/2009/04/27/loading-scripts-without-blocking/">Loading Scripts Without Blocking</a>）。</p><p>&nbsp;</p>
      </div>
      <div class="article-comment">
  <div class="comment-hd">
    <span class="comment-hd-title"><span class="count" id="J_comment_counts">1</span> 条评论 </span>
    &nbsp; | &nbsp; 账号登录：

    <a href="/login_domain"><i class="iconfont">&#232;</i>域账号</a> &nbsp;  &nbsp;
    <a href="/auth/taobao"><i class="iconfont">&#440;</i>淘宝账号</a>  &nbsp;  &nbsp;
    <a href="/auth/weibo"><i class="iconfont">&#468;</i>新浪微博</a>
    <!-- <a href="#"><i class="iconfont">&#338;</i>小二账号</a>
    <a href="#"><i class="iconfont">&#232;</i>域账号</a> -->

  </div>
  <div class="comment-lists" id="J_comment-lists">
      <div class="comment-ls">
  <span class="avatar avatar-30"><span class="avatar-mask"></span><img alt="宇宙一片小囧" src="http://img03.taobaocdn.com/tps/i3/T1CDaDXlNuXXXXXXXX-100-100.png_30x30.jpg" /></span>
  <div class="msg-box msg-arrow-top">
    <div class="msg-main">
      <div class="msg-head clearfix">
        宇宙一片小囧
        <span class="msg-date">发表于: 2012-12-27 10:06:48</span>
      </div>
      <div class="msg-body">
        我觉得也应该考虑bfcache的问题
      </div>
    </div>
    <span class="msg-arrow msg-skin-arrow"><span></span></span>
  </div>
</div>
  </div>
</div>

    </div>
    <div id="J_atAside_580" class="article-aside J_atAside" pid="580">
      <span class="sprite arrow J_arrow"></span>
      <div class="article-aside-container J_atAside_container" >
        <div class="article-aside-container-sub">
          <div class="attachment-bd hidden J_attachmentsBox">
            <ul>
            </ul>
              <p>木有附件</p>
          </div>
          <div class="comment-bd J_commentsBox">
            loading...
          </div>
          <div class="likes-bd J_likesBox hidden">
            loading...
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


      </div>
      <div class="friendly-link">
    <h2>友情链接</h2>
    <div class="friendly-link-list">
        <div class="banners_edit" data-editable="false" data-tkey="friendly_link_list"><ul>            <li><a href="http://ued.taobao.com/" target="_blank">淘宝UED</a> </li>            <li><a href="http://www.aliued.com/" target="_blank">Alibaba国际站UED</a> </li>            <li><a href="http://china.aliued.com/" target="_blank">Alibaba中文站UED</a> </li>            <li><a href="http://ued.alipay.com/" target="_blank"> 支付宝UED</a> </li>            <li><a href="http://ued.tmall.com/" target="_blank">天猫UED</a> </li></ul><ul> 		 <li><a href="http://www.uisdc.com" target="_blank">优秀网页设计</a> </li><li><a href="http://www.bootcss.com" target="_blank">Bootstrap中文网</a> </li>            <li><a href="http://udc.weibo.com/" target="_blank">微博UDC</a> </li>            <li><a href="http://ued.sogou.com/" target="_blank">搜狗UED</a> </li>            <li><a href="http://mued.sohu.com/" target="_blank">搜狐UED</a> </li>            <li><a href="http://cdc.tencent.com/" target="_blank">腾讯CDC</a> </li></ul><ul>	    	<li><a href="http://ucdchina.com/" target="_blank">CDC大社区</a> </li>            <li><a href="http://www.chinaui.com/">优艾网</a> </li>            <li><a href="http://www.boxui.com/" target="_blank">UI盒子</a> </li>            <li><a href="http://fed.renren.com/" target="_blank">人人网FED</a> </li>               </ul></div>
    </div>
    <div class="abouts">
        <ul>
            <li><a href="/feeds/posts.rss"><i class="iconfont">&#483</i>RSS订阅</a> </li>
            <li><a href="http://weibo.com/etaoux" target="_blank"><i class="iconfont">&#468</i>微博关注</a> </li>
            <li><a href="/"><i class="iconfont">&#349</i>联系我们</a> </li>
        </ul>
    </div>
</div>
<footer class="footer">
<p>&copy;一淘UX, All rights reserved.</p>
<p>转载内容版权归作者及来源网站所有，本站原创内容转载请注明来源，商业媒体及纸媒请先联系：sangxing#taobao.com</p>
</footer>

    </div>
  </div>
    <script src="http://a.tbcdn.cn/??s/kissy/1.2.0/kissy-min.js" type="text/javascript"></script>
  <script src="/assets/site/work-701566a69df18c2ad56977fd49ed3c40.js" type="text/javascript"></script>

  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27817535-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
