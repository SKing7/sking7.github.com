
        <!doctype html>
        <html>
        <head>
            <meta charset="utf-8"/>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title>#NodeJS : A quick optimization advice</title>
            <link rel="stylesheet" href="../css/article.css" />;
        </head>
        <body>
            <div class="m-content">
                <h1>#NodeJS : A quick optimization advice</h1>
                <div class="section-content"><div class="section-inner layoutSingleColumn"><figure name="5cdc" id="5cdc" class="graf--figure graf--first"><div class="aspectRatioPlaceholder is-locked"><img class="graf-image" data-image-id="1*hDPuAN6PLjuYLK1BOceBkA.jpeg" data-width="5616" data-height="3744" data-action="zoom" data-action-value="1*hDPuAN6PLjuYLK1BOceBkA.jpeg" src="https://cdn-images-1.medium.com/max/800/1*hDPuAN6PLjuYLK1BOceBkA.jpeg"></div></figure><h3 name="2545" id="2545" class="graf--h3 graf-after--figure">#NodeJS&nbsp;: A quick optimization advice</h3><p name="2231" id="2231" class="graf--p graf-after--h3">Can you spot the difference between these two files&nbsp;:</p><figure name="1b30" id="1b30" class="graf--figure graf--iframe graf-after--p"></figure><figure name="97a7" id="97a7" class="graf--figure graf--iframe graf-after--figure"></figure><p name="b14a" id="b14a" class="graf--p graf-after--figure">that can explain a 50% performance gain&nbsp;:</p><figure name="adfe" id="adfe" class="graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked"><img class="graf-image" data-image-id="1*ChsE-NhZBpnhZR0MwEXtgw.png" data-width="504" data-height="76" src="https://cdn-images-1.medium.com/max/800/1*ChsE-NhZBpnhZR0MwEXtgw.png"></div></figure><p name="3b82" id="3b82" class="graf--p graf-after--figure">If you don’t, it’s normal, you try to read the code abstracting the comment&nbsp;; it was slightly changed&nbsp;:</p><figure name="ef01" id="ef01" class="graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked"><img class="graf-image" data-image-id="1*1SdiNDRyhwh2cKcZBDzEJA.png" data-width="873" data-height="149" data-action="zoom" data-action-value="1*1SdiNDRyhwh2cKcZBDzEJA.png" src="https://cdn-images-1.medium.com/max/800/1*1SdiNDRyhwh2cKcZBDzEJA.png"></div></figure><h3 name="0204" id="0204" class="graf--h3 graf-after--figure">What the&nbsp;???</h3><p name="fb3e" id="fb3e" class="graf--p graf-after--h3">The small changes made the function body of <em class="markup--em markup--p-em">add()</em> growing over 600 character. v8 optimizer (<a href="http://jayconrod.com/posts/54/a-tour-of-v8-crankshaft-the-optimizing-compiler" data-href="http://jayconrod.com/posts/54/a-tour-of-v8-crankshaft-the-optimizing-compiler" class="markup--anchor markup--p-anchor" rel="nofollow">crankshaft</a>) <a href="https://en.wikipedia.org/wiki/Inline_expansion" data-href="https://en.wikipedia.org/wiki/Inline_expansion" class="markup--anchor markup--p-anchor" rel="nofollow">inlines </a>the functions whose body length, including the comments, is less than 600 characters.</p><p name="cd93" id="cd93" class="graf--p graf-after--p">The 600 character limit can be tweaked via the <em class="markup--em markup--p-em">max-inlined-source-size</em> of the node command&nbsp;:</p><figure name="ba35" id="ba35" class="graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked"><img class="graf-image" data-image-id="1*YI9hSksfkonTciB8ghWKBA.png" data-width="741" data-height="72" data-action="zoom" data-action-value="1*YI9hSksfkonTciB8ghWKBA.png" src="https://cdn-images-1.medium.com/max/800/1*YI9hSksfkonTciB8ghWKBA.png"></div></figure></div></div>
            </div>
            <script>var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34802167-1']); _gaq.push(['_setDomainName', 'liuzhe.co']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })();</script>
        </body>
        </html>