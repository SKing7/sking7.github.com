
<!DOCTYPE html>
<html lang="en-US">


<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>Concurrency in JavaScript | TypedArray.org</title>

<link rel="stylesheet" type="text/css" media="all" href="http://typedarray.org/wp-content/themes/thumb/style.css" />
<link rel="pingback" href="http://typedarray.org/xmlrpc.php" />
	<link rel="icon" type="image/png" href="http://typedarray.org/wp-content/uploads/2013/06/favicon-1.ico">

<link rel="alternate" type="application/rss+xml" title="TypedArray.org &raquo; Feed" href="http://typedarray.org/feed/" />
<link rel="alternate" type="application/rss+xml" title="TypedArray.org &raquo; Comments Feed" href="http://typedarray.org/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="TypedArray.org &raquo; Concurrency in JavaScript Comments Feed" href="http://typedarray.org/concurrency-in-javascript/feed/" />
<link rel='stylesheet' id='crayon-css'  href='http://typedarray.org/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=2.3.0' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='http://typedarray.org/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css?ver=2.3.0' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='http://typedarray.org/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=2.3.0' type='text/css' media='all' />
<link rel='stylesheet' id='shortcodes-style-css'  href='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/css/shortcodes.css?ver=3.5.2' type='text/css' media='all' />
<link rel='stylesheet' id='fancybox-style-css'  href='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/css/fancybox.css?ver=3.5.2' type='text/css' media='all' />
<link rel='stylesheet' id='open-sans-css'  href='http://fonts.googleapis.com/css?family=Open+Sans%3A300italic%2C400italic%2C800italic%2C400%2C300%2C800&#038;ver=3.5.2' type='text/css' media='all' />
<link rel='stylesheet' id='mpcth-flexslider-css-css'  href='http://typedarray.org/wp-content/themes/thumb/../../plugins/js_composer/assets/flexslider/flexslider.css?ver=3.5.2' type='text/css' media='all' />
<link rel='stylesheet' id='tablepress-default-css'  href='http://typedarray.org/wp-content/plugins/tablepress/css/default.min.css?ver=0.9-RC' type='text/css' media='all' />
<link rel='stylesheet' id='really_simple_share_style-css'  href='http://typedarray.org/wp-content/plugins/really-simple-facebook-twitter-share-buttons/style.css?ver=3.5.2' type='text/css' media='all' />
<script type='text/javascript' src='https://platform.twitter.com/widgets.js?ver=3.5.2'></script>
<script type='text/javascript' src='http://typedarray.org/wp-includes/js/jquery/jquery.js?ver=1.8.3'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.3.0","is_admin":"0","ajaxurl":"http:\/\/typedarray.org\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='http://typedarray.org/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=2.3.0'></script>
<script type='text/javascript' src='http://typedarray.org/wp-includes/js/comment-reply.min.js?ver=3.5.2'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/html5.js?ver=3.5.2'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/mpcth-functions.js?ver=1.0'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/mpcth-theme.js?ver=1.0'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/mpcth-shortcodes.js?ver=1.0'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/jquery.easing.min.js?ver=1.3'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/jquery.fancybox.js?ver=1.3.4'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/jquery.validate.min.js?ver=1.8.1'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/../../plugins/js_composer/assets/flexslider/jquery.flexslider-min.js?ver=1.0'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/spin.min.js?ver=3.5.2'></script>
<script type='text/javascript' src='http://widgets.twimg.com/j/2/widget.js?ver=3.5.2'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/jquery.oembed.js?ver=3.5.2'></script>
<script type='text/javascript' src='http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/massive-panel/js/cufon.js?ver=3.5.2'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://typedarray.org/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://typedarray.org/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Adobe Scout: Profiling Taken to the Next Level &#8211; Session video' href='http://typedarray.org/adobe-scout-profiling-taken-to-the-next-level-session-video/' />
<link rel='next' title='From microphone to .WAV with: getUserMedia and Web Audio' href='http://typedarray.org/from-microphone-to-wav-with-getusermedia-and-web-audio/' />
<meta name="generator" content="WordPress 3.5.2" />
<link rel='canonical' href='http://typedarray.org/concurrency-in-javascript/' />
<link rel='shortlink' href='http://typedarray.org/?p=69' />
<script type="text/javascript">
		  window.___gcfg = {lang: "en"};
		  (function() {
		    var po = document.createElement("script"); po.type = "text/javascript"; po.async = true;
		    po.src = "https://apis.google.com/js/plusone.js";
		    var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(po, s);
		  })();
		</script>
<!--[if lte IE 10]>
	<link rel="stylesheet" href="http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/css/ie.css"/>
<![endif]-->

<!--[if lt IE 9]>
	<script src="http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/js/html5.js" type="text/javascript"></script>
	<link rel="stylesheet" href="http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/css/ie8.css"/>
<![endif]-->





<style type="text/css">
	
/* ---------------------------------------------------------------- */
/*	FONTS
/* ---------------------------------------------------------------- */

	/* Menu Font */
	#mpcth_page_wrap #mpcth_nav #mpcth_menu {
			}

	/* Heading Font */
	#mpcth_page_wrap h1, #mpcth_page_wrap h2, #mpcth_page_wrap h3, #mpcth_page_wrap h4, #mpcth_page_wrap h5, #mpcth_page_wrap h6 {
			}

	/* Content Font */
	#mpcth_page_wrap {
			}

	/* Small Font */
	#mpcth_page_wrap small {
			}

	/* Content */
	#mpcth_page_wrap {
		font-size: 16px;
	}

	/* Menu */
	#mpcth_page_wrap #mpcth_nav #mpcth_menu .menu-item a {
		font-size: 16px;
	}

	/* Category Filter */
	#mpcth_page_wrap .mpcth-filterable-categories a {
		font-size: 16px;
	}

	/* Read More */
	#mpcth_page_wrap .mpcth-portfolio-read-more,
	#mpcth_page_wrap .mpcth-blog-read-more {
		font-size: 16px;
	}

	/* Form Text */
	#mpcth_page_wrap #mpcth_contact_form input,
	#mpcth_page_wrap #comments #respond #commentform input,
	#mpcth_page_wrap #mpcth_contact_form textarea,
	#mpcth_page_wrap #comments #respond #commentform .comment-form-comment textarea {
		font-size: 16px;
	}

	/* Form Button */
	#mpcth_page_wrap #mpcth_contact_form #submit,
	#mpcth_page_wrap #commentform #submit {
			}

	/* Footer */
	#mpcth_page_wrap #mpcth_footer #mpcth_footer_content,
	#mpcth_page_wrap #mpcth_footer #mpcth_bottom_footer {
		font-size: 16px;
	}

	/* Footer Heading */
	#mpcth_page_wrap #mpcth_footer #mpcth_footer_content ul > li .widget_title {
		font-size: 24px;
	}

	/* Sidebar */
	#mpcth_page_wrap #mpcth_sidebar ul > li {
		font-size: 14px;
	}

	/* Sidebar Heading  */
	#mpcth_page_wrap #mpcth_sidebar li .widget_title {
		font-size: 24px;
	}

	/* Small Font Size */
	#mpcth_page_wrap #mpcth_contact_form .form-allowed-tags,
	#mpcth_page_wrap #commentform .form-allowed-tags,
	#mpcth_page_wrap #mpcth_contact_form label.error,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform label.error,
	#mpcth_page_wrap #commentform label.error,
	#mpcth_page_wrap #comments header.vcard,
	#mpcth_page_wrap small,
	#mpcth_page_wrap meta {
		font-size: 14px;
	}

	/* Headings */
	#mpcth_page_wrap h1 {
		font-size: 32px;
	}

	#mpcth_page_wrap h2 {
		font-size: 30px;
	}

	#mpcth_page_wrap h3 {
		font-size: 28px;
	}

	#mpcth_page_wrap h4 {
		font-size: 25px;
	}

	#mpcth_page_wrap h5 {
		font-size: 22px;
	}

	#mpcth_page_wrap h6 {
		font-size: 18px;
	}

/* ---------------------------------------------------------------- */
/*	COLORS
/* ---------------------------------------------------------------- */

	/* Global */
	#mpcth_page_wrap h1, #mpcth_page_wrap h2, #mpcth_page_wrap h3, #mpcth_page_wrap h4, #mpcth_page_wrap h5, #mpcth_page_wrap h6,
	#mpcth_page_wrap h1 a, #mpcth_page_wrap h2 a, #mpcth_page_wrap h3 a, #mpcth_page_wrap h4 a, #mpcth_page_wrap h5 a, #mpcth_page_wrap h6 a {
		color: #565656;
	}
	#mpcth_page_wrap {
		color: #676767;
	}
	#mpcth_page_wrap a {
		color: #42B7AB;
	}
	#mpcth_page_wrap a:hover {
		color: #676767;
	}
	
	#mpcth_page_wrap a.mpcth-alt-link {
		color: #676767;
	}

	#mpcth_page_wrap a.mpcth-alt-link:hover {
		color: #42B7AB;
	}

	#mpcth_page_wrap h1 a:hover, #mpcth_page_wrap h2 a:hover, #mpcth_page_wrap h3 a:hover, #mpcth_page_wrap h4 a:hover, #mpcth_page_wrap h5 a:hover, #mpcth_page_wrap h6 a:hover {
		color: #42B7AB;
	}

	/* Backgrounds */
	/*#mpcth_page_header_wrap {
			}*/
	body {
		background-image: url('http://typedarray.org/wp-content/themes/thumb/mpc-wp-boilerplate/images/');		background-color: #FFFFFF;
	}
	#mpcth_footer {
		background: #F5F5F5;
	}
	#mpcth_sidebar {
		background: #F5F5F5;
	}
	#mpcth_page_articles {
		background: #FFFFFF;
	}
	#mpcth_menu {
			}
	#mpcth_menu > ul {
			}

	#mpcth_page_articles .post .mpcth-post-thumbnail,
	#mpcth_page_articles .post {
		background: #F5F5F5;
	}
	#mpcth_top_widget_area {
			}

	/* Main Menu */
	#mpcth_nav #mpcth_menu .menu-item a {
		color: #676767;
		background: ;
	}
	#mpcth_nav #mpcth_menu .menu-item .sub-menu a {
		color: #676767;
		background: #EEEEEE;
	}
	#mpcth_nav #mpcth_menu .menu-item.current-menu-item a,
	#mpcth_nav #mpcth_menu .menu-item.current-menu-ancestor > a {
		color: #42B7AB;
			}
	#mpcth_nav #mpcth_menu .menu-item .sub-menu .current-menu-item a {
		color: #42B7AB;
		background: #EEEEEE;
	}
	#mpcth_nav #mpcth_menu .menu-item a:hover,
	#mpcth_nav #mpcth_menu .menu-item.current-menu-item a:hover,
	#mpcth_nav #mpcth_menu .menu-item.current-menu-ancestor a:hover {
		color: #42B7AB;
		background: ;
	}
	#mpcth_nav #mpcth_menu .menu-item .sub-menu a:hover,
	#mpcth_nav #mpcth_menu .menu-item .sub-menu .current-menu-item a:hover {
		color: #42B7AB;
		background: #EEEEEE;
	}

	#mpcth_nav #mpcth_menu ul.sub-menu li.first-item {
		border-color: #42B7AB;
	}

	/* Top Menu */
	#mpcth_page_header_content #mpcth_secondary_nav #mpcth_secondary_menu .menu-item a {
					}
	#mpcth_page_header_content #mpcth_secondary_nav #mpcth_secondary_menu .menu-item a:hover,
	#mpcth_page_header_content #mpcth_secondary_nav #mpcth_secondary_menu .menu-item.current-menu-item a:hover {
					}
	#mpcth_page_header_content #mpcth_secondary_nav #mpcth_secondary_menu .menu-item.current-menu-item a {
					}
	#mpcth_page_header_content #mpcth_secondary_nav {
			}

	/* Comment Form */
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-url input,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-email input,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-author input,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-comment textarea {
		color: #515151;
		background: #E7E7E7;
			}

	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-url input:hover,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-email input:hover,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-author input:hover,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-comment textarea:hover {
		color: #515151;
		background: #DDDDDD;
			}

	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-url input:focus,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-email input:focus,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-author input:focus,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-comment textarea:focus {
		color: #515151;
		background: #DDDDDD;
			}
	
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-url input.error,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-email input.error,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-author input.error,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .comment-form-comment textarea.error {
		color: #FFFFFF;
		background: #FF6469;
			}

	#mpcth_page_articles #comments .commentlist article.comment .comment-edit-link,
	#mpcth_page_articles #comments .commentlist article.comment header.comment-meta span {
		color: #FFFFFF;
		background: #42B7AB;
	}

	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform label.error {
		color: #FF6469;
	}

	/* Contact Form */
	#mpcth_contact_form .mpcth-cf-form-url input,
	#mpcth_contact_form .mpcth-cf-form-email input,
	#mpcth_contact_form .mpcth-cf-form-author input,
	#mpcth_contact_form .mpcth-cf-form-message textarea {
		color: #515151;
		background: #E7E7E7;
			}

	#mpcth_contact_form .mpcth-cf-form-url input:hover,
	#mpcth_contact_form .mpcth-cf-form-email input:hover,
	#mpcth_contact_form .mpcth-cf-form-author input:hover,
	#mpcth_contact_form .mpcth-cf-form-message textarea:hover {
		color: #515151;
		background: #E7E7E7;
			}
	
	#mpcth_contact_form .mpcth-cf-form-url input:focus,
	#mpcth_contact_form .mpcth-cf-form-email input:focus,
	#mpcth_contact_form .mpcth-cf-form-author input:focus,
	#mpcth_contact_form .mpcth-cf-form-message textarea:focus {
		color: #515151;
		background: #E7E7E7;
			}

	#mpcth_contact_form .mpcth-cf-form-author input.error,
	#mpcth_contact_form .mpcth-cf-form-email input.error,
	#mpcth_contact_form .mpcth-cf-form-message textarea.error {
		color: #FFFFFF;
		background: #FF6469;
			}

	#mpcth_contact_form p.mpcth-cf-response.error,
	#mpcth_contact_form label.error {
		color: #FF6469;
	}

	#mpcth_contact_form .success {
		color: #679D43;
	}

	/* Logo */
	#mpcth_page_wrap #mpcth_logo {
		margin-top: 0px;
		margin-right: 0px;
		margin-bottom: 0px;
		margin-left: 0px;
	}
	#mpcth_page_wrap #mpcth_logo h1 {
		color: #FFFFFF;
		background: #42B7AB;
	}
	#mpcth_page_wrap #mpcth_logo small {
		color: #AAAAAA;
			}

	/* Submit Button */
	#mpcth_page_wrap #mpcth_contact_form #submit,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .form-submit #submit {
		color: #FFFFFF;
		background: #42B7AB;
			}

	#mpcth_page_wrap #mpcth_contact_form #submit:hover,
	#mpcth_page_wrap #mpcth_page_articles #comments #respond #commentform .form-submit #submit:hover {
		color: #F5F5F5;
		background: #48a59a;
			}

	/* Blog & Portfolio */
	#mpcth_page_wrap article.post small,
	#mpcth_page_wrap #comments header.vcard {
		color: #AAAAAA;
	}

	#mpcth_page_wrap article.post small a,
	#mpcth_page_wrap #comments header.vcard a {
		color: #42B7AB;
	}


	#mpcth_page_wrap article.post small a:hover,
	#mpcth_page_wrap #comments header.vcard a:hover {
		color: #676767;
	}

	#mpcth_page_wrap article.post .mpcth-portfolio-read-more,
	#mpcth_page_wrap article.post .mpcth-blog-read-more {
		color: #FFFFFF;
		background: #42B7AB;
	}

	#mpcth_page_wrap article.post .mpcth-portfolio-read-more:hover,
	#mpcth_page_wrap article.post .mpcth-blog-read-more:hover {
		color: #FFFFFF;
		background: #3DABA0;
	}

	#mpcth_page_wrap .mpcth-lm-button {
			}

	#mpcth_page_wrap .mpcth-lm-button:hover {
			}

	#mpcth_page_wrap article.post a.mpcth-fancybox {
		color: #FFFFFF;
	}

	#mpcth_page_wrap article.post a.mpcth-fancybox:hover {
		color: #F5F5F5;
	
	}

	#mpcth_page_content .mpcth-filterable-categories ul li {
			}	

	#mpcth_page_content .mpcth-filterable-categories ul li a {
			}

	#mpcth_page_content .mpcth-filterable-categories ul li:hover {
			}

	#mpcth_page_content .mpcth-filterable-categories ul li:hover a {
			}

	#mpcth_page_wrap #mpcth_page_articles .mpcth-post-ribbon {
		background: #42B7AB;
	}

	#mpcth_page_wrap #mpcth_page_articles .zilla-likes:after {
		color: #AAAAAA;
	}

	#mpcth_page_wrap #mpcth_page_articles .zilla-likes.active:after, 
	#mpcth_page_wrap #mpcth_page_articles .zilla-likes:hover:after {
		color: #42B7AB;
	}



	/* Other */
	#mpcth_page_wrap hr {
		background-color: #E9E9E9;
	}

	#mpcth_page_wrap #mpcth_sidebar ul.parent_menu_item > li .widget_title {
		color: #565656;
	}

	#mpcth_page_wrap #mpcth_sidebar ul.parent_menu_item > li,
	#mpcth_page_wrap #mpcth_sidebar ul.parent_menu_item > li a {
		color: #676767;
	
	}

	#mpcth_page_wrap #mpcth_sidebar ul.parent_menu_item > li a {
		color: #676767;
	
	}

	#mpcth_page_wrap #mpcth_sidebar ul.parent_menu_item > li a:hover {
		color: #42B7AB;
	
	}


	#mpcth_page_wrap #mpcth_page_articles .flexslider ol.flex-control-nav li a.flex-active, 
	#mpcth_page_wrap #mpcth_page_articles .flexslider ol.flex-control-nav li a:hover {
		background: #42B7AB;
	}

	#mpcth_page_articles .flexslider .flex-direction-nav a.flex-next:after {
		border-left-color: #42B7AB;
	}

	#mpcth_page_articles .flexslider .flex-direction-nav a.flex-prev:after {
		border-right-color: #42B7AB;
	}

	#mpcth_page_wrap #mpcth_footer > #mpcth_footer_content > ul > li .widget_title {
		color: #565656;
	}

	#mpcth_page_wrap #mpcth_footer > #mpcth_footer_content > ul > li
	#mpcth_page_wrap #mpcth_footer > #mpcth_footer_content > ul > li a {
		color: #676767;
	
	}

	#mpcth_page_wrap #mpcth_footer > #mpcth_footer_content > ul > li a:hover {
		color: #676767;
	
	}

	#mpcth_page_wrap .mpcth-social-bg {
			}

	#mpcth_page_wrap a.mpcth-alt-link {
		color: #676767;
	
	}

	#mpcth_page_wrap #mpcth_page_header_content #mpcth_logo small:after {
		background-color: #EEEEEE;
	}

	#mpcth_page_wrap .mpcth-fb-overlay {
		background-color: #42B7AB;
	}

	/* Shortcodes */

	#mpcth_page_wrap .wpb_content_element .ui-tabs .ui-tabs-nav li, 
	#mpcth_page_wrap .wpb_call_to_action, 
	#mpcth_page_wrap .wpb_content_element .ui-accordion .ui-accordion-header {
		background-color: #E9E9E9;
	}

	#mpcth_page_wrap .wpb_content_element .ui-tabs .ui-tabs-nav li:hover,
	#mpcth_page_wrap .wpb_call_to_action:hover,
	#mpcth_page_wrap .wpb_content_element .ui-accordion .ui-accordion-header:hover {
		background-color: #F0F0F0;
	}

	#mpcth_page_wrap .wpb_separator,
	#mpcth_page_wrap .vc_text_separator {
		border-color: #E9E9E9;
	}

	#mpcth_page_wrap .vc_text_separator div {
		background-color: #42B7AB;
		color: #ffffff;
	}

</style>
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<style type="text/css" id="syntaxhighlighteranchor"></style>

</head>
<body class="single single-post postid-69 single-format-standard wpb-js-composer js-comp-ver-3.5.4 vc_responsive">
	<div id="mpcth_page_wrap" class="mpcth-layout-fluid mpcth-reponsive">
		<header id="mpcth_page_header_wrap">
			<div id="mpcth_page_header_content">
				<div id="mpcth_top_dropdown"><ul></ul><div class="mpcth-clear-fix"></div></div><a id="mpcth_logo" href="http://typedarray.org"><h1>TypedArray.org</h1><small>JavaScript for interactive developers</small></a><nav id="mpcth_nav" class="mpcth-visible-desktop"><ul id="nav"><li class="page_item page-item-2"><a href="http://typedarray.org/about/">About</a></li>
</ul><a class="mpcth-header-search mpcth-sc-icon-search mpcth-alt-link"></a></nav><!-- end #mpcth_nav --> <!-- end menu --> 

				 
<form method="get" id="searchform" action="http://typedarray.org/">
	<input type="text" class="field mpcth-search" name="s" id="s" value="Type something and hit enter" onfocus="if(this.value=='Type something and hit enter')this.value='';" onblur="if(this.value=='')this.value='Type something and hit enter';"/>
	<input type="submit" class="submit" name="submit" id="searchsubmit" value="Search"/>
</form>
				<div class="mpcth-clear-fix"></div>
			</div> <!-- end #mpcth_page_header_content -->
		</header><!-- end #mpcth_page_header_wrap -->
<div id="mpcth_page_container" class="mpcth-sidebar-none single-post">
		
		<!-- Display menu on the side and logo (if set in settings ) -->
		
<!-- Menu on the side of a page -->
<!-- End Menu on the side -->

		<div id="mpcth_page_content">
				<div id="mpcth_page_articles" class="mpcth-single-post mpcth-sidebar-open">
												

					<article id="post-69"  class="post-69 post type-post status-publish format-standard hentry category-javascript tag-asynchronous tag-concurrency tag-threading tag-workers blog-post" >
															<div class="mpcth-post-thumbnail">
										<img width="800" height="534" src="http://typedarray.org/wp-content/uploads/2013/06/parallel-lines.jpg" class="attachment-post-thumbnail wp-post-image" alt="Parallel" />																			</div>
									<div class="mpcth-post-content">
																											<header>
											<h2 class="mpcth-post-title"><a href="http://typedarray.org/concurrency-in-javascript/" title="Concurrency in JavaScript">
												Concurrency in JavaScript											</a></h2>
										</header>
																										<p style="text-align: justify;">Just like with Flash, JavaScript code runs by default on the UI thread, and any expensive computation will usually affect the UI responsiveness. As you may know, at 60 fps, you have around 16ms (1000ms/60) per frame to do what you have to do (computations, rendering and other misc logic). If you exceed that budget, you will alter the frame rate and potentially make your content feel sluggish or worse, unresponsive.</p>
<div id="attachment_70" class="wp-caption alignleft" style="width: 293px"><img class="wp-image-70 " alt="Frame budget" src="http://typedarray.org/wp-content/uploads/2013/06/budget-frame-med.jpg" width="283" height="262" /><p class="wp-caption-text">Frame budget</p></div>
<p style="text-align: justify;">Web Workers are now broadly available in most browsers even on mobile <a title="Web Workers support" href="http://caniuse.com/#search=web%20workers" target="_blank">(caniuse.com stats for Web Workers)</a> and give you the power of concurrency from within JavaScript. It will allow you to move expensive computations to other threads, to permit best responsive programming, and ideally open the doors in the future to true parallelization in JavaScript. Let&#8217;s have a look at the reasons why you may be interested into leveraging Web Workers.</p>
<ul>
<li><span style="line-height: 1.5em;"><em>Responsive programming</em>: When you have an expensive computation and don&#8217;t want to block the UI.</span></li>
<li><em>Parallel programming</em>: When you want to leverage multiple CPU cores by having computations running concurrently to solve a specific task.</li>
</ul>
<p style="text-align: justify;">We will see later on that parallel programming with Web Workers can be challenging, and that they are not really designed for that today unfortunately. But before we dive into the details of responsive programming and parallel programming, let&#8217;s start with some more details about Web Workers. Note that we will cover here dedicated Web Workers, not the shared Web Workers.</p>
<p style="text-align: justify;"><span id="more-69"></span></p>
<h5><span style="line-height: 1.5em;">Workers and threads</span></h5>
<p style="text-align: justify;">A very common question around Web Workers is how they compare to low-level threads available in other languages like C++, Java or C#.</p>
<p style="text-align: justify;">First off, Web Workers are way more high-level and heavier than threads, when newing a Web Worker, you are actually instantiating a new JS VM. As a result, instantiating a Web Worker does indeed create another low-level thread behind the scenes to power the VM that runs your code, but you never work with it directly. Therefore, it is important to remember that the cost of a single Worker in memory is pretty high, and same for its instantiation time. Based on that, you can imagine that instantiating many workers on a mobile browser is usually not an option, in fact, most browsers have a limitation in the number of workers that can be allocated for that reason.</p>
<p style="text-align: justify;">Another major difference with threads is how data passing works, where nothing is shared. As we will see later with Web Workers, data is passed by default through <strong>message cloning</strong>, in other words, any data passed is cloned. Given the overhead of cloning for large objects, you can also <strong>transfer ownership</strong> when needed. That allows you to pass the reference of your object to another Web Worker, without cloning it, you just lose its reference from where you sent it. It is a pretty elegant approach and very simple to use and works well with the responsive use cases.</p>
<h5>Workers and cores</h5>
<p style="text-align: justify;">On a multi-core environment, multiple threads can truly run concurrently if distributed over multiple cores. On a single core system, the CPU performs what is called context switching betweens the threads. It happens so fast that you cannot actually tell the threads are not running concurrently but they truly aren&#8217;t. This leads to another common question: can I leverage multi-core architectures with Web Workers ? In other words, can I choose specifically which core to leverage?</p>
<p style="text-align: justify;">That is not in your control, the OS will decide if the thread utilized by the instantiated VM is spawn on another core or not. It is also not possible to query the number of cores available, even if libraries have emerged to guess that, but you ideally want to stay out of this and let the OS balance things best for you.<span style="color: #676767; font-size: 16px; line-height: 1.5em;"><br />
</span></p>
<h5>Life as a worker</h5>
<p style="text-align: justify;">You can use all of the JavaScript features inside a Worker, but the amount of browser APIs available is limited. The main restriction is that there is no way to display anything inside from a Worker, simply because there is no DOM available, which lives on the UI thread. Imaging making the DOM thread safe, that would be pretty tricky across workers. Hence why if you try to access the document object from within a worker, you will get the following runtime exception:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5248e5f2aed3c981868939" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
Uncaught ReferenceError: document is not defined</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5248e5f2aed3c981868939-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5248e5f2aed3c981868939-1"><span class="crayon-e">Uncaught </span><span class="crayon-i">ReferenceError</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">document </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-i">defined</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p></p>
<p style="text-align: justify;">At this point, an error event will be dispatched by the worker, that can be listened to. As a result, it is impossible to render anything on screen from a Web Worker. To achieve this, you will have to send the object back to the main (UI) thread for display. A very classic scenario is anything related to image processing. Given how expensive image processing can be, it is very tempting to offload the expensive code to a Web Worker. In the initial Web Workers specification, it was not possible to pass an <a title="ImageData (canvas)" href="https://developer.mozilla.org/en-US/docs/Web/API/ImageData" target="_blank">ImageData</a> object between Web Workers, you had to pass an array of pixel colors. Recently, the specification got updated to allow message passing of ImageData objects, which is quite nice, given that many use cases rely on image/bitmap manipulation.</p>
<p style="text-align: justify;">Another important use case is resource loading. You may want to load a remote resource from a worker, and that is possible through the XMLHttpRequest object. That is very useful if you want to do some expensive parsing of a resource that you are loading within a game, like parsing an object model, or more simply logging to a server some analytics you have been cooking within a background worker. You can find <a title="Functions available from within Web Workers" href="https://developer.mozilla.org/en-US/docs/DOM/Worker/Functions_available_to_workers" target="_blank">here</a> more details about the functions available from within Web Workers.</p>
<p style="text-align: justify;">Another thing you may try is to use the console to log things from within a worker, this is also not supported, but you can build a wrapper on top of the postMessage API that we will cover in a few minutes. David Flanagan has posted one <a title="WorkerConsole" href="https://github.com/davidflanagan/WorkerConsole/" target="_blank">there</a> which works well. In addition, you can also use the Chrome Dev Tools which offer you a way to debug Web Workers.</p>
<h5>Instantiating a Worker</h5>
<p style="text-align: justify;">To instantiate a worker, two approaches are available. The first one requires you to point to the JavaScript code needed to run in the background:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5248e5f2aed95331950516" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var worker = new Worker("background.js");</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5248e5f2aed95331950516-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5248e5f2aed95331950516-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">worker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-sy">(</span><span class="crayon-s">"background.js"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0014 seconds] -->
<p></p>
<p style="text-align: justify;">When the script logic is passed to the Worker object, the code is immediately ran. Simple and easy. The limitation here is that it relies on a separate file, you may be in a situation where you need to reduce as much as possible the file dependencies. Another technique allows you to remove such a dependency and create the worker logic through the createObjectURL API and a <em>Blob</em> object:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5248e5f2aeda1349641010" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// worker logic
var blob = new Blob(["self.addEventListener('message', messageReceived);function messageReceived(e) {self.postMessage('Doing pretty good here!');}"], {type: 'text/javascript'});

// webkit handling
var URL = window.URL || window.webkitURL;

// create the virtual file
var code = URL.createObjectURL(blob);

// create the worker
var worker = new Worker(code);</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5248e5f2aeda1349641010-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeda1349641010-2">2</div><div class="crayon-num" data-line="crayon-5248e5f2aeda1349641010-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeda1349641010-4">4</div><div class="crayon-num" data-line="crayon-5248e5f2aeda1349641010-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeda1349641010-6">6</div><div class="crayon-num" data-line="crayon-5248e5f2aeda1349641010-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeda1349641010-8">8</div><div class="crayon-num" data-line="crayon-5248e5f2aeda1349641010-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeda1349641010-10">10</div><div class="crayon-num" data-line="crayon-5248e5f2aeda1349641010-11">11</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5248e5f2aeda1349641010-1"><span class="crayon-c">// worker logic</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeda1349641010-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">blob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Blob</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-s">"self.addEventListener('message', messageReceived);function messageReceived(e) {self.postMessage('Doing pretty good here!');}"</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">type:</span><span class="crayon-h"> </span><span class="crayon-s">'text/javascript'</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aeda1349641010-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeda1349641010-4"><span class="crayon-c">// webkit handling</span></div><div class="crayon-line" id="crayon-5248e5f2aeda1349641010-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">URL</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">webkitURL</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeda1349641010-6">&nbsp;</div><div class="crayon-line" id="crayon-5248e5f2aeda1349641010-7"><span class="crayon-c">// create the virtual file</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeda1349641010-8"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-sy">.</span><span class="crayon-e">createObjectURL</span><span class="crayon-sy">(</span><span class="crayon-i">blob</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aeda1349641010-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeda1349641010-10"><span class="crayon-c">// create the worker</span></div><div class="crayon-line" id="crayon-5248e5f2aeda1349641010-11"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">worker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-sy">(</span><span class="crayon-i">code</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0049 seconds] -->
<p></p>
<p style="text-align: justify;">Note that the way you retrieve the string passed to the <em>Blob</em> object can vary. Obviously, passing the string like above is not very optimal. As <a title="Using Web Workers | Mozilla" href="https://developer.mozilla.org/en-US/docs/Web/Guide/Performance/Using_web_workers" target="_blank">Mozilla</a> points out in their documentation, you can also store the JavaScript code inside a custom script tag and extract its content dynamically and pass it to the Blob object.</p>
<p style="text-align: justify;">In the code below, the JavaScript code is located inside a custom script tag:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5248e5f2aedad458470986" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
&lt;script type="mce-text/js-worker"&gt;
self.addEventListener('message', messageReceived); 

function messageReceived(e) {
    self.postMessage('Doing pretty good here!');
}
&lt;/script&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5248e5f2aedad458470986-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedad458470986-2">2</div><div class="crayon-num" data-line="crayon-5248e5f2aedad458470986-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedad458470986-4">4</div><div class="crayon-num" data-line="crayon-5248e5f2aedad458470986-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedad458470986-6">6</div><div class="crayon-num" data-line="crayon-5248e5f2aedad458470986-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5248e5f2aedad458470986-1"><span class="crayon-ta">&lt;script </span><span class="crayon-e ">type</span><span class="crayon-o">=</span><span class="crayon-s">"mce-text/js-worker"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedad458470986-2"><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">messageReceived</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5248e5f2aedad458470986-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedad458470986-4"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">messageReceived</span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5248e5f2aedad458470986-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-s">'Doing pretty good here!'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedad458470986-6"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5248e5f2aedad458470986-7"><span class="crayon-ta">&lt;/script&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0024 seconds] -->
<p></p>
<p style="text-align: justify;">Did you notice the use of the keyword <em>self</em>? This is how we refer (from the background code) to the worker itself.</p>
<p style="text-align: justify;">We retrieve the script using the querySelector API and pass it to the <em>Blob</em> object:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5248e5f2aedb7016709596" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// extract the string
var logic = document.querySelectorAll("script[type=\"text\/js-worker\"]")[0].textContent;

// worker logic
var blob = new Blob([logic], {type: 'text/javascript'});

// webkit handling
var URL = window.URL || window.webkitURL;

// create the virtual file
var code = URL.createObjectURL(blob);

// create the worker
var worker = new Worker(code);</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5248e5f2aedb7016709596-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedb7016709596-2">2</div><div class="crayon-num" data-line="crayon-5248e5f2aedb7016709596-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedb7016709596-4">4</div><div class="crayon-num" data-line="crayon-5248e5f2aedb7016709596-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedb7016709596-6">6</div><div class="crayon-num" data-line="crayon-5248e5f2aedb7016709596-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedb7016709596-8">8</div><div class="crayon-num" data-line="crayon-5248e5f2aedb7016709596-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedb7016709596-10">10</div><div class="crayon-num" data-line="crayon-5248e5f2aedb7016709596-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedb7016709596-12">12</div><div class="crayon-num" data-line="crayon-5248e5f2aedb7016709596-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedb7016709596-14">14</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5248e5f2aedb7016709596-1"><span class="crayon-c">// extract the string</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedb7016709596-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">logic</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">document</span><span class="crayon-sy">.</span><span class="crayon-e">querySelectorAll</span><span class="crayon-sy">(</span><span class="crayon-s">"script[type=\"text\/js-worker\"]"</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-i">textContent</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aedb7016709596-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedb7016709596-4"><span class="crayon-c">// worker logic</span></div><div class="crayon-line" id="crayon-5248e5f2aedb7016709596-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">blob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Blob</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-i">logic</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">type:</span><span class="crayon-h"> </span><span class="crayon-s">'text/javascript'</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedb7016709596-6">&nbsp;</div><div class="crayon-line" id="crayon-5248e5f2aedb7016709596-7"><span class="crayon-c">// webkit handling</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedb7016709596-8"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">URL</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">webkitURL</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aedb7016709596-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedb7016709596-10"><span class="crayon-c">// create the virtual file</span></div><div class="crayon-line" id="crayon-5248e5f2aedb7016709596-11"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-sy">.</span><span class="crayon-e">createObjectURL</span><span class="crayon-sy">(</span><span class="crayon-i">blob</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedb7016709596-12">&nbsp;</div><div class="crayon-line" id="crayon-5248e5f2aedb7016709596-13"><span class="crayon-c">// create the worker</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedb7016709596-14"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">worker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-sy">(</span><span class="crayon-i">code</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0142 seconds] -->
<p></p>
<p style="text-align: justify;">Relying on a separate file for the worker logic is the most common way to work with Workers but you now have seen different options in case you had to get rid of a dependent file.</p>
<h5 style="text-align: justify;">Terminating a Web Worker</h5>
<p style="text-align: justify;">To terminate a Worker, just call the terminate API:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5248e5f2aedc2771755794" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
worker.terminate()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5248e5f2aedc2771755794-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5248e5f2aedc2771755794-1"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">terminate</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p></p>
<p style="text-align: justify;">In the same way, a Worker can close itself through the close API:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5248e5f2aedcb200336601" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
self.close()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5248e5f2aedcb200336601-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5248e5f2aedcb200336601-1"><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">close</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p></p>
<p style="text-align: justify;">Note that once terminated or closed, a Web Worker cannot be restored, it would have to be recreated. Now that our Worker object is created, let&#8217;s send some data back and forth to see how things work.</p>
<h5 style="text-align: justify;">Sub Web Workers</h5>
<p style="text-align: justify;">If needed, a Worker can create a Worker within itself:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5248e5f2aedd5002911656" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
self.addEventListener('message', messageReceived);

// a sub worker
var subworker = new Worker ('Task.js');

subworker.addEventListener('message', subTaskReceived);

function messageReceived(e) {
    // some logic
}

function subTaskReceived(e) {
    // some logic
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5248e5f2aedd5002911656-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedd5002911656-2">2</div><div class="crayon-num" data-line="crayon-5248e5f2aedd5002911656-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedd5002911656-4">4</div><div class="crayon-num" data-line="crayon-5248e5f2aedd5002911656-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedd5002911656-6">6</div><div class="crayon-num" data-line="crayon-5248e5f2aedd5002911656-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedd5002911656-8">8</div><div class="crayon-num" data-line="crayon-5248e5f2aedd5002911656-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedd5002911656-10">10</div><div class="crayon-num" data-line="crayon-5248e5f2aedd5002911656-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedd5002911656-12">12</div><div class="crayon-num" data-line="crayon-5248e5f2aedd5002911656-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedd5002911656-14">14</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5248e5f2aedd5002911656-1"><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">messageReceived</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedd5002911656-2">&nbsp;</div><div class="crayon-line" id="crayon-5248e5f2aedd5002911656-3"><span class="crayon-c">// a sub worker</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedd5002911656-4"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">subworker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">'Task.js'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aedd5002911656-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedd5002911656-6"><span class="crayon-v">subworker</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">subTaskReceived</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aedd5002911656-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedd5002911656-8"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">messageReceived</span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5248e5f2aedd5002911656-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// some logic</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedd5002911656-10"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5248e5f2aedd5002911656-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedd5002911656-12"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">subTaskReceived</span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5248e5f2aedd5002911656-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// some logic</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedd5002911656-14"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0107 seconds] -->
<p></p>
<h5><span style="line-height: 1.5em;">Passing data</span></h5>
<p style="text-align: justify;">To communicate, we use the postMessage API (not to be confused with window.postMessage). Any message sent with postMessage triggers the &#8220;message&#8221; event that dispatched by the Worker object:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5248e5f2aeddf430595041" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// extract the string
var logic = document.querySelectorAll("script[type=\"text\/js-worker\"]")[0].textContent;

// worker logic
var blob = new Blob([logic], {type: 'text/javascript'});

// webkit handling
var URL = window.URL || window.webkitURL;

// create the virtual file
var code = URL.createObjectURL(blob);

// create the worker
var worker = new Worker(code);

// listen to the response from the Worker
worker.addEventListener('message', receiveMessage);

// pass some data
worker.postMessage('How is it going over there?');

// callback handling the response, data is available in the event object
function receiveMessage (e)
{
    console.log (e.data);
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5248e5f2aeddf430595041-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeddf430595041-2">2</div><div class="crayon-num" data-line="crayon-5248e5f2aeddf430595041-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeddf430595041-4">4</div><div class="crayon-num" data-line="crayon-5248e5f2aeddf430595041-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeddf430595041-6">6</div><div class="crayon-num" data-line="crayon-5248e5f2aeddf430595041-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeddf430595041-8">8</div><div class="crayon-num" data-line="crayon-5248e5f2aeddf430595041-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeddf430595041-10">10</div><div class="crayon-num" data-line="crayon-5248e5f2aeddf430595041-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeddf430595041-12">12</div><div class="crayon-num" data-line="crayon-5248e5f2aeddf430595041-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeddf430595041-14">14</div><div class="crayon-num" data-line="crayon-5248e5f2aeddf430595041-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeddf430595041-16">16</div><div class="crayon-num" data-line="crayon-5248e5f2aeddf430595041-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeddf430595041-18">18</div><div class="crayon-num" data-line="crayon-5248e5f2aeddf430595041-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeddf430595041-20">20</div><div class="crayon-num" data-line="crayon-5248e5f2aeddf430595041-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeddf430595041-22">22</div><div class="crayon-num" data-line="crayon-5248e5f2aeddf430595041-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeddf430595041-24">24</div><div class="crayon-num" data-line="crayon-5248e5f2aeddf430595041-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aeddf430595041-26">26</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5248e5f2aeddf430595041-1"><span class="crayon-c">// extract the string</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeddf430595041-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">logic</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">document</span><span class="crayon-sy">.</span><span class="crayon-e">querySelectorAll</span><span class="crayon-sy">(</span><span class="crayon-s">"script[type=\"text\/js-worker\"]"</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-i">textContent</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aeddf430595041-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeddf430595041-4"><span class="crayon-c">// worker logic</span></div><div class="crayon-line" id="crayon-5248e5f2aeddf430595041-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">blob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Blob</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-i">logic</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">type:</span><span class="crayon-h"> </span><span class="crayon-s">'text/javascript'</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeddf430595041-6">&nbsp;</div><div class="crayon-line" id="crayon-5248e5f2aeddf430595041-7"><span class="crayon-c">// webkit handling</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeddf430595041-8"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">URL</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">webkitURL</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aeddf430595041-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeddf430595041-10"><span class="crayon-c">// create the virtual file</span></div><div class="crayon-line" id="crayon-5248e5f2aeddf430595041-11"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-sy">.</span><span class="crayon-e">createObjectURL</span><span class="crayon-sy">(</span><span class="crayon-i">blob</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeddf430595041-12">&nbsp;</div><div class="crayon-line" id="crayon-5248e5f2aeddf430595041-13"><span class="crayon-c">// create the worker</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeddf430595041-14"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">worker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-sy">(</span><span class="crayon-i">code</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aeddf430595041-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeddf430595041-16"><span class="crayon-c">// listen to the response from the Worker</span></div><div class="crayon-line" id="crayon-5248e5f2aeddf430595041-17"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">receiveMessage</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeddf430595041-18">&nbsp;</div><div class="crayon-line" id="crayon-5248e5f2aeddf430595041-19"><span class="crayon-c">// pass some data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeddf430595041-20"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-s">'How is it going over there?'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aeddf430595041-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeddf430595041-22"><span class="crayon-c">// callback handling the response, data is available in the event object</span></div><div class="crayon-line" id="crayon-5248e5f2aeddf430595041-23"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">receiveMessage</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeddf430595041-24"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5248e5f2aeddf430595041-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-i">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aeddf430595041-26"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0076 seconds] -->
<p></p>
<p style="text-align: justify;">Our code sends a message to the Worker, which returns a message back to the main thread. The code above outputs the following message:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5248e5f2aede9027207366" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
Doing pretty good here!</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5248e5f2aede9027207366-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5248e5f2aede9027207366-1"><span class="crayon-e">Doing </span><span class="crayon-e">pretty </span><span class="crayon-e">good </span><span class="crayon-i">here</span><span class="crayon-o">!</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p></p>
<p style="text-align: justify;">In that case, we sent the string: <em>&#8216;How is it going over there&#8217;</em>, and the Worker returned <em>&#8216;Doing pretty good here&#8217;</em>. We sent different data to illustrate how simply message passing works. But in most cases you want to send similar data that you can retrieve on both sides. Some coordinates, a path that has been computed in a game, or more simply a binary blob that you want to process, like a PDF or an image that has been generated. To retrieve the data that is being passed, we use the <em>data</em> property of the event object.</p>
<p style="text-align: justify;">In the code below, we update our worker logic to return the data back to the main thread:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5248e5f2aedf4638282308" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
self.addEventListener('message', messageReceived);

function messageReceived(e) {
    self.postMessage(e.data);
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5248e5f2aedf4638282308-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedf4638282308-2">2</div><div class="crayon-num" data-line="crayon-5248e5f2aedf4638282308-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedf4638282308-4">4</div><div class="crayon-num" data-line="crayon-5248e5f2aedf4638282308-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5248e5f2aedf4638282308-1"><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">messageReceived</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedf4638282308-2">&nbsp;</div><div class="crayon-line" id="crayon-5248e5f2aedf4638282308-3"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">messageReceived</span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedf4638282308-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-i">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aedf4638282308-5"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0019 seconds] -->
<p></p>
<p style="text-align: justify;">We still pass a simple string, but it is now sent back to the main thread:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5248e5f2aedfe647889661" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// extract the string
var logic = document.querySelectorAll("script[type=\"text\/js-worker\"]")[0].textContent;

// worker logic
var blob = new Blob([logic], {type: 'text/javascript'});

// webkit handling
var URL = window.URL || window.webkitURL;

// create the virtual file
var code = URL.createObjectURL(blob);

// create the worker
var worker = new Worker(code);

// listen to the response from the Worker
worker.addEventListener('message', receiveMessage);

// we send some data
worker.postMessage("Some data passed back and forth!")

// callback handling the response, data is available in the event object
function receiveMessage (e)
{
    console.log (e.data);
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5248e5f2aedfe647889661-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedfe647889661-2">2</div><div class="crayon-num" data-line="crayon-5248e5f2aedfe647889661-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedfe647889661-4">4</div><div class="crayon-num" data-line="crayon-5248e5f2aedfe647889661-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedfe647889661-6">6</div><div class="crayon-num" data-line="crayon-5248e5f2aedfe647889661-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedfe647889661-8">8</div><div class="crayon-num" data-line="crayon-5248e5f2aedfe647889661-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedfe647889661-10">10</div><div class="crayon-num" data-line="crayon-5248e5f2aedfe647889661-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedfe647889661-12">12</div><div class="crayon-num" data-line="crayon-5248e5f2aedfe647889661-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedfe647889661-14">14</div><div class="crayon-num" data-line="crayon-5248e5f2aedfe647889661-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedfe647889661-16">16</div><div class="crayon-num" data-line="crayon-5248e5f2aedfe647889661-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedfe647889661-18">18</div><div class="crayon-num" data-line="crayon-5248e5f2aedfe647889661-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedfe647889661-20">20</div><div class="crayon-num" data-line="crayon-5248e5f2aedfe647889661-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedfe647889661-22">22</div><div class="crayon-num" data-line="crayon-5248e5f2aedfe647889661-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedfe647889661-24">24</div><div class="crayon-num" data-line="crayon-5248e5f2aedfe647889661-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5248e5f2aedfe647889661-26">26</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-5248e5f2aedfe647889661-1"><span class="crayon-c">// extract the string</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedfe647889661-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">logic</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">document</span><span class="crayon-sy">.</span><span class="crayon-e">querySelectorAll</span><span class="crayon-sy">(</span><span class="crayon-s">"script[type=\"text\/js-worker\"]"</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-i">textContent</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aedfe647889661-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedfe647889661-4"><span class="crayon-c">// worker logic</span></div><div class="crayon-line" id="crayon-5248e5f2aedfe647889661-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">blob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Blob</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-i">logic</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">type:</span><span class="crayon-h"> </span><span class="crayon-s">'text/javascript'</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedfe647889661-6">&nbsp;</div><div class="crayon-line" id="crayon-5248e5f2aedfe647889661-7"><span class="crayon-c">// webkit handling</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedfe647889661-8"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">URL</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-i">webkitURL</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aedfe647889661-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedfe647889661-10"><span class="crayon-c">// create the virtual file</span></div><div class="crayon-line" id="crayon-5248e5f2aedfe647889661-11"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">URL</span><span class="crayon-sy">.</span><span class="crayon-e">createObjectURL</span><span class="crayon-sy">(</span><span class="crayon-i">blob</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedfe647889661-12">&nbsp;</div><div class="crayon-line" id="crayon-5248e5f2aedfe647889661-13"><span class="crayon-c">// create the worker</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedfe647889661-14"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">worker</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Worker</span><span class="crayon-sy">(</span><span class="crayon-i">code</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5248e5f2aedfe647889661-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedfe647889661-16"><span class="crayon-c">// listen to the response from the Worker</span></div><div class="crayon-line" id="crayon-5248e5f2aedfe647889661-17"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">addEventListener</span><span class="crayon-sy">(</span><span class="crayon-s">'message'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">receiveMessage</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedfe647889661-18">&nbsp;</div><div class="crayon-line" id="crayon-5248e5f2aedfe647889661-19"><span class="crayon-c">// we send some data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedfe647889661-20"><span class="crayon-v">worker</span><span class="crayon-sy">.</span><span class="crayon-e">postMessage</span><span class="crayon-sy">(</span><span class="crayon-s">"Some data passed back and forth!"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5248e5f2aedfe647889661-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedfe647889661-22"><span class="crayon-c">// callback handling the response, data is available in the event object</span></div><div class="crayon-line" id="crayon-5248e5f2aedfe647889661-23"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">receiveMessage</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedfe647889661-24"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5248e5f2aedfe647889661-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-i">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5248e5f2aedfe647889661-26"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0067 seconds] -->
<p></p>
<p style="text-align: justify;">If we run the code above, the console outputs:</p>
<p></p><!-- Crayon Syntax Highlighter v2.3.0 -->

		<div id="crayon-5248e5f2aee07689167877" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 