
        <!doctype html>
        <html>
        <head>
            <meta charset="utf-8"/>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title>Using Angular 1.x with ES6 and Webpack</title>
            <link rel="stylesheet" href="../css/article.css" />;
        </head>
        <body>
            <div class="m-content">
                <h1>Using Angular 1.x with ES6 and Webpack</h1>
                <div class="entry-content"><p>I know you’re all excited with Angular 2 and ES6, but that doesn’t mean we can’t use ES6 with Angular 1.x.</p><span>

</span><p>Today, I am going to present you my new workflow for Angular 1.x with ES6.</p><span>

</span><!--more--><span>


</span><h2>A brief introduction to Webpack</h2><span>

</span><p><code>Webpack</code> is a module bundler, what does that mean? Well, it basically take modules with dependencies and generate static assets to represent those modules.</p><span>

</span><p>So we could have a module like:</p><span>

</span><figure class="code"><figcaption><span>my_module.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">import</span> <span class="nx">foo</span> <span class="nx">from</span> <span class="s1">'./foo'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="nx">foo</span><span class="p">.</span><span class="nx">bar</span><span class="p">();</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>And if we process it with <code>Webpack</code>, it will take this <code>my_module.js</code>, retrieve its dependencies (<code>foo.js</code>) and generate a static file with both files.</p><span>

</span><p>So the idea with <code>Webpack</code> is: I tell you what the entry point is and you figure out the rest. For <code>Angular</code> applications, that is normally the file where we create our main module. So starting from that file, it starts pulling dependencies in (basically our entire application) and then it generates a <code>bundle.js</code> file which contains our application. There is no more need of creating hundred of <code>&lt;script&gt;</code> tags anymore.</p><span>

</span><p><code>Webpack</code> is not a replacement for <code>Gulp</code>, but it can do all the job by itself without needing <code>Gulp</code>. The philosophy is also different. In <code>Gulp</code> we do something like: “Grab all the .js files from this directory, start creating a sourcemap, concat the files, if it is for production run ng-annotate, uglify and then finish the sourcemap”. In <code>Webpack</code> we have loaders so if we need <code>sass</code> support, we can do something like:</p><span>

</span><figure class="code"><figcaption><span>webpack.config.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">loaders</span><span class="o">:</span> <span class="p">[{</span>
</span><span class="line">  <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.scss$/</span><span class="p">,</span>
</span><span class="line">  <span class="nx">loader</span><span class="o">:</span> <span class="s1">'style!css!sass'</span>
</span><span class="line"><span class="p">}];</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>How does this work? First, we match all the <code>.scss</code> files in our project and then we send it to the loader. If you have more than one loader, you separate them using <code>!</code> and then they run starting from the last one (pretty much like <code>Rails</code> and the file extensions if you’re familiar with it).</p><span>

</span><p>So it send all the <code>.scss</code> files to the <code>sass</code> loader which will transform our <code>sass</code> into <code>css</code>. The output of that will be sent to the <code>css</code> loader which will read them and return their <code>css</code> code and finally it ends on the <code>style-loader</code> which <code>Webpack</code> uses to generate <code>&lt;link&gt;</code> tags and stuff.</p><span>

</span><p>Thanks to that, we can achieve things like:</p><span>

</span><figure class="code"><figcaption><span>app.js</span></figcaption></figure><span>


</span><p>to import that <code>scss</code> into our app.</p><span>

</span><p>So the idea with <code>Webpack</code> is just that. An entry point, and from there we import the different dependencies of our application thanks to the loaders.</p><span>

</span><p>Before we move on, what about the <code>ES6</code> ? That is another loader, in concrete, the <code>babel-loader</code>:</p><span>

</span><figure class="code"><figcaption><span>webpack.config.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">loaders</span><span class="o">:</span> <span class="p">[</span>
</span><span class="line">  <span class="c1">// SASS one omitted</span>
</span><span class="line">  <span class="p">{</span>
</span><span class="line">    <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
</span><span class="line">    <span class="nx">loader</span><span class="o">:</span> <span class="s1">'babel'</span><span class="p">,</span>
</span><span class="line">    <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/node_modules/</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">];</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Now when we import a javascript file, it will be processed by <code>babel</code>. Notice how we exclude <code>node_modules</code> to get some performance ;)</p><span>

</span><h2>Using Angular 1.x with ES6</h2><span>

</span><p>So having <code>Webpack</code> to process everything for us, we just need to start coding our app.</p><span>

</span><p>I created a <a href="https://github.com/Foxandxss/angular-webpack-workflow">workflow</a> with <code>Webpack</code> for you, so you just have to clone it and stop worrying about tooling:</p><span>

</span><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class=""><span class="line">$ git clone https://github.com/Foxandxss/angular-webpack-workflow my_app
</span><span class="line">$ cd my_app
</span><span class="line">$ npm install
</span><span class="line">$ npm run dev</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p><code>npm run dev</code> will launch the <code>webpack-dev-server</code> which comes with livereload. Now you can go to <code>http://localhost:8080</code> to see the application working.</p><span>

</span><p>From here, how you structure your app and how you name the files is up to you. I am going to share in here my conventions in how to use <code>ES6</code> with Angular 1.x.</p><span>

</span><p>If you open <code>src/app.js</code> (our entry point) you could code:</p><span>

</span><figure class="code"><figcaption><span>src/app.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="p">[]);</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>If you remember from what I said earlier, <code>Webpack</code> will grab this file and all its dependencies to generate the final result. Is this line going to work? Try it. It doesn’t. Why? Because <code>Angular</code> hasn’t been loaded yet and when <code>Webpack</code> generates the final <code>build.js</code> it won’t have <code>Angular</code> in it so it won’t work. How do we tell <code>Webpack</code> to load <code>Angular</code> ? As simple as:</p><span>

</span><figure class="code"><figcaption><span>src/app.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">require</span><span class="p">(</span><span class="s1">'angular'</span><span class="p">);</span>
</span><span class="line">
</span><span class="line"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="p">[]);</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>That will tell <code>Webpack</code> to require <code>Angular</code> so the final <code>build.js</code> will have <code>Angular</code> loaded. Now, since <code>Angular</code> creates a global <code>angular</code> object, we can simply use it to create our <code>app</code> module.</p><span>

</span><p>That is good, but not good enough. One of the best things of being able to “require” stuff is knowing where our stuff come from. Yes, requiring angular will create that global variable, but it is not that clear…</p><span>

</span><p>Isn’t it better to do:</p><span>

</span><figure class="code"><figcaption><span>src/app.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">const</span> <span class="nx">angular</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'angular'</span><span class="p">);</span>
</span><span class="line">
</span><span class="line"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="p">[]);</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>I think it is. <code>Angular</code> also exports the <code>angular</code> object so we can get it like that and use it to create our modules and components. You can also use ES6 syntax to require modules:</p><span>

</span><figure class="code"><figcaption><span>src/app.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">import</span> <span class="nx">angular</span> <span class="nx">from</span> <span class="s1">'angular'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="p">[]);</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>I personally prefer the ES6 syntax, but the previous one is good as well.</p><span>

</span><h3>Loading Bootstrap</h3><span>

</span><p>Not related with <code>Angular</code>, but it is a common choice to include CSS frameworks like <code>bootstrap</code>. How can we use it?</p><span>

</span><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">$ npm install --save bootstrap</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Now, we import it:</p><span>

</span><figure class="code"><figcaption><span>src/app.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">import</span> <span class="s1">'bootstrap/dist/css/bootstrap.css'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kr">import</span> <span class="nx">angular</span> <span class="nx">from</span> <span class="s1">'angular'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="p">[]);</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>And it works!</p><span>

</span><p>Why load it in here? Isn’t this file the one who creates the <code>app</code> module? Yes, but we can think of the <code>bootstrap.css</code> as the main <code>css</code> of our entire application, so here we are saying: I want to apply the ‘bootstrap.css’ on our entire application. While that sentence is not completely true (you can load it in a inner file and it will still be applied in the entire app), we are talking here about the semantics, in other words, to make clear that <code>bootstrap.css</code> will apply to the entire app.</p><span>

</span><h3>Config functions</h3><span>

</span><p>Creating a config function in ES6 is not really different to ES5, it is just a function we export to be used in a different file:</p><span>

</span><figure class="code"><figcaption><span>src/app.config.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">routing</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'$urlRouterProvider'</span><span class="p">,</span> <span class="s1">'$locationProvider'</span><span class="p">];</span>
</span><span class="line">
</span><span class="line"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">routing</span><span class="p">(</span><span class="nx">$urlRouterProvider</span><span class="p">,</span> <span class="nx">$locationProvider</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">$locationProvider</span><span class="p">.</span><span class="nx">html5Mode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span class="line">  <span class="nx">$urlRouterProvider</span><span class="p">.</span><span class="nx">otherwise</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Here we created a function to configure <code>html5Mode</code> and also to send us to <code>/</code> on startup. Notice how we used <code>export default</code> to export our function.</p><span>

</span><p><strong>NOTE</strong>: There is no need of using <code>$inject</code> like I did in here, there is a <code>Webpack</code> loader for <code>ng-annotate</code> that you can use to let webpack annotate for you. Personally I prefer the <code>$inject</code> syntax. The loader is not installed on my workflow, but it is a 1 minute change.</p><span>

</span><p>Now with our exported function, we just need to import it somewhere and use it, for example:</p><span>

</span><figure class="code"><figcaption><span>src/app.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">import</span> <span class="s1">'bootstrap/dist/css/bootstrap.css'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kr">import</span> <span class="nx">angular</span> <span class="nx">from</span> <span class="s1">'angular'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kr">import</span> <span class="nx">routing</span> <span class="nx">from</span> <span class="s1">'./app.config'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="p">[])</span>
</span><span class="line">  <span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="nx">routing</span><span class="p">);</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Good, now our configuration is done and it is clear where that “routing” function comes from.</p><span>

</span><p>Ah! We are using <code>ui-router</code>, so we need to install it:</p><span>

</span><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">$ npm install --save angular-ui-router</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Now we need to import it (like we did with angular) and put it is a dependency to <code>app</code>. But… how? I mean, angular returns an object, but what does <code>ui-router</code> return? It won’t return an object, basically because there is none.</p><span>

</span><p>Since angular comes with its own module system, what it expects is the name of the module we want to load, something like:</p><span>

</span><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ui.router'</span><span class="p">]);</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Alright, but we still need to import <code>ui-router</code> to include it on the <code>bundle.js</code>, so here we can kill two birds with one stone:</p><span>

</span><figure class="code"><figcaption><span>src/app.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">import</span> <span class="s1">'bootstrap/dist/css/bootstrap.css'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kr">import</span> <span class="nx">angular</span> <span class="nx">from</span> <span class="s1">'angular'</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="nx">uirouter</span> <span class="nx">from</span> <span class="s1">'angular-ui-router'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kr">import</span> <span class="nx">routing</span> <span class="nx">from</span> <span class="s1">'./app.config'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="p">[</span><span class="nx">uirouter</span><span class="p">])</span>
</span><span class="line">  <span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="nx">routing</span><span class="p">);</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>The convention that all external modules are following is to simply export the name of the module, so <code>uirouter</code> here is the string <code>'ui.router'</code>.</p><span>

</span><h3>A new module</h3><span>

</span><p>So let’s code a dummy feature. We need a new module, a controller, a template and route config. Let’s start with the controller:</p><span>

</span><figure class="code"><figcaption><span>src/features/home/home.controller.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">HomeController</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">'World'</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">changeName</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">'angular-tips'</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>So a controller with ES6 is just a class. When using ES6 we will use <code>controllerAs</code> so we put our stuff in <code>this.</code>. Here we initialize a <code>name</code> field and also we have a button to change it. The controller gets exported so we can use it in a different file. Let’s create the template now:</p><span>

</span><figure class="code"><figcaption><span>src/features/home/home.html</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"jumbotron"</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;h1&gt;</span>Hello, {{home.name}}<span class="nt">&lt;/h1&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span><span class="line">
</span><span class="line"><span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span> <span class="na">ng-click=</span><span class="s">"home.changeName()"</span><span class="nt">&gt;</span>Change<span class="nt">&lt;/button&gt;</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Also the routing config:</p><span>

</span><figure class="code"><figcaption><span>src/features/home/home.routes.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">routes</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'$stateProvider'</span><span class="p">];</span>
</span><span class="line">
</span><span class="line"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">routes</span><span class="p">(</span><span class="nx">$stateProvider</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">$stateProvider</span>
</span><span class="line">    <span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">'home'</span><span class="p">,</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">url</span><span class="o">:</span> <span class="s1">'/'</span><span class="p">,</span>
</span><span class="line">      <span class="nx">template</span><span class="o">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./home.html'</span><span class="p">),</span>
</span><span class="line">      <span class="nx">controller</span><span class="o">:</span> <span class="s1">'HomeController'</span><span class="p">,</span>
</span><span class="line">      <span class="nx">controllerAs</span><span class="o">:</span> <span class="s1">'home'</span>
</span><span class="line">    <span class="p">});</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Notice how we loaded our template. Thanks to webpack, we can require html files (just read them, without processing) and that will return the template as a string. Just what <code>template</code> needs.</p><span>

</span><p>Ok, now we just need our module:</p><span>

</span><figure class="code"><figcaption><span>src/features/home/index.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">import</span> <span class="nx">angular</span> <span class="nx">from</span> <span class="s1">'angular'</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="nx">uirouter</span> <span class="nx">from</span> <span class="s1">'angular-ui-router'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kr">import</span> <span class="nx">routing</span> <span class="nx">from</span> <span class="s1">'./home.routes'</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="nx">HomeController</span> <span class="nx">from</span> <span class="s1">'./home.controller'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kr">export</span> <span class="k">default</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app.home'</span><span class="p">,</span> <span class="p">[</span><span class="nx">uirouter</span><span class="p">])</span>
</span><span class="line">  <span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="nx">routing</span><span class="p">)</span>
</span><span class="line">  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'HomeController'</span><span class="p">,</span> <span class="nx">HomeController</span><span class="p">)</span>
</span><span class="line">  <span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>First notice the name of the file, <code>index.js</code>. Thanks to that we can import a folder and this file will be the one that runs.</p><span>

</span><p>Also, we return the <code>name</code> of the module as we said earlier (external modules always return their name).</p><span>

</span><p>Since this module is also using <code>ui-router</code>, we import it. There is no <em>real</em> need to do this, we loaded <code>ui-router</code> in the <code>app</code> module, but doing this we get two things: It is easy to see what dependencies our module have, and if we need this feature in another app, we can simply copy &amp; paste it without having to worry about dependencies. Also, Angular won’t care, it will simply ignore it.</p><span>

</span><p>Now back to the <code>app</code> module, we need to add this new module as a dependency:</p><span>

</span><figure class="code"><figcaption><span>src/app.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="c1">// other imports omitted</span>
</span><span class="line">
</span><span class="line"><span class="kr">import</span> <span class="nx">routing</span> <span class="nx">from</span> <span class="s1">'./app.config'</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="nx">home</span> <span class="nx">from</span> <span class="s1">'./features/home'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="p">[</span><span class="nx">uirouter</span><span class="p">,</span> <span class="nx">home</span><span class="p">])</span>
</span><span class="line">  <span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="nx">routing</span><span class="p">);</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Finally, we just need to add a <code>ui-view</code> to our <code>index.html</code>:</p><span>

</span><figure class="code"><figcaption><span>src/index.html</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="cp">&lt;!doctype html&gt;</span>
</span><span class="line"><span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"app"</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
</span><span class="line"><span class="nt">&lt;head&gt;</span>
</span><span class="line">  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;title&gt;</span>Angular App<span class="nt">&lt;/title&gt;</span>
</span><span class="line">  <span class="nt">&lt;base</span> <span class="na">href=</span><span class="s">"/"</span><span class="nt">&gt;</span>
</span><span class="line"><span class="nt">&lt;/head&gt;</span>
</span><span class="line"><span class="nt">&lt;body&gt;</span>
</span><span class="line">  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container</span>
</span><span class="line">    <span class="err">&lt;</span><span class="na">ui-view</span><span class="nt">&gt;</span><span class="err">&lt;</span>/ui-view&gt;
</span><span class="line">  <span class="nt">&lt;/div&gt;</span>
</span><span class="line"><span class="nt">&lt;/body&gt;</span>
</span><span class="line"><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p><strong>NOTE</strong>: If we modify the <code>index.html</code>, we need to re-run webpack.</p><span>

</span><p>If you try it, it works!</p><span>

</span><p><img src="http://angular-tips.com/images/posts/webpackintro/1.png"></p><span>

</span><p>Uhm, I would like the text to be centered in the jumbotron. First, let’s add an id to our jumbotron:</p><span>

</span><figure class="code"><figcaption><span>src/features/home/home.html</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"home-header"</span> <span class="na">class=</span><span class="s">"jumbotron"</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;h1&gt;</span>Hello, {{home.name}}<span class="nt">&lt;/h1&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span><span class="line">
</span><span class="line"><span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span> <span class="na">ng-click=</span><span class="s">"home.changeName()"</span><span class="nt">&gt;</span>Change<span class="nt">&lt;/button&gt;</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>And now let’s create a specific <code>css</code> file for this feature:</p><span>

</span><figure class="code"><figcaption><span>src/features/home/home.css</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="css"><span class="line"><span class="nf">#home-header</span> <span class="p">{</span>
</span><span class="line">  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Like we did with <code>bootstrap.css</code>, we need to load this <code>home.css</code>. A good place would be the file where we create our <code>home</code> module:</p><span>

</span><figure class="code"><figcaption><span>src/features/home/index.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">import</span> <span class="s1">'./home.css'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kr">import</span> <span class="nx">angular</span> <span class="nx">from</span> <span class="s1">'angular'</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="nx">uirouter</span> <span class="nx">from</span> <span class="s1">'angular-ui-router'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Rest omitted</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Now, it is a bit better.</p><span>

</span><h3>Services</h3><span>

</span><p>With ES6, we won’t use factories anymore, instead we are going to use services. The reason behind that is that a class maps perfectly to a service:</p><span>

</span><figure class="code"><figcaption><span>src/services/randomNames.service.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">import</span> <span class="nx">angular</span> <span class="nx">from</span> <span class="s1">'angular'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kr">class</span> <span class="nx">RandomNames</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'John'</span><span class="p">,</span> <span class="s1">'Elisa'</span><span class="p">,</span> <span class="s1">'Mark'</span><span class="p">,</span> <span class="s1">'Annie'</span><span class="p">];</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">getName</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="kr">const</span> <span class="nx">totalNames</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">names</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span><span class="line">    <span class="kr">const</span> <span class="nx">rand</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">totalNames</span><span class="p">);</span>
</span><span class="line">    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">names</span><span class="p">[</span><span class="nx">rand</span><span class="p">];</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kr">export</span> <span class="k">default</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'services.random-names'</span><span class="p">,</span> <span class="p">[])</span>
</span><span class="line">  <span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">'randomNames'</span><span class="p">,</span> <span class="nx">RandomNames</span><span class="p">)</span>
</span><span class="line">  <span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>So here we have a service that returns a random name. In my personal convention, I decided to create both service + module in one file and export the module’s name.</p><span>

</span><p>The service itself, just a class with methods, nothing complex nor fancy. Let’s use it on the <code>home</code> module. First import it:</p><span>

</span><figure class="code"><figcaption><span>src/features/home/index.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="c1">// Rest of imports omitted</span>
</span><span class="line"><span class="kr">import</span> <span class="nx">HomeController</span> <span class="nx">from</span> <span class="s1">'./home.controller'</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="nx">randomNames</span> <span class="nx">from</span> <span class="s1">'../../services/randomNames.service'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kr">export</span> <span class="k">default</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app.home'</span><span class="p">,</span> <span class="p">[</span><span class="nx">uirouter</span><span class="p">,</span> <span class="nx">randomNames</span><span class="p">])</span>
</span><span class="line">  <span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="nx">routing</span><span class="p">)</span>
</span><span class="line">  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'HomeController'</span><span class="p">,</span> <span class="nx">HomeController</span><span class="p">)</span>
</span><span class="line">  <span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Nothing new in here. Let’s use it:</p><span>

</span><figure class="code"><figcaption><span>src/features/home/home.controller.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">HomeController</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">constructor</span><span class="p">(</span><span class="nx">randomNames</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">random</span> <span class="o">=</span> <span class="nx">randomNames</span><span class="p">;</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">'World'</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">changeName</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">'angular-tips'</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">randomName</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">random</span><span class="p">.</span><span class="nx">getName</span><span class="p">();</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="nx">HomeController</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'randomNames'</span><span class="p">];</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>We inject it on the constructor, assign it to a local variable and then we just simply use it. For the template, a little update:</p><span>

</span><figure class="code"><figcaption><span>src/features/home/home.html</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"home-header"</span> <span class="na">class=</span><span class="s">"jumbotron"</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;h1&gt;</span>Hello, {{home.name}}<span class="nt">&lt;/h1&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span><span class="line">
</span><span class="line"><span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span> <span class="na">ng-click=</span><span class="s">"home.changeName()"</span><span class="nt">&gt;</span>Change<span class="nt">&lt;/button&gt;</span>
</span><span class="line"><span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-danger"</span> <span class="na">ng-click=</span><span class="s">"home.randomName()"</span><span class="nt">&gt;</span>Random<span class="nt">&lt;/button&gt;</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Yay, new features.</p><span>

</span><h3>Directives</h3><span>

</span><p>Sadly, directives are not easy to implement as a class (there are some <a href="http://stackoverflow.com/a/28634429/123204">workarounds</a>) so I prefer to keep using them as a function:</p><span>

</span><figure class="code"><figcaption><span>src/directives/greeting.directive.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">import</span> <span class="nx">angular</span> <span class="nx">from</span> <span class="s1">'angular'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kd">function</span> <span class="nx">greeting</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="k">return</span> <span class="p">{</span>
</span><span class="line">    <span class="nx">restrict</span><span class="o">:</span> <span class="s1">'E'</span><span class="p">,</span>
</span><span class="line">    <span class="nx">scope</span><span class="o">:</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">name</span><span class="o">:</span> <span class="s1">'='</span>
</span><span class="line">    <span class="p">},</span>
</span><span class="line">    <span class="nx">template</span><span class="o">:</span> <span class="s1">'&lt;h1&gt;Hello, {{name}}&lt;/div&gt;'</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kr">export</span> <span class="k">default</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'directives.greeting'</span><span class="p">,</span> <span class="p">[])</span>
</span><span class="line">  <span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">'greeting'</span><span class="p">,</span> <span class="nx">greeting</span><span class="p">)</span>
</span><span class="line">  <span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Doesn’t hurt anyway. Let’s import it:</p><span>

</span><figure class="code"><figcaption><span>src/features/home/index.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="c1">// Rest of imports omitted</span>
</span><span class="line"><span class="kr">import</span> <span class="nx">HomeController</span> <span class="nx">from</span> <span class="s1">'./home.controller'</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="nx">randomNames</span> <span class="nx">from</span> <span class="s1">'../../services/randomNames.service'</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="nx">greeting</span>    <span class="nx">from</span> <span class="s1">'../../directives/greeting.directive'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kr">export</span> <span class="k">default</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app.home'</span><span class="p">,</span> <span class="p">[</span><span class="nx">uirouter</span><span class="p">,</span> <span class="nx">randomNames</span><span class="p">,</span> <span class="nx">greeting</span><span class="p">])</span>
</span><span class="line">  <span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="nx">routing</span><span class="p">)</span>
</span><span class="line">  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'HomeController'</span><span class="p">,</span> <span class="nx">HomeController</span><span class="p">)</span>
</span><span class="line">  <span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Finally:</p><span>

</span><figure class="code"><figcaption><span>src/features/home/home.html</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"home-header"</span> <span class="na">class=</span><span class="s">"jumbotron"</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;greeting</span> <span class="na">name=</span><span class="s">"home.name"</span><span class="nt">&gt;&lt;/greeting&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span><span class="line">
</span><span class="line"><span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span> <span class="na">ng-click=</span><span class="s">"home.changeName()"</span><span class="nt">&gt;</span>Change<span class="nt">&lt;/button&gt;</span>
</span><span class="line"><span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-danger"</span> <span class="na">ng-click=</span><span class="s">"home.randomName()"</span><span class="nt">&gt;</span>Random<span class="nt">&lt;/button&gt;</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><h3>Testing</h3><span>

</span><p>Webpack is awesome for testing, but sadly Angular is a bit limited in that aspect. On a good world, we would have our test requiring different entry points so we can test our modules in isolation without having to load all the application. But yet again, angular was never made with that intention in mind so we have to forget about that and test like we always did.</p><span>

</span><p>There is a karma.conf.js on our project which basically uses a plugin for webpack support. There, we also load a file that I named: <code>tests.webpack.js</code>. That file will simply load all the tests on our project. Yes, it is a bit of a hack but that is what we have right now:</p><span>

</span><figure class="code"><figcaption><span>src/tests.webpack.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">import</span> <span class="s1">'angular'</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="s1">'angular-mocks/angular-mocks'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kd">var</span> <span class="nx">testsContext</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">context</span><span class="p">(</span><span class="s2">"."</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="sr">/.test$/</span><span class="p">);</span>
</span><span class="line"><span class="nx">testsContext</span><span class="p">.</span><span class="nx">keys</span><span class="p">().</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">testsContext</span><span class="p">);</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>We also load angular and angular-mocks for our tests.</p><span>

</span><p>Let’s start karma:</p><span>

</span><figure class="code"><figcaption><span></span></figcaption></figure><span>


</span><p>And code a simple test for the sake of the article:</p><span>

</span><figure class="code"><figcaption><span>src/features/home/home.controller.test.js</span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">import</span> <span class="nx">home</span> <span class="nx">from</span> <span class="s1">'./index'</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="nx">describe</span><span class="p">(</span><span class="s1">'Controller: Home'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="kd">let</span> <span class="nx">$controller</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">angular</span><span class="p">.</span><span class="nx">mock</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="nx">home</span><span class="p">));</span>
</span><span class="line">
</span><span class="line">  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">angular</span><span class="p">.</span><span class="nx">mock</span><span class="p">.</span><span class="nx">inject</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">_$controller_</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="nx">$controller</span> <span class="o">=</span> <span class="nx">_$controller_</span><span class="p">;</span>
</span><span class="line">  <span class="p">}));</span>
</span><span class="line">
</span><span class="line">  <span class="nx">it</span><span class="p">(</span><span class="s1">'name is initialized to World'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="kd">let</span> <span class="nx">ctrl</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s1">'HomeController'</span><span class="p">);</span>
</span><span class="line">    <span class="nx">expect</span><span class="p">(</span><span class="nx">ctrl</span><span class="p">.</span><span class="nx">name</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">'World'</span><span class="p">);</span>
</span><span class="line">  <span class="p">});</span>
</span><span class="line"><span class="p">});</span>
</span></code></pre></td></tr></tbody></table></div></figure><span>


</span><p>Here we import the module we want to test, we load it and we just test it as we are used to.</p><span>

</span><p><strong>NOTE</strong>: On my workflow, you need to prepend <code>.test</code> to your test files.</p><span>

</span><p>As a freebie, there on the <code>build</code> folder you can find the tests coverage.</p><span>

</span><h3>Production</h3><span>

</span><p>The hardest part. Or it is not? I guess not.</p><span>

</span><figure class="code"><figcaption><span></span></figcaption></figure><span>


</span><p>That will generate the final build at <code>/dist</code>. Just point your server to <code>/dist/index.html</code> and you’re good to go. It also includes cache-busting for free :)</p><span>

</span><h3>Extra</h3><span>

</span><p>What about third party libraries that doesn’t have <code>Webpack</code> support? I mean, libraries that are not exporting anything. Well, we can simply require it like:</p><span>

</span><figure class="code"><figcaption><span></span></figcaption></figure><span>


</span><p>That will include <code>thelibrary</code> on the build and that is good enough.</p><span>

</span><p>So please library creators, make your libraries to work with Webpack, it is as easy as 2-3 lines of code :)</p><span>

</span><h3>Conclusions</h3><span>

</span><p>Webpack is a nice way to use ES6 with Angular 1.x. It is easy to configure and does a lot of things for you.</p><span>

</span><p>It is not the only option tho, you can also use <a href="http://jspm.io/">JSPM</a> but that is something for another day ;)</p><span>

</span><p>I want to give my thanks to my friend <a href="https://github.com/cesarandreu">Cesar Andreu</a> for creating the original workflow and for helping me with this one.</p><span>

</span><p>If you want to play with this demo, you can clone it from <a href="https://github.com/angular-tips/webpack-demo">here</a>.</p><span>
</span></div>
            </div>
            <script>var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34802167-1']); _gaq.push(['_setDomainName', 'liuzhe.co']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })();</script>
        </body>
        </html>