<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>A JavaScript refresh | TypedArray.org</title>
<link rel="stylesheet" href="../css/article.css" />
</head>
<body>
<div class="m-content">
<h1>A JavaScript refresh | TypedArray.org</h1>
<div><header>
											
										</header><address>&nbsp;</address><p>We will cover here some of the key concepts of JavaScript to get us started. If you have not checked JavaScript for the past few years or if you are new to JavaScript, I hope you find this useful.</p><p>We will start by covering the language basics like variables, functions, scope, and the different types, but we will not spend much time on the absolute basics like operators, or what is a function or a variable, you probably already know all that as a developer. We will discover JavaScript by going through simple examples and for each of these, highlight specific behaviors and approach the language from an interactive developer standpoint, coming from other technologies like Flash (ActionScript 3), Java, C# or simply native (C++).</p><p>Like other managed languages, JavaScript runs inside a JavaScript VM (Virtual Machine), one key difference to note is that unlike executing bytecode, JavaScript VMs are source based, translating JavaScript source code directly to native code by using what is called a JIT (Just in Time compiler) when available. The JIT performs optimization at runtime (just in time) to leverage platform specific optimizations depending on the architecture the code is being run on. Of course, most browsers available today run JavaScript, the list below highlights the most popular JavaScript VMs today in the industry:</p><p>JavaScript can provide some serious advantages over low-level languages like automatic memory allocation and collection through garbage collectors. This, however comes at the cost of speed. But managed languages provides so much value in terms of productivity and platform reach that developers today tend to favor them over low-level languages, despite the loss of performance because of the higher cost for those languages when it comes to targeting multiple platforms.</p><p>Before we get started, it is important to differentiate how browsers work. On one side we have the core language, JavaScript, and on the other side we have the browser APIs. Historically, JavaScript and the DOM used to be tightly coupled and most tutorials would cover both at the same time, but they evolved into strong separate entities. So we we will cover JavaScript first, then deep dive into the DOM and browser APIs later on. Everything in this first article could run on the shell without any interaction with the browser APIs, just pure core JavaScript. The list below represents the general-purpose core objects defined in JavaScript:</p><ul>
<li>Array</li>
<li>Boolean</li>
<li>Date</li>
<li>Function</li>
<li>Number</li>
<li>Object</li>
<li>RegExp</li>
<li>String</li>
<li>Error</li>
</ul><p>For a complete list of the global objects, check the <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects">Global Objects</a> page from Mozilla. Other objects you might have seen in JavaScript, like Window, CanvasRenderingContext2D, or XMLHttpRequest object or any other, have nothing to do with the JavaScript language itself and are just objects to leverage specific browser capabilities, like network access, audio, rendering and more. We will cover all of these APIs in future articles.</p><h5><a name="versions"></a>Versions</h5><p>JavaScript today is implemented across browsers following the <a href="http://www.ecmascript.org/docs.php">ECMAScript</a> specification. As of today, five editions of ECMA-262 have been published. <a href="http://wiki.ecmascript.org/doku.php?id=harmony:proposals">“Harmony”</a>, the latest revision is a work in progress:</p><table id="tablepress-2">
<thead>
<tr>
	<th><p>Edition</p></th><th><p>Date Published</p></th>
</tr>
</thead>
<tbody>
<tr>
	<td>1</td><td>June 1997</td>
</tr>
<tr>
	<td>2</td><td>June 1998</td>
</tr>
<tr>
	<td>3</td><td>December 1999</td>
</tr>
<tr>
	<td>4</td><td>Abandoned</td>
</tr>
<tr>
	<td>5</td><td>December 2009</td>
</tr>
<tr>
	<td>5.1</td><td>June 2011</td>
</tr>
<tr>
	<td>6 (Harmony)</td><td>In progress</td>
</tr>
</tbody>
</table><!-- #tablepress-2 from cache --><p>Most browsers today support ECMAScript 5.1, the table below illustrates the conformance test suite used:</p><table id="tablepress-1">
<thead>
<tr>
	<th><p>Product</p></th><th><p>Version</p></th><th><p>Test Suite Version</p></th>
</tr>
</thead>
<tbody>
<tr>
	<td>Chrome</td><td>24.0.1312.57 m</td><td>ES5.1 (2012-12-17)</td>
</tr>
<tr>
	<td>Firefox</td><td>19</td><td>ES5.1 (2013-02-07)</td>
</tr>
<tr>
	<td>Internet Explorer</td><td>10.0 (10.0.9200.16384)</td><td>ES5.1 (2012-12-17)</td>
</tr>
<tr>
	<td>Maxthon</td><td>3.4.2.3000</td><td>ES5.1 (2012-08-26)</td>
</tr>
<tr>
	<td>Opera</td><td>12.14 (build 1738)</td><td>ES5.1 (2013-02-07)</td>
</tr>
<tr>
	<td>Safari</td><td>6.0.2 (8536.26.17)</td><td>ES5.1 (2012-12-17)</td>
</tr>
</tbody>
</table><!-- #tablepress-1 from cache --><p>There is also separate versioning for JavaScript with some additional features not necessarily implemented in ECMAScript. The latest JavaScript version is 1.8. The table below illustrates the correspondence between JavaScript and ECMAScript versions:</p><table id="tablepress-3">
<thead>
<tr>
	<th><p>JavaScript version</p></th><th><p>Relation with ECMAScript</p></th>
</tr>
</thead>
<tbody>
<tr>
	<td>JavaScript 1.1</td><td>ECMA-262 - Edition 1 is based on JavaScript 1.1.</td>
</tr>
<tr>
	<td>JavaScript 1.2</td><td>ECMA-262 was not complete when JavaScript 1.2 was released. JavaScript 1.2 is not fully compatible with ECMA-262 - Edition 1.</td>
</tr>
<tr>
	<td>JavaScript 1.3</td><td>JavaScript 1.3 is fully compatible with ECMA-262 Edition 1. JavaScript 1.3 resolved the inconsistencies that JavaScript 1.2 had with ECMA-262 while keeping all the additional features of JavaScript 1.2 except == and != which were changed to conform with ECMA-262.</td>
</tr>
<tr>
	<td>JavaScript 1.4</td><td>JavaScript 1.4 is fully compatible with ECMA-262 Edition 1. The third version of the ECMAScript specification was not finalized when JavaScript 1.4 was released.</td>
</tr>
<tr>
	<td>JavaScript 1.5</td><td>JavaScript 1.5 is fully compatible with ECMA-262 Edition 3.</td>
</tr>
</tbody>
</table><!-- #tablepress-3 from cache --><p><a title="JavaScript / EcmaScript versions" href="https://developer.mozilla.org/en-US/docs/JavaScript/Guide/JavaScript_Overview" target="_blank">Source (Mozilla)</a></p><p>Throughout this article we will be sticking to the ECMAScript 5.1 feature set, which is the latest revision implemented by all major browsers. From time to time we will have a quick look at some specific features outside the ECMAScript scope just for general information. When such features are covered it will be explicitly mentioned.</p><h5><a name="assembly"></a>Assembly language of the web</h5><p>In the past years, more and more languages have been targeting JavaScript. Recently projects like <a title="Emscripten" href="https://github.com/kripken/emscripten" target="_blank">Emscripten</a> have proved that it is even possible to take native C/C++ code and compile it to JavaScript. Some people have mentioned the idea of JavaScript being the <i>assembly language of the web</i>. It is indeed an interesting analogy. Languages like <a href="http://typescriptlang.org">TypeScript</a> or <a href="http://www.dartlang.org/">Dart</a> have demonstrated this too by cross-compiling into JavaScript.</p><p>TypeScript is an implementation of ECMAScript 6 with optional strong typing, whereas Dart is a more aggressive approach as a different language that would ideally a Dart VM for Chrome. Recently, efforts like <a href="http://asmjs.org/spec/latest/">asm.js</a> from Mozilla have pushed the idea even further by proposing a low-level subset of JavaScript that would be targeted by compilers more efficiently. Some other initiatives like <a href="http://coffeescript.org/">CoffeScript</a> (often called transpilers) help developers by exposing language syntactic sugar not necessarily exposed in JavaScript today.</p><h5><a name="no-compiling"></a>No Compiling</h5><p>As we just mentioned, one of the beauty of JavaScript is that you do not have to pre-compile your code to get it to run. Your source code is loaded directly then compiled to native code at runtime by the VM using a JIT. As a developer writing JavaScript code and coming probably from a compiled language like C#, Java or ActionScript, you have to remember at all times that there will not be any optimizations done ahead of time by a <i>static</i> compiler. Everything will be figured out at <i>runtime</i> when you will be hitting refresh.</p><p>VMs like V8 introduced engines like <a href="http://blog.chromium.org/2010/12/new-crankshaft-for-v8.html">CrankShaft</a> which perform key optimizations at runtime like constant folding, inlining, or loop-invariant code motion that will help with performance. However, always keep in mind what you can do in your code to help with performance too. Throughout this article, we will cover key optimizations you can rely on to help your code perform better.</p><p><strong>Memo</strong></p><ul>
<li><strong>JavaScript is based on the ECMA-262 standard.</strong></li>
<li><strong>The latest revision implemented by most browsers is ECMAScript 5.1.</strong></li>
<li><strong>The latest revision of the ECMAScript specification is revision 6 called «&nbsp;Harmony&nbsp;».</strong></li>
<li><strong>JavaScript does not rely on a static compiler.</strong></li>
<li><strong>JavaScript source code is directly compiled to native code by the JIT (a component of the virtual machine).</strong></li>
<li><strong>Other languages like TypeScript, Dart or CoffeeScript and more are targeting JavaScript too.</strong></li>
</ul><h5><a name="tools"></a>Tools</h5><p>Feel free to use any text editor you want to write your JavaScript code. Examples in this article will be using the console from Chrome for small code samples to test things quickly. For bigger projects, WebStorm will be used. You can follow along using these tools or use your own. Here is below a set of popular tools to write JavaScript:</p><p>Let’s get started and write some code now.</p><h5><a name="repl"></a>REPL</h5><p>As a developer reading this, you will probably want to test small things quickly and iteratively. Traditionally, when using bytecode based languages, you would type your code, hit compile, bytecode would be generated and then executed. For every modification, you would change the source code, then hit compile again and observe the changes. With JavaScript, you could be using REPL and have a way more natural and flexible way to test things and compile them on the fly. So what does REPL stands for? It stands for <a href="http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop"><i>read-eval-print loop</i></a>. Some bytecode based languages like C#, F# offer a similar functionality to easily test some pieces of your code where you can type in the command line and evaluate pieces of you code quickly and naturally.</p><p>With Chrome Developer Tools or any other console available like Firebug with Firefox, you can use the console and just start typing some code. The figure below shows the Chrome console:</p><p><img alt="REPL" src="http://typedarray.org/wp-content/uploads/2013/03/figure-1.1.jpg" width="577" height="271" /></p><p>When pressing enter, your code is injected and executed. In our first example, when declaring a variable, the console will just return undefined as variable declarations return no value. Just referencing the variable we declared will automatically return its value:</p><p><img alt="REPL" src="http://typedarray.org/wp-content/uploads/2013/03/figure-1.2.jpg" width="578" height="273" /></p><p>If we want to retrieve the string length, we also get auto-completion directly from the console:</p><p><img alt="REPL" src="http://typedarray.org/wp-content/uploads/2013/03/figure-1.3.jpg" width="577" height="271" /></p><p>In the figure below, we retrieve the string length:</p><p><img alt="REPL" src="http://typedarray.org/wp-content/uploads/2013/03/figure-1.4.jpg" width="580" height="271" /></p><p>This provides a very nice way to test quickly some pieces of your code. Note that in the Chrome developer tools console for multiline entries, you will need to use the Shift+Enter since Enter triggers code execution. In the next figure, we define a foo function then execute it:</p><p><img alt="REPL" src="http://typedarray.org/wp-content/uploads/2013/03/figure-1.5.jpg" width="580" height="272" /></p><p>Note that with Firebug in Firefox, the console supports multiline code in an expanded editor view where Enter creates a new line and Shift+Enter executes it. Firefox also provides <a title="ScratchPad" href="https://blog.mozilla.org/devtools/2011/08/15/introducing-scratchpad/" target="_blank">ScratchPad</a> as part of their developer tools. In ScratchPad, JavaScript multi-line code can be entered and tested interactively by just selecting the lines needed and press Shift+F4 (MacOS) or CTRL+R (Windows). The figure below shows the ScratchPad window and the console displaying the result:</p><p><img alt="REPL" src="http://typedarray.org/wp-content/uploads/2013/03/figure-1.6.jpg" width="833" height="357" /></p><p><strong>Memo</strong></p><ul>
<li><strong>The JavaScript console allows you to test code interactively inside the browser.</strong></li>
<li><strong>Anything defined on the page can be overriden or added through the console.</strong></li>
<li><strong>This interactive mode is called «&nbsp;read evaluate print loop&nbsp;» known as REPL.</strong></li>
<li><strong>ScratchPad in Firefox offers a great REPL workflow.</strong></li>
</ul><h5><a name="start"></a>Getting started</h5><p>If you come from other languages like C#, C++ or ActionScript, you may have been used to installing lots of tools, compilers, debuggers. One of the very cool things with JavaScript is that all your really need is a text editor and a browser. When embedded in HTML, JavaScript code can be either inlined inside a script tag:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e867b068564092" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
&lt;script&gt;

// some javascript code

&lt;/script&gt;</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>&lt;script&gt;</span></p><p><span>// some javascript code</span></p><p><span>&lt;/script&gt;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0061 seconds] --><p>Or referenced and placed in external .js files, which is a better practice:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e86b1131576440" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
&lt;script src="js/main.js"&gt;&lt;/script&gt;</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>&lt;script </span><span>src</span><span>=</span><span>"js/main.js"</span><span>&gt;</span><span>&lt;/script&gt;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0008 seconds] --><p>By default, our JavaScript code will be executed synchronously in the order the browser parses the page, from top to bottom. As a result, placing your JavaScript code at the beginning of the page is discouraged; this would cause the browser to wait until the script is executed to start displaying anything on the page. For now, we will stick to a general good practice and place our code just before the end of the body tag:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e86ba882841231" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
...

&lt;script src="js/main.js"&gt;&lt;/script&gt;

&lt;/body&gt;</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>.</span><span>.</span><span>.</span></p><p><span>&lt;script </span><span>src</span><span>=</span><span>"js/main.js"</span><span>&gt;</span><span>&lt;/script&gt;</span></p><p><span>&lt;/body&gt;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0009 seconds] --><p>That way, content on the page be displayed first, and once the display list (DOM) is loaded, our code will be executed. This will also ensure that our scripts have access to the DOM and that all objects can be scripted. We will be spending some time on the order of execution of JavaScript in a future article about the DOM. HTML5 introduced some interesting new capabilities in terms of sequencing and order of JavaScript execution that we will cover too.</p><h5><a name="dynamic"></a>A dynamically typed language</h5><p>JavaScript is a dynamically typed language, meaning that any variable can hold any data type. If you are coming from a statically typed language, this may sound scary to you. In JavaScript there is no static typing and there will probably never be. Sadly, it is often perceived that having an explicit typing of variables is required to get type checking. It is actually not necessarily required. Types can be inferred (<a href="http://en.wikipedia.org/wiki/Type_inference">type-inference</a>) automatically and propagated everywhere and provide solid code completion and type checking even with languages like JavaScript. TypeScript from Microsoft is a good example of this.</p><div><p>Given the absence of a typing system, JavaScript will never enforce the type of a variable, so you would not be able to rely on types to implicitly perform conversions. Remember, JavaScript does not rely on a static compiler, the VM directly interprets the source code and compiles it to native code at runtime using the JIT. To create an array in JavaScript, you could use the new keyword with the Array function constructor:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e86c4620354234" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
var scores = new Array();</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>var</span><span> </span><span>scores</span><span> </span><span>=</span><span> </span><span>new</span><span> </span><span>Array</span><span>(</span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0009 seconds] --><p>Or simply (using the literal syntax):</p><!-- Crayon Syntax Highlighter v2.3.0 --><!-- [Format Time: 0.0006 seconds] --><p>Note that no types are specified. At runtime the scores variable will be evaluated as an array:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e86d3402810803" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
var scores = [];

// outputs: true
console.log ( scores instanceof Array );</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>var</span><span> </span><span>scores</span><span> </span><span>=</span><span> </span><span>[</span><span>]</span><span>;</span></p><p><span>// outputs: true</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>scores </span><span>instanceof</span><span> </span><span>Array</span><span> </span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0014 seconds] --><p>Because types cannot be enforced, variables can hold any type at anytime:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e86db275114609" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
// store an array
var scores = [];

// store a number
scores = 5;

// store an object
scores = {};&nbsp;

// store a string
scores = "Hello";</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// store an array</span></p><p><span>var</span><span> </span><span>scores</span><span> </span><span>=</span><span> </span><span>[</span><span>]</span><span>;</span></p><p><span>// store a number</span></p><p><span>scores</span><span> </span><span>=</span><span> </span><span>5</span><span>;</span></p><p><span>// store an object</span></p><p><span>scores</span><span> </span><span>=</span><span> </span><span>{</span><span>}</span><span>;</span>&nbsp;</p><p><span>// store a string</span></p><p><span>scores</span><span> </span><span>=</span><span> </span><span>"Hello"</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0017 seconds] --><p>If we try to call an undefined API, no errors will be captured at compile time given that there is no compilation happening statically:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e86e2353508676" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
var scores = [];&nbsp;

scores.foo();</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>var</span><span> </span><span>scores</span><span> </span><span>=</span><span> </span><span>[</span><span>]</span><span>;</span>&nbsp;</p><p><span>scores</span><span>.</span><span>foo</span><span>(</span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0010 seconds] --><p>Because the foo method is not available on Array, we will get a runtime exception:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e86ea054498320" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
Uncaught TypeError: Object&nbsp; has no method 'foo'</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>Uncaught </span><span>TypeError:</span><span> </span><span>Object</span>&nbsp;<span> </span><span>has </span><span>no </span><span>method</span><span> </span><span>'foo'</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0007 seconds] --><p>Same thing for even the simplest object:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e86f2595237836" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
var myObject = {};

myObject.foo();</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>var</span><span> </span><span>myObject</span><span> </span><span>=</span><span> </span><span>{</span><span>}</span><span>;</span></p><p><span>myObject</span><span>.</span><span>foo</span><span>(</span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0010 seconds] --><p>Which would trigger the following runtime exception:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e86f9292580029" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
Uncaught TypeError: Object&nbsp; has no method 'foo'</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>Uncaught </span><span>TypeError:</span><span> </span><span>Object</span>&nbsp;<span> </span><span>has </span><span>no </span><span>method</span><span> </span><span>'foo'</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0008 seconds] --><p>Browsers report errors like this one through the JavaScript console, and usually include the line that triggered the exception. The exception was uncaught in the example, but we update the code to catch it using the try catch clause:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e8700699676512" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
var scores = [];

try {
&nbsp; scores.foo();

} catch (e) {
&nbsp; console.log ('API not available!');
}</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>var</span><span> </span><span>scores</span><span> </span><span>=</span><span> </span><span>[</span><span>]</span><span>;</span></p><p><span>try</span><span> </span><span>{</span></p><p>&nbsp;<span> </span><span>scores</span><span>.</span><span>foo</span><span>(</span><span>)</span><span>;</span></p><p><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span>e</span><span>)</span><span> </span><span>{</span></p><p>&nbsp;<span> </span><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span>'API not available!'</span><span>)</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0020 seconds] --><p>We will get back to error handling soon, but for now let’s move for now on to some more essentials concepts like variable declaration.</p><p><strong>Memo</strong></p><ul>
<li><strong>JavaScript is a dynamically typed language.</strong></li>
<li><strong>No typing is required, types are evaluated at runtime.</strong></li>
<li><strong>Types cannot be enforced.</strong></li>
<li><strong>Therefore, a variable can hold any type at anytime.</strong></li>
<li><strong>If an object does not have an API available, the error will be triggered at runtime</strong>.</li>
</ul><h5><a name="variables-scope"></a>Variables and scope</h5><p>Variables are declared using the var keyword:</p><!-- Crayon Syntax Highlighter v2.3.0 --><!-- [Format Time: 0.0007 seconds] --><p>But omitting the var keyword will also work and declare the variable as global:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e8710865058276" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
// declare a global variable
score = 12;</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// declare a global variable</span></p><p><span>score</span><span> </span><span>=</span><span> </span><span>12</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0006 seconds] --><p>As you can imagine, this is not recommended and you should always use var when declaring variables. So why is that? The var keyword actually dictates the scope. In the code below we use a local variable inside the foo function, making it inaccessible from outside:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e8718572012671" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
function foo() {
    // declare the variable locally
&nbsp;&nbsp;&nbsp; var score = 12;

&nbsp;&nbsp;&nbsp; console.log ( score );
}

function foo2() {
&nbsp;&nbsp;&nbsp; console.log ( score );
}

// triggers: Uncaught ReferenceError: score is not defined
foo2();</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>function</span><span> </span><span>foo</span><span>(</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// declare the variable locally</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>var</span><span> </span><span>score</span><span> </span><span>=</span><span> </span><span>12</span><span>;</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>score</span><span> </span><span>)</span><span>;</span></p><p><span>}</span></p><p><span>function</span><span> </span><span>foo2</span><span>(</span><span>)</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>score</span><span> </span><span>)</span><span>;</span></p><p><span>}</span></p><p><span>// triggers: Uncaught ReferenceError: score is not defined</span></p><p><span>foo2</span><span>(</span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0028 seconds] --><p>Notice that when running the code above, the error is caught at runtime; remember that there is no static compiler involved which would catch this error ahead of time.&nbsp;Omitting the var keyword would make the variable global to all functions:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e8720142681798" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
function foo() {
&nbsp;&nbsp; &nbsp;// define the variable globally
&nbsp;&nbsp;&nbsp; score = 12;

&nbsp;&nbsp;&nbsp; console.log ( score );
}

function foo2() {
&nbsp;&nbsp;&nbsp; console.log ( score );
}

// outputs: 12
foo();

// outputs: 12
foo2();</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>function</span><span> </span><span>foo</span><span>(</span><span>)</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;<span> </span>&nbsp;<span>// define the variable globally</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>score</span><span> </span><span>=</span><span> </span><span>12</span><span>;</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>score</span><span> </span><span>)</span><span>;</span></p><p><span>}</span></p><p><span>function</span><span> </span><span>foo2</span><span>(</span><span>)</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>score</span><span> </span><span>)</span><span>;</span></p><p><span>}</span></p><p><span>// outputs: 12</span></p><p><span>foo</span><span>(</span><span>)</span><span>;</span></p><p><span>// outputs: 12</span></p><p><span>foo2</span><span>(</span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0030 seconds] --><p>Another important behavior when working with variables is hoisting. This behavior allows you to reference a variable before it is defined. Trying to reference an nonexistent variable will trigger an exception:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e8727956332175" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
// triggers: Uncaught ReferenceError: a is not defined
console.log ( a );</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// triggers: Uncaught ReferenceError: a is not defined</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>a</span><span> </span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0008 seconds] --><p>But, referencing a variable declared later with var works, returning its default, unset value undefined:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e872f749013649" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
// outputs: undefined
console.log ( a );

// variable a declared later
var a = 'Hello';</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// outputs: undefined</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>a</span><span> </span><span>)</span><span>;</span></p><p><span>// variable a declared later</span></p><p><span>var</span><span> </span><span>a</span><span> </span><span>=</span><span> </span><span>'Hello'</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0013 seconds] --><p>What happens behind the scenes is that all the variables are moved to the top of the context block and declared first, but initialization happens where the variables are defined by our code. We will see in an upcoming section that the same behavior applies to functions too. JavaScript 1.5 introduces the concept of constants that we also have in some other languages. Constants are very important and should actually be the default in most of your programs.</p><p>Mutability is a common source of bugs. Some languages like functional programming languages rely on immutability by default. Using the keyword const will guarantee your value cannot be changed after initialization. In the code below, we define a constant named LIMIT:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e8737991570453" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
// define a constant
const LIMIT = 512;

// outputs: 512
console.log ( LIMIT );</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// define a constant</span></p><p><span>const</span><span> </span><span>LIMIT</span><span> </span><span>=</span><span> </span><span>512</span><span>;</span></p><p><span>// outputs: 512</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>LIMIT</span><span> </span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0012 seconds] --><p>Note that our constant is uppercase, which is a best practice to easily spot immutability. If you try to change the value at runtime, the original value is preserved:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e873f935097259" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
// define a constant
const LIMIT = 512;

// outputs: 512
console.log ( LIMIT );&nbsp;

// try to overwrite
LIMIT = 45;

// outputs: 512
console.log ( LIMIT );</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// define a constant</span></p><p><span>const</span><span> </span><span>LIMIT</span><span> </span><span>=</span><span> </span><span>512</span><span>;</span></p><p><span>// outputs: 512</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>LIMIT</span><span> </span><span>)</span><span>;</span>&nbsp;</p><p><span>// try to overwrite</span></p><p><span>LIMIT</span><span> </span><span>=</span><span> </span><span>45</span><span>;</span></p><p><span>// outputs: 512</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>LIMIT</span><span> </span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0021 seconds] --><p>You may be surprised that no runtime exception is triggered. Actually, some browsers do, like Firefox, since version 13. Unfortunately, as of today, the const keyword is supported in Firefox and Chrome but not in Safari, or IE 9 and 10, which dramatically reduces the reach of this feature. As a result, the const keyword should not be used if you intend to reach a broad audience and a wide variety of browsers. ECMAScript 6 defines const but with different semantics and similar to variables declared with the let statement, where constants declared as const will be block scoped (a concept we will cover in the Functions section).</p><p><strong>Memo</strong></p><ul>
<li><strong>The var keyword defines the scope.</strong></li>
<li><strong>Omitting the var keyword will make the variable global.</strong></li>
<li><strong>It is always recommend to use local variables inside functions to prevent conflicts and introduction of states.</strong></li>
<li><strong>The const keyword introduced in JavaScript 1.5 introduces immutability but is not widely supported yet.</strong></li>
<li><strong>Constants are part of the Harmony proposal (ECMAScript 6).</strong></li>
</ul><h5><a name="conversions"></a>Type conversions</h5><p>As we saw earlier, because of JavaScript’s dynamic nature, types cannot be enforced. This can be a limitation for debugging, because any variable can basically hold any type, you may be taken by surprise if, for instance, no runtime exception will be triggered due to an implicit runtime conversion failing. JavaScript actually performs implicit type conversions at runtime at different occasions. First, when using numeric and string values with the + operator, the String type has precedence and concatenation is always performed:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e8748529069272" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
// gives: "3hello";
var a = 3 + "hello";

// gives: "hellotrue"
var b = "hello" + true;</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// gives: "3hello";</span></p><p><span>var</span><span> </span><span>a</span><span> </span><span>=</span><span> </span><span>3</span><span> </span><span>+</span><span> </span><span>"hello"</span><span>;</span></p><p><span>// gives: "hellotrue"</span></p><p><span>var</span><span> </span><span>b</span><span> </span><span>=</span><span> </span><span>"hello"</span><span> </span><span>+</span><span> </span><span>true</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0015 seconds] --><p>When using other arithmetic operators, the Number type has precedence:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e8750140462781" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
// outputs: 9
var a = 10 - "1";

// outputs: 20
var b = 10 * "2";

// outputs: 5
var c = 10 / "2";</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// outputs: 9</span></p><p><span>var</span><span> </span><span>a</span><span> </span><span>=</span><span> </span><span>10</span><span> </span><span>-</span><span> </span><span>"1"</span><span>;</span></p><p><span>// outputs: 20</span></p><p><span>var</span><span> </span><span>b</span><span> </span><span>=</span><span> </span><span>10</span><span> </span><span>*</span><span> </span><span>"2"</span><span>;</span></p><p><span>// outputs: 5</span></p><p><span>var</span><span> </span><span>c</span><span> </span><span>=</span><span> </span><span>10</span><span> </span><span>/</span><span> </span><span>"2"</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0019 seconds] --><p>Implicit conversions to Number will also happen when using the == or != operators with the Number, String and Boolean types:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e8757644344095" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
// outputs: true
console.log ("1" == 1); // equals to 1 == 1

// outputs: true
console.log ("1" == true); // equals to 1 == 1

// outputs: false
console.log ("1" != 1); // equals to 1 != 1

// outputs: false
console.log ("1" != true); // equals to 1 != 1

// outputs: false
console.log ("true" == true); // equals to NaN == 1</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// outputs: true</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span>"1"</span><span> </span><span>==</span><span> </span><span>1</span><span>)</span><span>;</span><span> </span><span>// equals to 1 == 1</span></p><p><span>// outputs: true</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span>"1"</span><span> </span><span>==</span><span> </span><span>true</span><span>)</span><span>;</span><span> </span><span>// equals to 1 == 1</span></p><p><span>// outputs: false</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span>"1"</span><span> </span><span>!=</span><span> </span><span>1</span><span>)</span><span>;</span><span> </span><span>// equals to 1 != 1</span></p><p><span>// outputs: false</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span>"1"</span><span> </span><span>!=</span><span> </span><span>true</span><span>)</span><span>;</span><span> </span><span>// equals to 1 != 1</span></p><p><span>// outputs: false</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span>"true"</span><span> </span><span>==</span><span> </span><span>true</span><span>)</span><span>;</span><span> </span><span>// equals to NaN == 1</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0034 seconds] --><p>To avoid implicit conversions and verify that both types and values are equal, you can rely on the strict equality (===) or strict inequality (!==) operators, which will never perform automatic conversion implicitly:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e875f929560150" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
// outputs: false
console.log ("1" === 1);

// outputs: false
console.log ("1" === true);

// outputs: true
console.log ("1" !== 1);

// outputs: true
console.log ("1" !== true);</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// outputs: false</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span>"1"</span><span> </span><span>===</span><span> </span><span>1</span><span>)</span><span>;</span></p><p><span>// outputs: false</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span>"1"</span><span> </span><span>===</span><span> </span><span>true</span><span>)</span><span>;</span></p><p><span>// outputs: true</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span>"1"</span><span> </span><span>!==</span><span> </span><span>1</span><span>)</span><span>;</span></p><p><span>// outputs: true</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span>"1"</span><span> </span><span>!==</span><span> </span><span>true</span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0036 seconds] --><p>It is therefore a good practice to use the strict operators to reduce the risks of ambiguity. If we need to convert data explicitly, we can use the appropriates types conversion functions:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e8767696677681" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
// convert a string to a number
var a = Number ("3");

// convert a boolean to a number
var b = Number (true);

// tries to convert a non numeric string to a number
var c = Number ("Hello");

// outputs: 3 1 "NaN"
console.log ( a, b, c );</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// convert a string to a number</span></p><p><span>var</span><span> </span><span>a</span><span> </span><span>=</span><span> </span><span>Number</span><span> </span><span>(</span><span>"3"</span><span>)</span><span>;</span></p><p><span>// convert a boolean to a number</span></p><p><span>var</span><span> </span><span>b</span><span> </span><span>=</span><span> </span><span>Number</span><span> </span><span>(</span><span>true</span><span>)</span><span>;</span></p><p><span>// tries to convert a non numeric string to a number</span></p><p><span>var</span><span> </span><span>c</span><span> </span><span>=</span><span> </span><span>Number</span><span> </span><span>(</span><span>"Hello"</span><span>)</span><span>;</span></p><p><span>// outputs: 3 1 "NaN"</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>a</span><span>,</span><span> </span><span>b</span><span>,</span><span> </span><span>c</span><span> </span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0036 seconds] --><p>In the same way, converting a string to a number can be done using the parseInt and parseFloat functions:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e876f155653906" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
// convert a string to a number
var a = parseInt ( "4 chicken" );&nbsp;

// convert a boolean to a number
var b = parseFloat ( "1.5 pint" );

// outputs: 4 1.5
console.log ( a, b );</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// convert a string to a number</span></p><p><span>var</span><span> </span><span>a</span><span> </span><span>=</span><span> </span><span>parseInt</span><span> </span><span>(</span><span> </span><span>"4 chicken"</span><span> </span><span>)</span><span>;</span>&nbsp;</p><p><span>// convert a boolean to a number</span></p><p><span>var</span><span> </span><span>b</span><span> </span><span>=</span><span> </span><span>parseFloat</span><span> </span><span>(</span><span> </span><span>"1.5 pint"</span><span> </span><span>)</span><span>;</span></p><p><span>// outputs: 4 1.5</span></p><p><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>a</span><span>,</span><span> </span><span>b</span><span> </span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0022 seconds] --><p>We saw earlier that JavaScript can throw runtime exceptions, let’s spend a few minutes on this now.</p><p><strong>Memo</strong></p><ul>
<li><strong>Implicit conversion to String is performed when using the + operator.</strong></li>
<li><strong>Implicit conversion to Number is performed when using other arithmetic operators.</strong></li>
<li><strong>Implicit conversion to Number is performed when using the equality and inequality operators with the Number, Boolean and String types.</strong></li>
<li><strong>To avoid implicit conversions, it is recommended to use the strict equality and inequality operators.</strong></li>
<li><strong>Explicit conversion can be done using the proper conversion functions.</strong></li>
</ul><h5><a name="exceptions"></a>Runtime exceptions</h5><p>In all projects we have to deal with runtime exceptions. In JavaScript, as we saw earlier, these can be triggered by the runtime itself or explicitly by our code. For example, if you try to call a method not available on an object, this will trigger a runtime exception:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e8777408350317" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
var scores = [];

// triggers: Uncaught TypeError: Object&nbsp; has no method 'foo'
scores.foo();</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>var</span><span> </span><span>scores</span><span> </span><span>=</span><span> </span><span>[</span><span>]</span><span>;</span></p><p><span>// triggers: Uncaught TypeError: Object&nbsp; has no method 'foo'</span></p><p><span>scores</span><span>.</span><span>foo</span><span>(</span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0011 seconds] --><p>At any time, if we need to throw an exception ourselves, we can use the throw keyword with Error object:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e877f390248189" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
throw new Error ('Oops, there is a problem');</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>throw</span><span> </span><span>new</span><span> </span><span>Error</span><span> </span><span>(</span><span>'Oops, there is a problem'</span><span>)</span><span>;</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0008 seconds] --><p>As expected, a runtime exception needs to be handled otherwise the console will output the following message:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e878c570128114" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
Uncaught Error: Oops, there is a problem</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>Uncaught </span><span>Error:</span><span> </span><span>Oops</span><span>,</span><span> </span><span>there </span><span>is</span><span> </span><span>a</span><span> </span><span>problem</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0009 seconds] --><p>To handle errors, we can use the try catch statement. The message property in thrown Errors contains the error message:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e8795492609466" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
try {
&nbsp;&nbsp;&nbsp; throw new Error ('Oops, there is a problem');

} catch ( e ) {
&nbsp;&nbsp; // outputs: Oops, there is a problem catched!
&nbsp;&nbsp;&nbsp;console.log ( e.message + ' catched!');
}</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>try</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>throw</span><span> </span><span>new</span><span> </span><span>Error</span><span> </span><span>(</span><span>'Oops, there is a problem'</span><span>)</span><span>;</span></p><p><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span> </span><span>e</span><span> </span><span>)</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;<span> </span><span>// outputs: Oops, there is a problem catched!</span></p><p>&nbsp;&nbsp;&nbsp;<span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>e</span><span>.</span><span>message</span><span> </span><span>+</span><span> </span><span>' catched!'</span><span>)</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0021 seconds] --><p>If we need some logic to be executed whether or not an error is thrown after code has executed in the try block, we use the finally statement:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e879d702741781" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
try {
&nbsp;&nbsp;&nbsp; throw new Error ('Oops, there is a problem');

} catch ( e ) {
&nbsp;&nbsp;&nbsp; // outputs: Oops, there is a problem catched!
&nbsp;&nbsp;&nbsp; console.log ( e.message + ' catched!');

} finally {
&nbsp;&nbsp;&nbsp; // outputs: Code triggered at all times
&nbsp;&nbsp;&nbsp; console.log ( 'Code triggered at all times' );
}</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>try</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>throw</span><span> </span><span>new</span><span> </span><span>Error</span><span> </span><span>(</span><span>'Oops, there is a problem'</span><span>)</span><span>;</span></p><p><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span> </span><span>e</span><span> </span><span>)</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>// outputs: Oops, there is a problem catched!</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>e</span><span>.</span><span>message</span><span> </span><span>+</span><span> </span><span>' catched!'</span><span>)</span><span>;</span></p><p><span>}</span><span> </span><span>finally</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>// outputs: Code triggered at all times</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>'Code triggered at all times'</span><span> </span><span>)</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0031 seconds] --><p>Note that conditional catch cannot be done the same way as in languages like ActionScript or C#, by placing the appropriate type in the catch block to redirect the exception automatically. In JavaScript we use a single catch block and have the appropriate type test inside that same block:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e87a6579390805" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
try {
&nbsp;&nbsp;&nbsp; throw new Error ('Oops, there is a problem');

} catch ( e ) {
&nbsp;&nbsp;&nbsp; if ( e instanceof BufferError ) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // handle buffer error

&nbsp;&nbsp;&nbsp; } else if ( e instanceof ParseError ) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // handle parse error
&nbsp;&nbsp;&nbsp; }
} finally {
&nbsp;&nbsp;&nbsp; // outputs: Code triggered at all times
&nbsp;&nbsp;&nbsp; console.log ( 'Code triggered at all times' );
}</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>try</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>throw</span><span> </span><span>new</span><span> </span><span>Error</span><span> </span><span>(</span><span>'Oops, there is a problem'</span><span>)</span><span>;</span></p><p><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span> </span><span>e</span><span> </span><span>)</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>if</span><span> </span><span>(</span><span> </span><span>e</span><span> </span><span>instanceof</span><span> </span><span>BufferError</span><span> </span><span>)</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span> </span><span>// handle buffer error</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>}</span><span> </span><span>else</span><span> </span><span>if</span><span> </span><span>(</span><span> </span><span>e</span><span> </span><span>instanceof</span><span> </span><span>ParseError</span><span> </span><span>)</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span> </span><span>// handle parse error</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>}</span></p><p><span>}</span><span> </span><span>finally</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>// outputs: Code triggered at all times</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>'Code triggered at all times'</span><span> </span><span>)</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0042 seconds] --><p>Note that the JavaScript specification details the ability to inline the if directly inside the catch block.</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e87af964888128" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
try {
&nbsp;&nbsp;&nbsp; throw new Error ('Oops, there is a problem');

} catch ( e if e instanceof BufferError ) {
&nbsp;&nbsp;&nbsp; // handle buffer error

} catch ( e if e instanceof ParseError ) {
&nbsp;&nbsp;&nbsp; // handle parsing error

} finally {
&nbsp;&nbsp;&nbsp; // outputs: Code triggered at all times
&nbsp;&nbsp;&nbsp; console.log ( 'Code triggered at all times' );
}</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>try</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>throw</span><span> </span><span>new</span><span> </span><span>Error</span><span> </span><span>(</span><span>'Oops, there is a problem'</span><span>)</span><span>;</span></p><p><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span> </span><span>e</span><span> </span><span>if</span><span> </span><span>e</span><span> </span><span>instanceof</span><span> </span><span>BufferError</span><span> </span><span>)</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>// handle buffer error</span></p><p><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span> </span><span>e</span><span> </span><span>if</span><span> </span><span>e</span><span> </span><span>instanceof</span><span> </span><span>ParseError</span><span> </span><span>)</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>// handle parsing error</span></p><p><span>}</span><span> </span><span>finally</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>// outputs: Code triggered at all times</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>console</span><span>.</span><span>log</span><span> </span><span>(</span><span> </span><span>'Code triggered at all times'</span><span> </span><span>)</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0039 seconds] --><p>Unfortunately, this feature is not part of the ECMAScript specification and will not work in most browsers except Firefox, which again has excellent support for the latest JavaScript’s features. You can rely on Firefox for testing this feature, but don’t rely on it for a real project. What about performance? In JavaScript, exception handling does not have much impact on performance either, except if you use try catch inside a function. So make sure you don’t do this:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e87b7776717199" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
function test() {
&nbsp;&nbsp;&nbsp; try {
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var s = 0;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for (var i = 0; i &lt; 10000; i++) s = i;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return s;
&nbsp;&nbsp;&nbsp; } catch ( e ) {};
}</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>function</span><span> </span><span>test</span><span>(</span><span>)</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>try</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span>&nbsp;&nbsp;&nbsp;<span> </span><span>var</span><span> </span><span>s</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span>&nbsp;&nbsp;&nbsp;<span> </span><span>for</span><span> </span><span>(</span><span>var</span><span> </span><span>i</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span><span> </span><span>i</span><span> </span><span>&lt;</span><span> </span><span>10000</span><span>;</span><span> </span><span>i</span><span>++</span><span>)</span><span> </span><span>s</span><span> </span><span>=</span><span> </span><span>i</span><span>;</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span>&nbsp;&nbsp;&nbsp;<span> </span><span>return</span><span> </span><span>s</span><span>;</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span> </span><span>e</span><span> </span><span>)</span><span> </span><span>{</span><span>}</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</table></div></div><!-- [Format Time: 0.0034 seconds] --><p>But instead, move the try catch outside of the function:</p><!-- Crayon Syntax Highlighter v2.3.0 --><div id="crayon-52690169e87bf922658653" data-settings=" minimize scroll-mouseover"><p><textarea wrap="off" data-settings="dblclick" readonly="">
function test() {
&nbsp;&nbsp;&nbsp; var s = 0;
&nbsp;&nbsp;&nbsp; for (var i = 0; i &lt; 10000; i++) s = i;
&nbsp;&nbsp;&nbsp; return s;
}

try {
&nbsp;&nbsp;&nbsp; test();
} catch ( e ) {};</textarea></p><div><table>
					<tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>function</span><span> </span><span>test</span><span>(</span><span>)</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>var</span><span> </span><span>s</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>for</span><span> </span><span>(</span><span>var</span><span> </span><span>i</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span><span> </span><span>i</span><span> </span><span>&lt;</span><span> </span><span>10000</span><span>;</span><span> </span><span>i</span><span>++</span><span>)</span><span> </span><span>s</span><span> </span><span>=</span><span> </span><span>i</span><span>;</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>return</span><span> </span><span>s</span><span>;</span></p><p><span>}</span></p><p><span>try</span><span> </span><span>{</span></p><p>&nbsp;&nbsp;&nbsp;<span> </span><span>test</span><span>(</span><span>)</span><span>;</span></p><p><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span> </span><span>e</span><span> </span><span>)</span><span> </span></p></div></td></tr></table></div></div></div></div></div>
<script>var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34802167-1']); _gaq.push(['_setDomainName', 'liuzhe.co']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })();</script></body>
</html>