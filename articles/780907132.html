<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Performance Calendar</title>
<link rel="stylesheet" href="../css/article.css" />
</head>
<body>
<div class="m-content">
<h1>Performance Calendar</h1>
<div class="entry unit"><p>HTTPS is a hot topic lately. Google indicated earlier this year that they will use HTTPS as a <a href="http://googlewebmastercentral.blogspot.co.uk/2014/08/https-as-ranking-signal.html">ranking signal</a> in their search results, and along with the <a href="http://en.wikipedia.org/wiki/Heartbleed">Heartbleed</a> and <a href="https://www.openssl.org/~bodo/ssl-poodle.pdf">Poodle</a> vulnerabilities, HTTPS has been generating a lot of interest. </p><span>
</span><p>Vulnerabilities aside, the goal of HTTPS is to ensure that we deliver safer, encrypted data to our users. Moving to HTTPS is a great step forward and reduces the chance of prying eyes tampering with sensitive information.  </p><span>
</span><p>We still have a long way to go towards HTTPS being available on all websites, but things are looking positive. According to the <a href="http://httparchive.org/trends.php#perHttps">HTTP Archive</a>, there has been an active growth in the number of HTTPS requests across the web by almost 300% in the last two years from 4% to 13%. </p><span>
</span><p>How does this all fit in with web performance? Well, HTTPS requests differ from plain HTTP requests in that they need to perform a few extra handshakes in order to verify the authenticity of the request. These handshakes typically incur an overhead in terms of network latency, and if your server is not configured correctly, this extra latency can have an effect on web page performance.</p><span>
</span><p>As developers, there are a number of techniques that you can use to ensure that the HTTPS configuration is as efficient as possible.</p><span>
</span><h3 id="verify_your_certificate_configuration">Verify your Certificate Configuration</h3><span>
</span><p>Incorrectly configured servers add extra complexity to the HTTPS handshake process. This added complexity can often mean that extra handshakes and more round-trips need to take place, increasing the network latency.</p><span>
</span><p>Run your site through an SSL server test such as <a href="https://www.ssllabs.com/ssltest/">ssllabs.com</a> to verify that you have configured your server and certificate correctly.</p><span>
</span><p><img src="http://a43d55f6a02c4be185ce-9cfa4cf7c673a59966ad8296f4c88804.r44.cf3.rackcdn.com/HTTPS-Perf/verify-certificate.png" alt="Verify SSL certificate" title="" /></p><span>
</span><p>Ideally, you should be aiming for an A rating or higher. The more efficient your certificate configuration is, the faster your requests will be.</p><span>
</span><h3 id="http_strict_transport_security_hsts">HTTP Strict Transport Security (HSTS)</h3><span>
</span><p>Modern browsers are starting to support a new header called <strong>HTTP Strict Transport Security</strong> and this header prevents any communications from being sent over HTTP to the specified domain. The browser redirects from HTTP to HTTPS client side, without ever touching the network. This <a href="http://www.html5rocks.com/en/tutorials/security/transport-layer-security/#closing-the-open-window">header</a> is great because all redirects take place client-side and it means that latency and extra round trips won’t affect web page performance.</p><span>
</span><p>The best part about the HTTP Strict Transport Security header is that it is relatively easy to implement. Much like a HTTP caching header, you set a max-age for the HSTS to expire in seconds. It might look a little something like this:</p><span>
</span><p><img src="http://a43d55f6a02c4be185ce-9cfa4cf7c673a59966ad8296f4c88804.r44.cf3.rackcdn.com/strict-transport-layer-https.png" alt="HTTP Strict Transport Security header" title="" /></p><span>
</span><p>According to the <a href="http://bigqueri.es/t/how-many-resources-have-x-frame-options-strict-transport-security-or-content-security-policy-headers-for-web-app-security/155">HTTP Archive</a>, currently less than 1% of all requests use this header. Start using this header today as it is an easy win and can make a difference to the performance of your websites when applicable.</p><span>
</span><h3 id="caching">Caching</h3><span>
</span><p><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching?hl=en">HTTP caching</a> is a well-known practice that involves caching and reusing resources that have previously been fetched by the browser. HTTP caching is great because it means that once the resources have been saved locally, and the user revisits the same page or navigates to another page, the browser won’t need to request the file again from the server, but rather fetch it from disk. This saves time and network latency.</p><span>
</span><p>It’s important to remember that you don’t want to cache <em>everything</em> that is returned over HTTPS. This is because certain resources may contain sensitive data that are specific to a user. Most modern browsers will store HTTPS content on disk unless the server specificically opts-out. I recommend reading the <a href="https://securityevaluators.com/knowledge/case_studies/caching/">following article</a> for more information on caching policies in different browsers. Use HTTP caching wisely and you can save unnecessary requests and associated HTTPS handshakes. Cache is king!</p><span>
</span><h3 id="keep_alive">Keep-alive</h3><span>
</span><p>HTTP Keep-alive uses a single TCP connection to send and receive multiple HTTP requests/responses, as opposed to opening a new connection for every single request/response pair. Certain servers may have HTTP keep-alive disabled on SSL connections. This isn’t ideal, because it means every single HTTP request is going to take 3 round-trips before even asking for data. If you have keep-alive enabled, it means that you only pay the cost of the handshake overhead once, instead of every time a resource is requested.</p><span>
</span><p><img src="http://a43d55f6a02c4be185ce-9cfa4cf7c673a59966ad8296f4c88804.r44.cf3.rackcdn.com/HTTPS-Perf/https-keep-alive.png" alt="HTTP Keep alive" title="" /></p><span>
</span><p>Keep-alive is enabled by default on most servers, but it is important to keep an eye on your connections and ensure that you aren’t closing them and incurring extra overhead.</p><span>
</span><h3 id="avoid_mixed_content">Avoid mixed content</h3><span>
</span><p>If an HTTPS page includes files such as JavaScript or CSS that are retrieved via regular HTTP instead of HTTPS, then the connection is only partly encrypted. This unencrypted content is accessible to sniffers and when a web page contains both HTTPS and HTTP content, it is considered to be a mixed content page. You may have been presented with an alert box similar to the following:</p><span>
</span><p><img src="http://a43d55f6a02c4be185ce-9cfa4cf7c673a59966ad8296f4c88804.r44.cf3.rackcdn.com/HTTPS-Perf/mixed-content-warning.png" alt="Mixed Content Warning" title="" /></p><span>
</span><p>According to a <a href="http://bigqueri.es/t/how-many-https-websites-are-using-mixed-content/244/2?u=deanhume">recent study</a>, over 40% of HTTPS websites were found to have at least one type of mixed content. In some browsers, this blocks further downloads until the user responds to the alert, and provides a jarring experience for your users. It is definitely something to fix!</p><span>
</span><h3 id="conclusion">Conclusion</h3><span>
</span><p>HTTPS adoption is growing around the world, and it’s a great step towards offering safe and secure data for our users. It’s also important to remember that web performance is a key part of HTTPS. </p><span>
</span><p>If you would like to read more about how you can ensure that you deliver a fast and speedy experience over HTTPS, I recommend watching Ilya Grigorik’s video entitled “<a href="http://www.youtube.com/watch?v=0EB7zh_7UE4">Is TLS fast yet?</a>” and also taking a look at the <a href="https://docs.google.com/presentation/d/10iszJMl_WOJnfzdWal4NGHg-O6tcigxde2KY_F-yREc/present?slide=id.p19">following slides</a>.</p><span>
</span><p>There is also a great website called <a href="https://istlsfastyet.com/">istlsfastyet.com</a> that goes into great detail about HTTPS and web performance.</p><span>
</span></div></div>
<script>var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34802167-1']); _gaq.push(['_setDomainName', 'liuzhe.co']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })();</script></body>
</html>