
<!DOCTYPE html>
<html>
<head>
    <title> 揭开 iOS 7 之 Multipath TCP 的面纱 | I'm TualatriX </title>
    <link rel="alternate" type="application/rss+xml" title="订阅 TualatriX Feed" href="http://feeds.feedburner.com/tualatrix" />
    <link rel="pingback" href="http://imtx.me/xmlrpc/" />
    <link rel="shortcut icon" type="image/ico" href="/static/img/favicon.ico" />
    <meta name="google-site-verification" content="dQrNwIxyr9oBaxexqgzQKlenOC-d-7VmT_asQEizeJU" />
    <link href="/static/css/imtx-style.c0a91332fa21.css" rel="stylesheet" type="text/css" media="screen" />
    
    <meta name="keywords" content="iOS,Multipath-TCP">
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-503846-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
</head>
        
<body>
    <div id="bgcontain"> 
        <div id="header">
            <h1><a href="/">I'm TualatriX!</a></h1>
            <form action="/search/" method="GET">
            <div>
                <input type="text" value="Search..." onfocus="if (value =='Search...'){value =''}" onblur="if (value ==''){value='Search...'}" name="s" id="s" />
                <input type="image" id="searchsubmit" value="Search" src="/static/css/images/search.gif" />
            </div>
            </form>
        </div> 

        <div id="menu">
        

<ul>
<li class="current_page_item"><a href="/" title="Home">Home</a></li>


    <li class="page_item"><a href="/comments/" title="Comments">Comments</a></li>


	<li class="page_item"><a href="/project/" title="Projects">Projects</a></li>
	

	<li class="page_item"><a href="/event/" title="Event">Event</a></li>
	

	<li class="page_item"><a href="/about/" title="About">About</a></li>
	

<li id="pattern"></li>
</ul>

        </div>
        <div class="contain">
            <div id="content" class="narrowcolumn">
                
    <div class="post" id="post-1852">
    
<ul class="date">
    <li class="day">21</li>
    <li class="month">Sep</li>
</ul>

<ul class="title">
    <li class="topic"><a href="/archives/1852.html" rel="bookmark" title="Permanent Link to 揭开 iOS 7 之 Multipath TCP 的面纱">揭开 iOS 7 之 Multipath TCP 的面纱</a></li>
    <li class="postmeta">Post by TualatriX at 2013 . Category: <a href="/archives/category/operation-system/">Operation System</a>.  2184 Views. <a href="/archives/1852.html#comments">14 Comments </a> </li> </ul>

    <div class="clear"></div>
    <div class="entry">
        
        
            <p>看到中文圈似乎讨论 iOS 7 的这个特性的还不多，于是我稍微研究了一下这个「Mutlipath TCP」，写点心得。过程是这样的：</p>
<p>
            <p><span id="more-1852"></span></p>
            </p>
<p>Olivier Bonaventure 通过&nbsp;Wireshark （一个网络数据包监控工具）发现了他升级了 iOS 7 的 iPad 在使用 Siri 的时候会建立 Mutlipath TCP 连接，由此断定 iOS 7 已经内置了 Mutlipath TCP 的支持。见《<a href="http://perso.uclouvain.be/olivier.bonaventure/blog/html/2013/09/18/mptcp.html">Apple seems to also believe in Multipath TCP</a>》</p>
<p>Mutlipath TCP，是一套基于当前 TCP/IP 协议的一个扩展，所谓扩展即是能兼容当前协议，又能带来不少新特性。那么 Multipath TCP 有什么特别之处呢？这里通过一个简单的例子来说明好了。</p>
<blockquote>假如我手中的 iPhone 同时开启了 3G 和 WiFi 连接（大多数情况也是这样），这个时候我通过 App Store 更新一个 100M 的软件。按照以往的情况，App Store 的软件更新是会优先通过 WiFi 进行的，3G 在此刻是闲置状态。</blockquote>
<blockquote>但是在 Multipath TCP 的支援下，尽管只通过 App Store 更新一个软件，建立起了一个网络连接，但是它却可以同时利用 3G 和 WiFi 建立 Mutlpath 连接，通过多点优化网络下载，且互为备份。</blockquote>
<blockquote>假如这个时候 WiFi 断了，以前的情况是，App Store 更新中断，需要人工干预恢复或重新下载。而在 Mutlipath TCP 的优化下，只要 3G 没断，App Store 就能继续更新下载。除非 3G 也断了，才宣告此次连接失败。</blockquote>
<p>总之，在 Multipath TCP 的支持下，终端设备可以同时利用多个网络设备达到优化网络连接速度、稳定性，一个网络的中断也不会影响全局，大大增强了设备的可移动性和连接可靠性。而在服务端，特别是数据中心层面，则可以利用 Multipath TCP 利用多个网络设置来大大增强网络的吞吐量。</p>
<p>可以说，Multipath TCP 就是 Internet 的未来。</p>
<p>那么，Multipath TCP 现在的发展状况如何呢？这可是一个大项目，研究并努力了5年，直到在2013年初才正式制定完成，不过很快相关的实现和利用都来了：</p>
<ul>
<li>Linux 内核已经有了一个单独实现的 Multipath TCP 0.87，基于Linux 3.10，只是一个实验分支，不知道什么时候才会合并到主干；</li>
<li>iOS 7 是首个正式采用 Multipath TCP 的商用操作系统，在这里可以看到，Apple 拥抱和利用新技术是多么的迅速。另外 iPhone 5s 的 A7 64 位芯片也算是一项。</li>
</ul>
<p>Multipath TCP 是可以预见的接下来 Internet 进化的一个新方向，虽然普通用户不会感受到它带来和变化，但是整个网络系统将在它的支援下更好地利用资源、更大的吞吐量以及带来更棒的可靠性。</p>
<p>参考：</p>
<ul>
<li>在 Linux 上演示如何使用 Multipah TCP 带来吞吐量的大大提升：<a href="http://multipath-tcp.org/pmwiki.php?n=Main.50Gbps">http://multipath-tcp.org/pmwiki.php?n=Main.50Gbps</a></li>
<li>在 Linux 桌面上演示 Multipath TCP 带来多设备利用带来的网络连接可靠和持续性：<a href="http://www.youtube.com/watch?v=VWN0ctPi5cw">http://www.youtube.com/watch?v=VWN0ctPi5cw</a></li>
<li>更多可见：<a href="http://multipath-tcp.org">http://multipath-tcp.org</a></li>
</ul>
        
        

        <p>
        
        <div id="tags">Tag: <a href="/tag/iOS/">iOS</a>, <a href="/tag/Multipath-TCP/">Multipath-TCP</a>. </div>
        
        </p>
        <p class="meta"> 
        
        <small> &raquo; <a href="#comments">You can leave a comment.</a></small>
        
        </p>
    </div>
</div>
    
    




	<h3>1 Pingbacks</h3>
	<div class="b-pingback">
	
			<li class="b-meta">
            <a href="/archives/1852.html#pingback-552"></a>Sep 22, 2013: <a name="pingback-552" href="http://www.codenong.com/214.html" class="b-permlink">
揭开 iOS 7 之 Multipath TCP 的面纱 &amp;#8211; 码农们的博客</a>
			</li>
	
	</div>


    
    


<h3 id="comments">14 Comments</h3>

<ol class="commentlist">
<li class="comment even thread-even depth-1" id="comment-32395">
<div id="div-comment-32395"><div class="comment-author vcard">Jason</div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32395">2013 September 22, 10:47</a></div>
<p><p>&quot;互为备份&quot;是指在有wifi的情况下3g也要跑流量么？</p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32395#respond" onclick='return addComment.moveForm("div-comment-32395", "32395", "respond")'>Reply</a></div></div>

<ul class="children">
<li class="comment odd depth-2" id="comment-32397">
<div id="div-comment-32397"><div class="comment-author vcard"><cite><a href="http://imtx.me/" rel="external nofollow">TualatriX</a></cite></div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32397">2013 September 22, 10:56</a></div>
<p><p>是的，如果这个时候WiFi信号不好，丢包，就会由3G来顶替</p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32397#respond" onclick='return addComment.moveForm("div-comment-32397", "32397", "respond")'>Reply</a></div></div>

</li>
</ul>
</li>
<li class="comment odd thread-odd depth-1" id="comment-32396">
<div id="div-comment-32396"><div class="comment-author vcard">benno</div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32396">2013 September 22, 10:52</a></div>
<p><p>3g更新app 伤不起 不适合中国的网络资费<br /></p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32396#respond" onclick='return addComment.moveForm("div-comment-32396", "32396", "respond")'>Reply</a></div></div>

</li>
<li class="comment even thread-even depth-1" id="comment-32398">
<div id="div-comment-32398"><div class="comment-author vcard"><cite><a href="http://www.zuola.com/weblog/" rel="external nofollow">Zola</a></cite></div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32398">2013 September 22, 10:58</a></div>
<p><p>Mutlipath TCP好东西啊,有了Mutlipath TCP双网关路由器就真正能发挥作用了</p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32398#respond" onclick='return addComment.moveForm("div-comment-32398", "32398", "respond")'>Reply</a></div></div>

</li>
<li class="comment odd thread-odd depth-1" id="comment-32399">
<div id="div-comment-32399"><div class="comment-author vcard">spin6lock</div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32399">2013 September 22, 11:06</a></div>
<p><p>比较期待mac os有这个功能，可以用以太网网卡和wifi融合上网</p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32399#respond" onclick='return addComment.moveForm("div-comment-32399", "32399", "respond")'>Reply</a></div></div>

</li>
<li class="comment even thread-even depth-1" id="comment-32401">
<div id="div-comment-32401"><div class="comment-author vcard"><cite><a href="http://www.makemusic-asia.com/" rel="external nofollow">walkerxk</a></cite></div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32401">2013 September 22, 12:27</a></div>
<p><p>这个只是一个技术，并没有规定wifi的时候必须跑3G，看系统和应用怎么处理了，比如网页的话可以打开，但是电影的话就关闭算了，或者这个可以用在多个wifi的情况下，也可以加速。<br />就算没上MCTCP，没wifi的时候，蜂窝数据也会顶上的，你可以设置里面选择有wifi的时候不使用蜂窝的，或者网页才使用蜂窝数据。<br />其实就算是wifi也不一定是免费的，比如运营商的wifi就是走流量或者时间的，这个android考虑比较周到，可以设置哪些wifi是移动热点，这样可以限制下载。</p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32401#respond" onclick='return addComment.moveForm("div-comment-32401", "32401", "respond")'>Reply</a></div></div>

</li>
<li class="comment odd thread-odd depth-1" id="comment-32402">
<div id="div-comment-32402"><div class="comment-author vcard">fai</div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32402">2013 September 22, 12:47</a></div>
<p><p>可以說apple用新東西, 另一個說法就是用未成熟的技術... <br />如果是android 先用, 一定會被說成未成熟就用.</p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32402#respond" onclick='return addComment.moveForm("div-comment-32402", "32402", "respond")'>Reply</a></div></div>

</li>
<li class="comment even thread-even depth-1" id="comment-32403">
<div id="div-comment-32403"><div class="comment-author vcard"><cite><a href="http://lilydjwg.is-programmer.com/" rel="external nofollow">依云</a></cite></div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32403">2013 September 22, 13:48</a></div>
<p><p>感觉像 SCTP 的部分特性被移植到 TCP 了。</p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32403#respond" onclick='return addComment.moveForm("div-comment-32403", "32403", "respond")'>Reply</a></div></div>

</li>
<li class="comment odd thread-odd depth-1" id="comment-32404">
<div id="div-comment-32404"><div class="comment-author vcard"><cite><a href="http://www.weaoo.com/cn_shanghai/shanghai.html" rel="external nofollow">上海天气预报</a></cite></div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32404">2013 September 22, 16:29</a></div>
<p><p>期待</p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32404#respond" onclick='return addComment.moveForm("div-comment-32404", "32404", "respond")'>Reply</a></div></div>

</li>
<li class="comment even thread-even depth-1" id="comment-32405">
<div id="div-comment-32405"><div class="comment-author vcard"><cite><a href="http://maclove.me/" rel="external nofollow">LV</a></cite></div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32405">2013 September 22, 17:30</a></div>
<p><p>今后看一下，流量使用有没有因为mutipath技术和增加的趋势！</p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32405#respond" onclick='return addComment.moveForm("div-comment-32405", "32405", "respond")'>Reply</a></div></div>

</li>
<li class="comment odd thread-odd depth-1" id="comment-32408">
<div id="div-comment-32408"><div class="comment-author vcard">burn</div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32408">2013 September 23, 11:05</a></div>
<p><p>话说名字是TCP，那UDP能用吗？去看看去</p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32408#respond" onclick='return addComment.moveForm("div-comment-32408", "32408", "respond")'>Reply</a></div></div>

</li>
<li class="comment even thread-even depth-1" id="comment-32411">
<div id="div-comment-32411"><div class="comment-author vcard">gary.guo</div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32411">2013 September 23, 13:30</a></div>
<p><p>长见识了，第一次听说 Mutlipath TCP</p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32411#respond" onclick='return addComment.moveForm("div-comment-32411", "32411", "respond")'>Reply</a></div></div>

</li>
<li class="comment odd thread-odd depth-1" id="comment-32415">
<div id="div-comment-32415"><div class="comment-author vcard">chris.zhang</div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32415">2013 September 24, 21:40</a></div>
<p><p>记得在iOS5下，同时开着3G+WIFI下载APP，这时出门买菜，没有WIFI了，3G会完成APP下载的</p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32415#respond" onclick='return addComment.moveForm("div-comment-32415", "32415", "respond")'>Reply</a></div></div>

</li>
<li class="comment even thread-even depth-1" id="comment-32416">
<div id="div-comment-32416"><div class="comment-author vcard">tkiller</div>
<div class="comment-meta commentmetadata"><a href="/archives/1852.html#comment-32416">2013 September 25, 16:36</a></div>
<p><p>呵呵，要是3g流量大幅度超标你的套餐，就等着老老实实的掏钱吧！<br />对于懂的人来说这是一件不好不坏的事情，对于广大的不懂ios的装ber来说，这绝对是噩梦的功能，掏钱必须的，老外那里是无限流量，此功能根本就适用于天朝，小白慎用！！！</p></p>
<div class="reply"><a rel="nofollow" href="/archives/1852.html#comment-32416#respond" onclick='return addComment.moveForm("div-comment-32416", "32416", "respond")'>Reply</a></div></div>

</li>
</ol>

<div id="respond">
<h3>Leave a Comment</h3>
<div class="cancel-comment-reply">
<small><a rel="nofollow" id="cancel-comment-reply-link" href="#respond" style="display:none;">Click here to cancel reply.</a></small>
</div>
<form style="display: block;" action="/" method="GET" id="commentform" ext="fuckoffspammer/" onsubmit="this