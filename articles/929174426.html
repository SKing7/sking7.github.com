<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>The End of Global CSS</title>
<link rel="stylesheet" href="../css/article.css" />
</head>
<body>
<div class="m-content">
<h1>The End of Global CSS</h1>
<div class="section-content"><div class="section-inner layoutSingleColumn"><p name="d899" id="d899" class="graf--p graf--first">On <a href="https://github.com/webpack/css-loader/commit/d2c9c25721a711b0fe041c597b43646e82d9f145" data-href="https://github.com/webpack/css-loader/commit/d2c9c25721a711b0fe041c597b43646e82d9f145" class="markup--anchor markup--p-anchor" rel="nofollow">April 22, 2015</a>, <a href="https://github.com/sokra" data-href="https://github.com/sokra" class="markup--anchor markup--p-anchor" rel="nofollow">Tobias Koppers</a> — the ever tireless author of Webpack — committed the first iteration of a new feature to css-loader, at the time called <em class="markup--em markup--p-em">placeholders</em>, now known as <a href="https://github.com/webpack/css-loader#local-scope" data-href="https://github.com/webpack/css-loader#local-scope" class="markup--anchor markup--p-anchor" rel="nofollow">local scope</a>.</p><p name="2794" id="2794" class="graf--p">This feature allows us to export class names from our CSS into the consuming JavaScript code.</p><p name="3479" id="3479" class="graf--p">In short, instead of writing this:</p><pre name="8c0d" id="8c0d" class="graf--pre"><strong class="markup--strong markup--pre-strong">require</strong>('./MyComponent.css');</pre><p name="2bd7" id="2bd7" class="graf--p">We write this:</p><pre name="db53" id="db53" class="graf--pre"><strong class="markup--strong markup--pre-strong">import</strong> styles <strong class="markup--strong markup--pre-strong">from</strong> './MyComponent.css';</pre><p name="130c" id="130c" class="graf--p">So, in this example, what does <em class="markup--em markup--p-em">styles </em>evaluate to?</p><p name="d8a4" id="d8a4" class="graf--p">To see what is exported from our CSS, let’s take a look at an example of what our style sheet might look like.</p><pre name="a4f1" id="a4f1" class="graf--pre"><strong class="markup--strong markup--pre-strong">:local(.</strong>foo) {<br /><strong class="markup--strong markup--pre-strong">color</strong>: red;<br />}</pre><pre name="01b4" id="01b4" class="graf--pre"><strong class="markup--strong markup--pre-strong">:local(.</strong>bar) {<br /><strong class="markup--strong markup--pre-strong">color</strong>: blue;<br />}</pre><p name="067a" id="067a" class="graf--p">In this case, we’ve used css-loader’s custom&nbsp;<em class="markup--em markup--p-em">:local(.identifier)</em> syntax to export two identifiers — <em class="markup--em markup--p-em">foo</em> and <em class="markup--em markup--p-em">bar</em>.</p><p name="7aae" id="7aae" class="graf--p">These identifiers map to class strings that we can use in our JavaScript file. For example, when using <a href="http://facebook.github.io/react/" data-href="http://facebook.github.io/react/" class="markup--anchor markup--p-anchor" rel="nofollow">React</a>:</p><pre name="4e34" id="4e34" class="graf--pre"><strong class="markup--strong markup--pre-strong">import</strong> styles <strong class="markup--strong markup--pre-strong">from</strong> './MyComponent.css';</pre><pre name="fe30" id="fe30" class="graf--pre"><strong class="markup--strong markup--pre-strong">import</strong> React, { Component } <strong class="markup--strong markup--pre-strong">from</strong> 'react';</pre><pre name="7c51" id="7c51" class="graf--pre"><strong class="markup--strong markup--pre-strong">export default class</strong> MyComponent <strong class="markup--strong markup--pre-strong">extends</strong> Component {</pre><pre name="cced" id="cced" class="graf--pre">  <strong class="markup--strong markup--pre-strong">render</strong>() {<br />return (<br />&lt;div&gt;<br />&lt;div className={<strong class="markup--strong markup--pre-strong">styles.foo</strong>}&gt;<strong class="markup--strong markup--pre-strong">Foo</strong>&lt;/div&gt;<br />&lt;div className={<strong class="markup--strong markup--pre-strong">styles.bar</strong>}&gt;<strong class="markup--strong markup--pre-strong">Bar</strong>&lt;/div&gt;<br />&lt;/div&gt;<br />);<br />}</pre><pre name="14c7" id="14c7" class="graf--pre">}</pre><p name="6f59" id="6f59" class="graf--p">Importantly, these identifiers map to class strings that are guaranteed to be unique in a global context.</p><p name="05fe" id="05fe" class="graf--p graf--last">We no longer need to add lengthy prefixes to all of our selectors to simulate scoping. More components could define their own <em class="markup--em markup--p-em">foo</em> and <em class="markup--em markup--p-em">bar</em> identifiers which — unlike the traditional global selector model—wouldn’t produce any naming collisions.</p></div></div></div>
<script>var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34802167-1']); _gaq.push(['_setDomainName', 'liuzhe.co']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })();</script></body>
</html>