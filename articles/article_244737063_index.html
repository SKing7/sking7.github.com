<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <title></title>
  </head>
  <body>
        <!-- MAIN CONTENT -->
        <div id="main_content_wrap" class="outer">
        <textarea style="visibility:none" id="html-area">
<!DOCTYPE html&gt;
<html dir="ltr" lang="zh-CN" xmlns:wb="http://open.weibo.com/wb"&gt;
<head&gt;
<meta charset="UTF-8" /&gt;
<meta property="qc:admins" content="147062105661447145156375" /&gt;
<title&gt;浅谈javascript的函数节流 | Tencent AlloyTeam</title&gt;
<link rel="profile" href="http://gmpg.org/xfn/11" /&gt;
<link rel="stylesheet" type="text/css" media="all" href="http://www.alloyteam.com/wp-content/themes/alloyteam/style.css" /&gt;
<link rel="stylesheet" type="text/css" media="all" href="http://www.alloyteam.com/wp-includes/syntaxhighlighter/styles/shCoreDefault.css" /&gt;
<link rel="pingback" href="http://www.alloyteam.com/xmlrpc.php" /&gt;
<!--[if lt IE 9]&gt;
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"&gt;</script&gt;
<![endif]--&gt;
<link rel="alternate" type="application/rss+xml" title="Tencent AlloyTeam &raquo; 浅谈javascript的函数节流 评论 Feed" href="http://www.alloyteam.com/2012/11/javascript-throttle/feed/" /&gt;
<link rel='stylesheet' id='author-avatars-shortcode-css'  href='http://www.alloyteam.com/wp-content/plugins/author-avatars/css/shortcode.css?ver=1.6.2' type='text/css' media='all' /&gt;
<link rel='stylesheet' id='author-avatars-widget-css'  href='http://www.alloyteam.com/wp-content/plugins/author-avatars/css/widget.css?ver=1.6.2' type='text/css' media='all' /&gt;
<script type='text/javascript' src='http://www.alloyteam.com/wp-includes/js/jquery/jquery.js?ver=1.7.2'&gt;</script&gt;
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.alloyteam.com/xmlrpc.php?rsd" /&gt;
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.alloyteam.com/wp-includes/wlwmanifest.xml" /&gt; 
<link rel='prev' title='CSS3 Transform的perspective属性' href='http://www.alloyteam.com/2012/10/the-css3-transform-perspective-property/' /&gt;
<link rel='next' title='使用performance API 监测页面性能' href='http://www.alloyteam.com/2012/11/performance-api-monitoring-page-performance/' /&gt;
<meta name="generator" content="WordPress 3.4.2, fitted with the WordPress Mobile Pack 1.2.5" /&gt;
<link rel='shortlink' href='http://www.alloyteam.com/?p=3792' /&gt;

<!-- All in One SEO Pack 1.6.15.2 by Michael Torbert of Semper Fi Web Designob_start_detected [-1,-1] --&gt;
<meta name="description" content="函数节流，简单地讲，就是让一个函数无法在很短的时间间隔内连续调用，只有当上一次函数执行后过了你规定的时间间隔，才能进行下一次该函数的调用。以此减少函数调用，减少计算，提高性能" /&gt;
<meta name="keywords" content="函数节流 性能优化,javascript,函数节流,性能优化" /&gt;
<link rel="canonical" href="http://www.alloyteam.com/2012/11/javascript-throttle/" /&gt;
<!-- /all in one seo pack --&gt;

<!-- lazyload images --&gt;
<style type="text/css"&gt;
.lh_lazyimg{
opacity:0.2;filter:alpha(opacity=20);
background:url(http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/loading.gif) no-repeat center center;
}
</style&gt;
<!-- lazyload images end --&gt;

<!-- case nojs, hidden lazyload images --&gt;
<noscript&gt;
<style type="text/css"&gt;
.lh_lazyimg{display:none;}
</style&gt;
</noscript&gt;
<!-- case nojs, hidden lazyload images end --&gt;

<!-- lazyload --&gt;
<script type="text/javascript"&gt;
jQuery(document).ready(function($) {
	function lazyload(){
		$("img.lh_lazyimg").each(function(){
			_self = $(this);
			if (_self.attr("lazyloadpass")===undefined
					&& _self.attr("file")
					&& (!_self.attr("src")
							|| (_self.attr("src") && _self.attr("file")!=_self.attr("src"))
						)
				) {
				if((_self.offset().top) < ($(window).height()+$(document).scrollTop()+200)
						&& (_self.offset().left) < ($(window).width()+$(document).scrollLeft()+200)
					) {
					_self.attr("src",_self.attr("file"));
					_self.attr("lazyloadpass", "1");
					_self.animate({opacity:"1"}, 400);
				}
			}
		});
	}
	lazyload();

	var itv;
	$(window).scroll(function(){clearTimeout(itv);itv=setTimeout(lazyload,400);});
	$(window).resize(function(){clearTimeout(itv);itv=setTimeout(lazyload,400);});
});
</script&gt;
<!-- lazyload end --&gt;

<!-- prettyPhoto --&gt;
<link rel="stylesheet" href="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/prettyPhoto/css/prettyPhoto.css" type="text/css" media="screen" charset="utf-8"/&gt;
<script type="text/javascript" src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/prettyPhoto/js/jquery.prettyPhoto.js" charset="utf-8"&gt;</script&gt;
<script type="text/javascript"&gt;
jQuery(function($){
	$(".content_banner img").each(function(i){
		_self = $(this);

		selfWidth = _self.attr("width")?_self.attr("width"):_self.width();
		selfHeight = _self.attr("height")?_self.attr("height"):_self.height();
		if ((selfWidth && selfWidth<50)
				|| (selfHeight && selfHeight<50)) {
			return;
		}

		if (! this.parentNode.href) {
			imgsrc = "";

			if (_self.attr("src")) {
				imgsrc = _self.attr("src");
			}
			if (_self.attr("file")) {
				imgsrc = _self.attr("file");
			} else if (_self.attr("original")) {
				imgsrc = _self.attr("original");
			}

			if (imgsrc) {
				_self.addClass("slideshow_imgs");
				_self.wrap("<a href='"+imgsrc+"' rel='prettyPhoto[1]'&gt;</a&gt;");
			}
		} else {
			aHref = this.parentNode.href;
			var b=/.+(\.jpg)|(\.jpeg)|(\.png)|(\.gif)|(\.bmp)/i;
			if (! b.test(aHref)) {
				return;
			}

			_self.addClass("slideshow_imgs");

			_parentA = $(this.parentNode);
			rel = _parentA.attr("rel");
			if (! rel) {
				rel = "";
			}
			if (rel.indexOf("prettyPhoto") != 0) {
				_parentA.attr("rel","prettyPhoto[1]");
			}
		}
	});

	$("a[rel^='prettyPhoto']").prettyPhoto({social_tools:""});
});
</script&gt;
<!-- prettyPhoto end --&gt;
<style type="text/css" media="screen"&gt;body{position:relative}#dynamic-to-top{display:none;overflow:hidden;width:auto;z-index:90;position:fixed;bottom:20px;right:20px;top:auto;left:auto;font-family:sans-serif;font-size:1em;color:#fff;text-decoration:none;text-shadow:0 1px 0 #333;font-weight:bold;padding:20px 23px;border:1px solid #aba6a6;background:#3C454F;-webkit-background-origin:border;-moz-background-origin:border;-icab-background-origin:border;-khtml-background-origin:border;-o-background-origin:border;background-origin:border;-webkit-background-clip:padding-box;-moz-background-clip:padding-box;-icab-background-clip:padding-box;-khtml-background-clip:padding-box;-o-background-clip:padding-box;background-clip:padding-box;-webkit-box-shadow:0 1px 3px rgba( 0, 0, 0, 0.4 ), inset 0 0 0 1px rgba( 0, 0, 0, 0.2 ), inset 0 1px 0 rgba( 255, 255, 255, .4 ), inset 0 10px 10px rgba( 255, 255, 255, .1 );-ms-box-shadow:0 1px 3px rgba( 0, 0, 0, 0.4 ), inset 0 0 0 1px rgba( 0, 0, 0, 0.2 ), inset 0 1px 0 rgba( 255, 255, 255, .4 ), inset 0 10px 10px rgba( 255, 255, 255, .1 );-moz-box-shadow:0 1px 3px rgba( 0, 0, 0, 0.4 ), inset 0 0 0 1px rgba( 0, 0, 0, 0.2 ), inset 0 1px 0 rgba( 255, 255, 255, .4 ), inset 0 10px 10px rgba( 255, 255, 255, .1 );-o-box-shadow:0 1px 3px rgba( 0, 0, 0, 0.4 ), inset 0 0 0 1px rgba( 0, 0, 0, 0.2 ), inset 0 1px 0 rgba( 255, 255, 255, .4 ), inset 0 10px 10px rgba( 255, 255, 255, .1 );-khtml-box-shadow:0 1px 3px rgba( 0, 0, 0, 0.4 ), inset 0 0 0 1px rgba( 0, 0, 0, 0.2 ), inset 0 1px 0 rgba( 255, 255, 255, .4 ), inset 0 10px 10px rgba( 255, 255, 255, .1 );-icab-box-shadow:0 1px 3px rgba( 0, 0, 0, 0.4 ), inset 0 0 0 1px rgba( 0, 0, 0, 0.2 ), inset 0 1px 0 rgba( 255, 255, 255, .4 ), inset 0 10px 10px rgba( 255, 255, 255, .1 );box-shadow:0 1px 3px rgba( 0, 0, 0, 0.4 ), inset 0 0 0 1px rgba( 0, 0, 0, 0.2 ), inset 0 1px 0 rgba( 255, 255, 255, .4 ), inset 0 10px 10px rgba( 255, 255, 255, .1 );-webkit-border-radius:2px;-moz-border-radius:2px;-icab-border-radius:2px;-khtml-border-radius:2px;border-radius:2px}#dynamic-to-top:hover{background:#4fd687;background:#3C454F -webkit-gradient( linear, 0% 0%, 0% 100%, from( rgba( 255, 255, 255, .2 ) ), to( rgba( 0, 0, 0, 0 ) ) );background:#3C454F -webkit-linear-gradient( top, rgba( 255, 255, 255, .2 ), rgba( 0, 0, 0, 0 ) );background:#3C454F -khtml-linear-gradient( top, rgba( 255, 255, 255, .2 ), rgba( 0, 0, 0, 0 ) );background:#3C454F -moz-linear-gradient( top, rgba( 255, 255, 255, .2 ), rgba( 0, 0, 0, 0 ) );background:#3C454F -o-linear-gradient( top, rgba( 255, 255, 255, .2 ), rgba( 0, 0, 0, 0 ) );background:#3C454F -ms-linear-gradient( top, rgba( 255, 255, 255, .2 ), rgba( 0, 0, 0, 0 ) );background:#3C454F -icab-linear-gradient( top, rgba( 255, 255, 255, .2 ), rgba( 0, 0, 0, 0 ) );background:#3C454F linear-gradient( top, rgba( 255, 255, 255, .2 ), rgba( 0, 0, 0, 0 ) );cursor:pointer}#dynamic-to-top:active{background:#3C454F;background:#3C454F -webkit-gradient( linear, 0% 0%, 0% 100%, from( rgba( 0, 0, 0, .3 ) ), to( rgba( 0, 0, 0, 0 ) ) );background:#3C454F -webkit-linear-gradient( top, rgba( 0, 0, 0, .1 ), rgba( 0, 0, 0, 0 ) );background:#3C454F -moz-linear-gradient( top, rgba( 0, 0, 0, .1 ), rgba( 0, 0, 0, 0 ) );background:#3C454F -khtml-linear-gradient( top, rgba( 0, 0, 0, .1 ), rgba( 0, 0, 0, 0 ) );background:#3C454F -o-linear-gradient( top, rgba( 0, 0, 0, .1 ), rgba( 0, 0, 0, 0 ) );background:#3C454F -ms-linear-gradient( top, rgba( 0, 0, 0, .1 ), rgba( 0, 0, 0, 0 ) );background:#3C454F -icab-linear-gradient( top, rgba( 0, 0, 0, .1 ), rgba( 0, 0, 0, 0 ) );background:#3C454F linear-gradient( top, rgba( 0, 0, 0, .1 ), rgba( 0, 0, 0, 0 ) )}#dynamic-to-top,#dynamic-to-top:active,#dynamic-to-top:focus,#dynamic-to-top:hover{outline:none}#dynamic-to-top span{display:block;overflow:hidden;width:14px;height:12px;background:url( http://www.alloyteam.com/wp-content/plugins/dynamic-to-top/css/images/up.png )no-repeat center center}</style&gt;

<script type="text/JavaScript"&gt;
function addCookie(){　 // 加入收藏夹
	if (document.all){
		window.external.addFavorite('http://www.alloyteam.com', 'Tencent AlloyTeam - 腾讯Web前端 Alloy 团队 Blog');
	}else if (window.sidebar){
		window.sidebar.addPanel('Tencent AlloyTeam - 腾讯Web前端 Alloy 团队 Blog', 'http://www.alloyteam.com', "");
	}
}
</script&gt;
<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"&gt;</script&gt;
</head&gt;

<body class="home blog" style="display:none;"&gt;
<!--[if IE]&gt; 
<script&gt;document.body.style.display = "block";</script&gt;
<![endif]--&gt;  
<!-- 注释 --&gt;
<div id="alloy"&gt;
	<h1 id ="alloyteam" class="alloyteam1"&gt;AlloyTeam</h1&gt;
	<h1 id ="alloyteam2" class="alloyteam2"&gt;<a href="/"&gt;AlloyTeam</a&gt;</h1&gt;
	<div id ="tencentInfo"&gt;Copyright &copy; <script&gt;document.write(new Date().getFullYear());</script&gt; Tencent AlloyTeam. All Rights Reserved.</div&gt;

</div&gt;

<!--Header--&gt;
<div id="header"&gt;
	<div id="top"&gt;
		<div id="nav"&gt;
			<a onfocus="this.blur()" href="http://www.alloyteam.com" id="logo" title="腾讯Web前端 Alloy 团队 Blog"&gt;<cite&gt;Tencent AlloyTeam</cite&gt;</a&gt;
			<span class="subtitle"&gt;腾讯Web前端 Alloy 团队 Blog</span&gt;
			<div id="menu"&gt;
				<div class="widget_search"&gt;
					<form method="get" id="searchform" action="http://www.alloyteam.com" target="_blank"&gt;
						<input name="s" type="text" value="Search" onfocus="this.value='';" onblur="if(this.value==''){this.value='Search';}"&gt;
						<input name="" type="submit" value="" class="so" onmouseout="this.className='so'" onmouseover="this.className='soHover'"&gt;
					</form&gt;
				</div&gt;
			</div&gt;
		</div&gt;
	</div&gt;
</div&gt;
<div class="clearfix"&gt;</div&gt;	
<div id="main"&gt;
	<div id="access"&gt;
	<div class="menu-navmenu-container"&gt;<ul id="menu-navmenu" class="menu"&gt;<li id="menu-item-29" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-29"&gt;<a title="腾讯Web前端团队博客 AlloyTeam 首页" href="http://www.alloyteam.com/"&gt;首页</a&gt;</li&gt;
<li id="menu-item-745" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-745"&gt;<a href="http://www.alloyteam.com/category/%e5%89%8d%e7%ab%af%e8%b5%84%e8%ae%af/"&gt;前端资讯</a&gt;</li&gt;
<li id="menu-item-740" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-740"&gt;<a href="http://www.alloyteam.com/category/webfrontend/"&gt;Web前端</a&gt;
<ul class="sub-menu"&gt;
	<li id="menu-item-855" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-855"&gt;<a href="http://www.alloyteam.com/category/webfrontend/html5/"&gt;HTML5</a&gt;</li&gt;
	<li id="menu-item-856" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-856"&gt;<a href="http://www.alloyteam.com/category/webfrontend/css3/"&gt;CSS3</a&gt;</li&gt;
	<li id="menu-item-854" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-854"&gt;<a href="http://www.alloyteam.com/category/webfrontend/javascript/"&gt;JavaScript</a&gt;</li&gt;
	<li id="menu-item-747" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-747"&gt;<a href="http://www.alloyteam.com/category/webfrontend/ued/"&gt;用户体验设计</a&gt;</li&gt;
	<li id="menu-item-857" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-857"&gt;<a href="http://www.alloyteam.com/category/webfrontend/%e5%89%8d%e7%ab%af%e4%bc%98%e5%8c%96/"&gt;前端优化</a&gt;</li&gt;
</ul&gt;
</li&gt;
<li id="menu-item-748" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-748"&gt;<a href="http://www.alloyteam.com/category/%e8%b5%84%e6%ba%90%e5%b7%a5%e5%85%b7/"&gt;资源工具</a&gt;</li&gt;
<li id="menu-item-1371" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1371"&gt;<a href="http://www.alloyteam.com/category/alloylabs/"&gt;Alloy实验室</a&gt;
<ul class="sub-menu"&gt;
	<li id="menu-item-744" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-744"&gt;<a href="http://www.alloyteam.com/category/alloylabs/showcase/"&gt;作品</a&gt;</li&gt;
	<li id="menu-item-961" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-961"&gt;<a href="http://www.alloyteam.com/category/alloylabs/html5game/"&gt;HTML5游戏</a&gt;</li&gt;
</ul&gt;
</li&gt;
<li id="menu-item-853" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-853"&gt;<a title="我们在 Github.com 上的 Web 开源项目" href="http://AlloyTeam.github.com"&gt;Github开源</a&gt;</li&gt;
<li id="menu-item-746" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-746"&gt;<a href="http://www.alloyteam.com/category/team/"&gt;团队</a&gt;</li&gt;
<li id="menu-item-1327" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1327"&gt;<a href="http://www.alloyteam.com/message-board/"&gt;留言板</a&gt;
<ul class="sub-menu"&gt;
	<li id="menu-item-1335" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1335"&gt;<a href="http://www.alloyteam.com/links/"&gt;友情链接</a&gt;</li&gt;
</ul&gt;
</li&gt;
<li id="menu-item-27" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-27"&gt;<a title="腾讯AlloyTeam" href="http://www.alloyteam.com/about/"&gt;关于</a&gt;</li&gt;
</ul&gt;</div&gt;	</div&gt;

<!--Header End--&gt;
		<div id="content" role="main"&gt;	
<div id="postlist"&gt;
	    <div class="content_text"&gt; 

    <div class="title1"&gt; 
    <a href="http://weberpan.diandian.com/" class="animated tada singleauthor" target="_blank"&gt;<img alt='TAT.weber' src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://www.alloyteam.com/wp-content/uploads/2012/11/weberpan_avatar-43x43.jpg" class="avatar avatar-43 photo lh_lazyimg" height='43' width='43' /&gt;<noscript&gt;<img alt='TAT.weber' src='http://www.alloyteam.com/wp-content/uploads/2012/11/weberpan_avatar-43x43.jpg' class='avatar avatar-43 photo' height='43' width='43' /&gt;</noscript&gt;</a&gt; 
   
    <a href="http://www.alloyteam.com/2012/11/javascript-throttle/" class="blogTitle btitle" rel="bookmark" title="浅谈javascript的函数节流"&gt;浅谈javascript的函数节流</a&gt; 
    <div class="blogPs"&gt; In <a href="http://www.alloyteam.com/category/webfrontend/javascript/" title="查看 JavaScript 中的全部文章" rel="category tag"&gt;JavaScript</a&gt;,<a href="http://www.alloyteam.com/category/webfrontend/" title="查看 Web前端 中的全部文章" rel="category tag"&gt;Web前端</a&gt;,<a href="http://www.alloyteam.com/category/webfrontend/%e5%89%8d%e7%ab%af%e4%bc%98%e5%8c%96/" title="查看 前端优化 中的全部文章" rel="category tag"&gt;前端优化</a&gt; on 2012年11月02日 by <a href="http://www.alloyteam.com/author/weberpan/" title="由 TAT.weber 发布" rel="author"&gt;TAT.weber</a&gt;  view: 5,906 </div&gt; 
    <span class="comments"&gt;<a href="http://www.alloyteam.com/2012/11/javascript-throttle/#comments" class="up"  title="《浅谈javascript的函数节流》上的评论"&gt;11</a&gt;</span&gt;
    </div&gt; 
    <!--content_banner_single--&gt; 
    <div class="content_banner"&gt; 
    

	
    <div class="text"&gt;
    <h2 class="brush: applescript; title: AppleScript"&gt; 什么是函数节流？</h2&gt;
<p&gt;介绍前，先说下背景。在前端开发中，有时会为页面绑定resize事件，或者为一个页面元素绑定拖拽事件（其核心就是绑定mousemove），这种事件有一个特点，就是用户不必特地捣乱，他在一个正常的操作中，都有可能在一个短的时间内触发非常多次事件绑定程序。而大家知道，DOM操作时很消耗性能的，这个时候，如果你为这些事件绑定一些操作DOM节点的操作的话，那就会引发大量的计算，在用户看来，页面可能就一时间没有响应，这个页面一下子变卡了变慢了。甚至在IE下，如果你绑定的resize事件进行较多DOM操作，其高频率可能直接就使得浏览器崩溃。<span id="more-3792"&gt;</span&gt;</p&gt;
<p&gt;怎么解决？函数节流就是一种办法。话说第一次接触函数节流(throttle)，还是在看impress源代码的时候，impress在播放的时候，如果窗口大小发生改变(resize)，它会对整体进行缩放(scale)，使得每一帧都完整显示在屏幕上：</p&gt;
<p&gt;<a href="http://www.alloyteam.com/wp-content/uploads/2012/11/impress.jpg"&gt;<img class="alignnone size-medium wp-image-3818 lh_lazyimg" title="impress" src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://www.alloyteam.com/wp-content/uploads/2012/11/impress-300x188.jpg" alt="impress在resize的时候自动适应" width="300" height="188" /&gt;<noscript&gt;<img class="alignnone size-medium wp-image-3818" title="impress" src="http://www.alloyteam.com/wp-content/uploads/2012/11/impress-300x188.jpg" alt="impress在resize的时候自动适应" width="300" height="188" /&gt;</noscript&gt;<br /&gt;
</a&gt;</p&gt;
<p&gt;稍微留心，你会发现，当你改变窗体大小的时候，不管你怎么拉，怎么拽，都没有立刻生效，而是在你改变完大小后的一会儿，它的内容才进行缩放适应。看了源代码，它用的就是函数节流的方法。</p&gt;
<p&gt;函数节流，简单地讲，就是让一个函数无法在很短的时间间隔内连续调用，只有当上一次函数执行后过了你规定的时间间隔，才能进行下一次该函数的调用。以impress上面的例子讲，就是让缩放内容的操作在你不断改变窗口大小的时候不会执行，只有你停下来一会儿，才会开始执行。</p&gt;
<p&gt;&nbsp;</p&gt;
<h2&gt;函数节流的原理</h2&gt;
<p&gt;函数节流的原理挺简单的，估计大家都想到了，那就是定时器。当我触发一个时间时，先setTimout让这个事件延迟一会再执行，如果在这个时间间隔内又触发了事件，那我们就clear掉原来的定时器，再setTimeout一个新的定时器延迟一会执行，就这样。</p&gt;
<p&gt;&nbsp;</p&gt;
<h2&gt;代码实现</h2&gt;
<p&gt;明白了原理，那就可以在代码里用上了，但每次都要手动去新建清除定时器毕竟麻烦，于是需要封装。在《JavaScript高级程序设计》一书有介绍函数节流，里面封装了这样一个函数节流函数：</p&gt;
<pre class="brush: js; title: JavaScript"&gt; function throttle(method, context) {
     clearTimeout(methor.tId);
     method.tId = setTimeout(function(){
         method.call(context);
     }， 100);
 }</pre&gt;
<p&gt;它把定时器ID存为函数的一个属性（= =个人的世界观不喜欢这种写法）。而调用的时候就直接写</p&gt;
<pre class="brush: js; title: JavaScript"&gt;window.onresize = function(){
    throttle(myFunc);
}</pre&gt;
<p&gt;这样两次函数调用之间至少间隔100ms。</p&gt;
<p&gt;而impress用的是另一个封装函数：</p&gt;
<pre class="brush: js; title: JavaScript"&gt;var throttle = function(fn, delay){
 	var timer = null;
 	return function(){
 		var context = this, args = arguments;
 		clearTimeout(timer);
 		timer = setTimeout(function(){
 			fn.apply(context, args);
 		}, delay);
 	};
 };</pre&gt;
<p&gt;它使用闭包的方法形成一个私有的作用域来存放定时器变量timer。而调用方法为</p&gt;
<pre class="brush: js; title: JavaScript"&gt;window.onresize = throttle(myFunc, 100);</pre&gt;
<p&gt;两种方法各有优劣，前一个封装函数的优势在把上下文变量当做函数参数，直接可以定制执行函数的this变量；后一个函数优势在于把延迟时间当做变量（当然，前一个函数很容易做这个拓展），而且个人觉得使用闭包代码结构会更优，且易于拓展定制其他私有变量，缺点就是虽然使用apply把调用throttle时的this上下文传给执行函数，但毕竟不够灵活。</p&gt;
<p&gt;&nbsp;</p&gt;
<h2&gt;接下来是？</h2&gt;
<p&gt;接下来就讨论怎么更好地封装？这多没意思啊，接下来讨论下怎样拓展深化函数节流。</p&gt;
<p&gt;函数节流让一个函数只有在你不断触发后停下来歇会才开始执行，中间你操作得太快它直接无视你。这样做就有点太绝了。resize一般还好，但假如你写一个拖拽元素位置的程序，然后直接使用函数节流，那恭喜你，你会发现你拖动时元素是不动的，你拖完了，它直接闪到终点去。</p&gt;
<p&gt;其实函数节流的出发点，就是让一个函数不要执行得太频繁，减少一些过快的调用来节流。当你改变浏览器大小，浏览器触发resize事件的时间间隔是多少？我不清楚，个人猜测是16ms（每秒64次），反正跟mousemove一样非常太频繁，一个很小的时间段内必定执行，这是浏览器设好的，你无法直接改。而真正的节流应该是在可接受的范围内尽量延长这个调用时间，也就是我们自己控制这个执行频率，让函数减少调用以达到减少计算、提升性能的目的。假如原来是16ms执行一次，我们如果发现resize时每50ms一次也可以接受，那肯定用50ms做时间间隔好一点。</p&gt;
<p&gt;而上面介绍的函数节流，它这个频率就不是50ms之类的，它就是无穷大，只要你能不间断resize，刷个几年它也一次都不执行处理函数。我们可以对上面的节流函数做拓展：</p&gt;
<pre class="brush: js; title: JavaScript"&gt;var throttleV2 = function(fn, delay, mustRunDelay){
 	var timer = null;
 	var t_start;
 	return function(){
 		var context = this, args = arguments, t_curr = +new Date();
 		clearTimeout(timer);
 		if(!t_start){
 			t_start = t_curr;
 		}
 		if(t_curr - t_start &gt;= mustRunDelay){
 			fn.apply(context, args);
 			t_start = t_curr;
 		}
 		else {
 			timer = setTimeout(function(){
 				fn.apply(context, args);
 			}, delay);
 		}
 	};
 };</pre&gt;
<p&gt;在这个拓展后的节流函数升级版，我们可以设置第三个参数，即必然触发执行的时间间隔。如果用下面的方法调用</p&gt;
<pre class="brush: js; title: JavaScript"&gt;window.onresize = throttleV2(myFunc, 50, 100);</pre&gt;
<p&gt;则意味着，50ms的间隔内连续触发的调用，后一个调用会把前一个调用的等待处理掉，但每隔100ms至少执行一次。原理也很简单，打时间tag，一开始记录第一次调用的时间戳，然后每次调用函数都去拿最新的时间跟记录时间比，超出给定的时间就执行一次，更新记录时间。</p&gt;
<p&gt;<a href="http://www.alloyteam.com/wp-content/uploads/2012/11/throttle-test.html" target="_blank"&gt;狠击这里查看测试页面</a&gt;</p&gt;
<p&gt;到现在为止呢，当我们在开发中遇到类似的问题，一个函数可能非常频繁地调用，我们有了几个选择：一呢，还是用原来的写法，频繁执行就频繁执行吧，哥的电脑好；二是用原始的函数节流；三则是用函数节流升级版。不是说第一种就不好，这要看实际项目的要求，有些就是对实时性要求高。而如果要求没那么苛刻，我们可以视具体情况使用第二种或第三种方法，理论上第二种方法执行的函数调用最少，性能应该节省最多，而第三种方法则更加地灵活，你可以在性能与体验上探索一个平衡点。</p&gt;
<p&gt;&nbsp;</p&gt;
<h2&gt;你怎么了，性能</h2&gt;
<p&gt;（原谅我，写得有点长 = = ，文章主体还剩最后这一节。）</p&gt;
<p&gt;我们经常说我优化了代码了，现在的代码更高效了，但貌似很少有人去测试，性能是否真的提升了，提升了多少。当然，前端性能测试的不完善、不够体系化也是原因之一，但我们也要有一种严谨的态度。上面介绍了三种方法，理论上来说呢，第一种方法执行的运算最多，性能理应最差（运算过多过频，内存、cpu占用高，页面变卡），而第二种应该是性能最好，第三种就是一种居中的方案。</p&gt;
<p&gt;为了给读者一个更确切的分析，于是我对三种方法做了一次蛋疼的性能测试。。。我选择的是拖拽一个页面元素位置的应用场景，为了让性能优化更明显一点，拖拽的是一个iframe，iframe里面加载的是腾讯首页（一般门户网站的首页都够重量级的），这样在拖拽的过程中会不断触发浏览器的重绘。至于怎么看性能，我打开的是chrome的调试面板的时间线标签，里面有memory监视。对于性能的评价标准，我选的是内存占用。</p&gt;
<p&gt;于是长达两三个小时的性能测试开始了。。。</p&gt;
<p&gt;&nbsp;</p&gt;
<p&gt;很快我就发现，chrome的性能优化得太好了，我的第一种测试方案三种方法之间有性能差异，但这个差异实在不明显，而且每一轮的测试都有波动，而且每次测试还很难保证测试的背景条件（如开始时的内存占用情况），第一组测试结果如下：</p&gt;
<p&gt;第一种方法：<a onclick="javascript:pageTracker._trackPageview('/downloads/wp-content/uploads/2012/11/0-0.jpg');"  href="http://www.alloyteam.com/wp-content/uploads/2012/11/0-0.jpg"&gt;<img class="alignnone size-large wp-image-3819 lh_lazyimg" title="函数节流-首轮测试-第一种方法" src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://www.alloyteam.com/wp-content/uploads/2012/11/0-0-1024x172.jpg" alt="函数节流-首轮测试-第一种方法" width="1024" height="172" /&gt;<noscript&gt;<img class="alignnone size-large wp-image-3819" title="函数节流-首轮测试-第一种方法" src="http://www.alloyteam.com/wp-content/uploads/2012/11/0-0-1024x172.jpg" alt="函数节流-首轮测试-第一种方法" width="1024" height="172" /&gt;</noscript&gt;</a&gt;</p&gt;
<p&gt;第二种方法：<a onclick="javascript:pageTracker._trackPageview('/downloads/wp-content/uploads/2012/11/1-0.jpg');"  href="http://www.alloyteam.com/wp-content/uploads/2012/11/1-0.jpg"&gt;<img class="alignnone size-large wp-image-3820 lh_lazyimg" title="函数节流-首轮测试-第二种方法" src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://www.alloyteam.com/wp-content/uploads/2012/11/1-0-1024x172.jpg" alt="函数节流-首轮测试-第二种方法" width="1024" height="172" /&gt;<noscript&gt;<img class="alignnone size-large wp-image-3820" title="函数节流-首轮测试-第二种方法" src="http://www.alloyteam.com/wp-content/uploads/2012/11/1-0-1024x172.jpg" alt="函数节流-首轮测试-第二种方法" width="1024" height="172" /&gt;</noscript&gt;</a&gt;</p&gt;
<p&gt;第三种方法：<a onclick="javascript:pageTracker._trackPageview('/downloads/wp-content/uploads/2012/11/2-0.jpg');"  href="http://www.alloyteam.com/wp-content/uploads/2012/11/2-0.jpg"&gt;<img class="alignnone size-large wp-image-3821 lh_lazyimg" title="函数节流-首轮测试-第三种方法" src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://www.alloyteam.com/wp-content/uploads/2012/11/2-0-1024x172.jpg" alt="函数节流-首轮测试-第三种方法" width="1024" height="172" /&gt;<noscript&gt;<img class="alignnone size-large wp-image-3821" title="函数节流-首轮测试-第三种方法" src="http://www.alloyteam.com/wp-content/uploads/2012/11/2-0-1024x172.jpg" alt="函数节流-首轮测试-第三种方法" width="1024" height="172" /&gt;</noscript&gt;</a&gt;</p&gt;
<p&gt;可以发现，这些小差异很难判定哪种方法更好。</p&gt;
<p&gt;&nbsp;</p&gt;
<p&gt;于是有了新一轮测试。不够重量化？好吧，我每次mousemove的处理函数中，都触发iframe的重新加载；测试数据有瞬时波动？这次我一个测试测60秒，看一分钟的总体情况；测试条件不够统一？我规定在60秒里面mouse up 6次，其他时间各种move。</p&gt;
<p&gt;于是有了第二组图片（其实做了很多组图片，这里只选出比较有代表性的一组，其他几组类似）</p&gt;
<p&gt;第一种方法：<a onclick="javascript:pageTracker._trackPageview('/downloads/wp-content/uploads/2012/11/20.jpg');"  href="http://www.alloyteam.com/wp-content/uploads/2012/11/20.jpg"&gt;<img class="alignnone size-large wp-image-3822 lh_lazyimg" title="函数节流-二轮测试-第一种方法" src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://www.alloyteam.com/wp-content/uploads/2012/11/20-1024x172.jpg" alt="函数节流-二轮测试-第一种方法" width="1024" height="172" /&gt;<noscript&gt;<img class="alignnone size-large wp-image-3822" title="函数节流-二轮测试-第一种方法" src="http://www.alloyteam.com/wp-content/uploads/2012/11/20-1024x172.jpg" alt="函数节流-二轮测试-第一种方法" width="1024" height="172" /&gt;</noscript&gt;</a&gt;</p&gt;
<p&gt;第二种方法：<a onclick="javascript:pageTracker._trackPageview('/downloads/wp-content/uploads/2012/11/21.jpg');"  href="http://www.alloyteam.com/wp-content/uploads/2012/11/21.jpg"&gt;<img class="alignnone size-large wp-image-3823 lh_lazyimg" title="函数节流-二轮测试-第二种方法" src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://www.alloyteam.com/wp-content/uploads/2012/11/21-1024x172.jpg" alt="函数节流-二轮测试-第二种方法" width="1024" height="172" /&gt;<noscript&gt;<img class="alignnone size-large wp-image-3823" title="函数节流-二轮测试-第二种方法" src="http://www.alloyteam.com/wp-content/uploads/2012/11/21-1024x172.jpg" alt="函数节流-二轮测试-第二种方法" width="1024" height="172" /&gt;</noscript&gt;</a&gt;</p&gt;
<p&gt;第三种方法：<a onclick="javascript:pageTracker._trackPageview('/downloads/wp-content/uploads/2012/11/22.jpg');"  href="http://www.alloyteam.com/wp-content/uploads/2012/11/22.jpg"&gt;<img class="alignnone size-large wp-image-3824 lh_lazyimg" title="函数节流-二轮测试-第三种方法" src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://www.alloyteam.com/wp-content/uploads/2012/11/22-1024x172.jpg" alt="函数节流-二轮测试-第三种方法" width="1024" height="172" /&gt;<noscript&gt;<img class="alignnone size-large wp-image-3824" title="函数节流-二轮测试-第三种方法" src="http://www.alloyteam.com/wp-content/uploads/2012/11/22-1024x172.jpg" alt="函数节流-二轮测试-第三种方法" width="1024" height="172" /&gt;</noscript&gt;</a&gt;</p&gt;
<p&gt;看错了？我一开始也这么认为，但测试了几次都发现，第一种方法正如预料中的占资源，第二种方法竟然不是理论上的性能最优，最优的是第三种方法！</p&gt;
<p&gt;仔细分析。第一种方法由于不断地mousemove，不断更新位置的同时重新加载iframe的内容，所以内存占用不断增加。第二种方法，即原始的函数节流，可以从截图看出内存占用有多处平坦区域，这是因为在mousemove的过程中，由于时间间隔短，不触发处理函数，所以内存也就有一段平滑期，几乎没有增长，但在mouseup的时候就出现小高峰。第三种方法呢，由于代码写了每200ms必须执行一次，于是就有很明显的高峰周期。</p&gt;
<p&gt;为什么第三种方法会比第二种方法占用内存更小呢？个人认为，这跟内存回收有关，有可能chrmoe在这方面真的优化得太多（。。。）。不断地每隔一个小时间段地新建定时器，使得内存一直得不到释放。而使用第三种方法，从代码结构可以看出，<strong&gt;当到了指定的mustRunDelay必须执行处理函数的时候，是不执行新建定时器的，即是说在立即执行之后，有那么一小段时间空隙，定时器是被clear的，只有在下一次进入函数的时候才会重新设置。而chrome呢，就趁这段时间间隙回收垃圾</strong&gt;，于是每一个小高峰后面都有一段瞬时的“下坡”。</p&gt;
<p&gt;当然，这只是我的推测，期待读者有更独到的看法。</p&gt;
<p&gt;<a href="http://www.alloyteam.com/wp-content/uploads/2012/11/throttle-hardtest.html" target="_blank"&gt;重度测试页面</a&gt;（个人测试的时候是没有切换器的，每次代码选了一种模式，然后就关闭浏览器，重新打开页面来测试，以保证运行时不受到别的模式的影响。这里提供的测试页面仅供参考）</p&gt;
<p&gt;&nbsp;</p&gt;
<h2&gt;后语</h2&gt;
<p&gt;(这是后语，不算正文的小节)</p&gt;
<p&gt;上面就是我对函数节流的认识和探索了，时间有限，探索得不够深也写得不够好。个人建议，在实际项目开发中，如果要用到函数节流来优化代码的话，函数节流升级版更加地灵活，且在一些情况下内存占用具有明显的优势（我只试了chrome，只试了两三个钟，不敢妄言）。</p&gt;
<p&gt;最后我们可以整合了第二、三种方法，封装成一个函数，其实第二种方法也就是第三种方法的特例而已。还可以以hash对象封装参数：执行函数、上下文、延迟、必须执行的时间间隔。这比较简单就不在这里贴出来了。</p&gt;
<div style="clear:both; margin-top:5px; margin-bottom:5px;"&gt;</div&gt;<div style="float:left"&gt;<!-- JiaThis Button BEGIN --&gt;
<div class="jiathis_style"&gt;
<span class="jiathis_txt"&gt;分享到：</span&gt;
<a class="jiathis_button_tqq"&gt;腾讯微博</a&gt;
<a class="jiathis_button_tsina"&gt;新浪微博</a&gt;
<a onclick="javascript:pageTracker._trackPageview('/outgoing/www.jiathis.com/share');"  href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"&gt;更多</a&gt;
<a class="jiathis_counter_style"&gt;</a&gt;
</div&gt;
<script type="text/javascript" &gt;
var jiathis_config={
	summary:"",
	hideMore:true
}
</script&gt;
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"&gt;</script&gt;
<!-- JiaThis Button END --&gt;</div&gt;<div style="clear:both; margin-top:5px; margin-bottom:5px;"&gt;</div&gt;    </div&gt; 
	</div&gt;
	<div class="toolbar"&gt;
	</div&gt;

</div&gt;
		<div id="comments" class="comments"&gt;
     <script type="text/javascript"&gt; 
	var defaultAuthor = "称呼(必填)";
	var defaultEmail = "邮箱(不会被公开,必填)";
	var defaultUrl = "网站";
	var defaultComment = "评论内容...";
	
	function commentform_submit(){
		if(document.commentform.author.value == '' || document.commentform.author.value == defaultAuthor) {alert('咳咳...称呼忘填了');document.commentform.author.focus();return;}
		if(document.commentform.email.value == '' || document.commentform.email.value == defaultEmail) {alert('email...您的email没填');document.commentform.email.focus();return;}
		if(document.commentform.comment.value == '' || document.commentform.comment.value == defaultComment) {alert('评论内容在哪？');document.commentform.comment.focus();return;}
		if(document.commentform.url.value == defaultUrl) document.commentform.url.value = '';
		// document.commentform.submit();
	}
	</script&gt;

	<ol class="commentlist"&gt;
			<li class="comment even thread-even depth-1" id="li-comment-4334"&gt;
	<img alt='' src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://0.gravatar.com/avatar/647e26b2c0563447ac66790b62de8a55?s=43&amp;d=wavatar&amp;r=G" class="avatar  animated tada avatar-43 photo lh_lazyimg" height='43' width='43' /&gt;<noscript&gt;<img alt='' src='http://0.gravatar.com/avatar/647e26b2c0563447ac66790b62de8a55?s=43&amp;d=wavatar&amp;r=G' class='avatar  animated tada avatar-43 photo' height='43' width='43' /&gt;</noscript&gt;	<div id="comment-4334" class="comment_c"&gt;
		<h2&gt;
			Drumer_Coder						<span class="c_time"&gt;2012 年 11 月 23 日</span&gt;
		</h2&gt;
		<p&gt;这个东西具体都用在什么方面呢？看是看明白了但是应用场景我还不是太明确</p&gt;
				<div class="reply"&gt;
			<a class='comment-reply-link' href='/2012/11/javascript-throttle/?replytocom=4334#respond' onclick='return addComment.moveForm("comment-4334", "4334", "respond", "3792")'&gt;回复</a&gt;		</div&gt;
	</div&gt;
</li&gt;
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4127"&gt;
	<img alt='' src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://0.gravatar.com/avatar/2c54d65969c5ca51d65e420019cfe0b2?s=43&amp;d=wavatar&amp;r=G" class="avatar  animated tada avatar-43 photo lh_lazyimg" height='43' width='43' /&gt;<noscript&gt;<img alt='' src='http://0.gravatar.com/avatar/2c54d65969c5ca51d65e420019cfe0b2?s=43&amp;d=wavatar&amp;r=G' class='avatar  animated tada avatar-43 photo' height='43' width='43' /&gt;</noscript&gt;	<div id="comment-4127" class="comment_c"&gt;
		<h2&gt;
			<a onclick="javascript:pageTracker._trackPageview('/outgoing/zhuiping.sinaapp.com/');"  href='http://zhuiping.sinaapp.com/' rel='external nofollow' class='url'&gt;李荣飞</a&gt;						<span class="c_time"&gt;2012 年 11 月 15 日</span&gt;
		</h2&gt;
		<p&gt;第一个问题:<br /&gt;
t_start定义时就应该初始化,你在返回函数里初始化,你仔细看看作用只起了一次,但是实际却是每次都执行,浪费了多次判断资源<br /&gt;
第二个问题:<br /&gt;
当执行时间大于必须执行时间时,首先要做的应该是先重置开始时间,应为在火狐下,在执行回调函数的同时,滚动条依然在滚动,这样就是短时间大量触发回调函数,没有起到函数节流作用,不信,你alert一下<br /&gt;
第三个问题:<br /&gt;
当执行时间大于必须执行时间时,当重置开始时间后,紧接着要再clearTimeout(timer),因为此时timer已经定义了,你在执行回调函数的同时,可能滚动已经停止,造成执行完回调函数后,又要再次执行定时器中的回调函数<br /&gt;
第四个问题:<br /&gt;
定时器中的回调函数执行完后,也要重置t_start,要不然那就彻底没有起到函数节流思想了</p&gt;
<p&gt;小小思考,还望楼主更正,附上改进后代码<br /&gt;
//改进版的函数节流<br /&gt;
function highThottle(fn,content,musttime,time){<br /&gt;
	var start=new Date();<br /&gt;
	var musttime=musttime||5000;<br /&gt;
	return function(){<br /&gt;
		var args=arguments;<br /&gt;
		clearTimeout(fn.timer);<br /&gt;
		var end=new Date();<br /&gt;
		if(end-start&gt;musttime){<br /&gt;
			start=new Date();<br /&gt;
			clearTimeout(fn.timer);<br /&gt;
			fn.apply(content,args);<br /&gt;
		}else{<br /&gt;
			fn.timer=setTimeout(function(){<br /&gt;
				start=new Date();<br /&gt;
				fn.apply(content,args);<br /&gt;
			},time||200);<br /&gt;
		}<br /&gt;
	}<br /&gt;
}</p&gt;
				<div class="reply"&gt;
			<a class='comment-reply-link' href='/2012/11/javascript-throttle/?replytocom=4127#respond' onclick='return addComment.moveForm("comment-4127", "4127", "respond", "3792")'&gt;回复</a&gt;		</div&gt;
	</div&gt;
</li&gt;
<li class="comment even thread-even depth-1" id="li-comment-4054"&gt;
	<img alt='' src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://1.gravatar.com/avatar/79496d9a56d6b97f2958b2af234890a9?s=43&amp;d=wavatar&amp;r=G" class="avatar  animated tada avatar-43 photo lh_lazyimg" height='43' width='43' /&gt;<noscript&gt;<img alt='' src='http://1.gravatar.com/avatar/79496d9a56d6b97f2958b2af234890a9?s=43&amp;d=wavatar&amp;r=G' class='avatar  animated tada avatar-43 photo' height='43' width='43' /&gt;</noscript&gt;	<div id="comment-4054" class="comment_c"&gt;
		<h2&gt;
			K						<span class="c_time"&gt;2012 年 11 月 13 日</span&gt;
		</h2&gt;
		<p&gt;<a onclick="javascript:pageTracker._trackPageview('/outgoing/jsfiddle.net/aFytc/1/');"  href="http://jsfiddle.net/aFytc/1/" rel="nofollow"&gt;http://jsfiddle.net/aFytc/1/</a&gt;</p&gt;
<p&gt;把setTimeout创建的func次数减少。<br /&gt;
这样是每次都会去clearTimeout，<br /&gt;
其实既然evt type一样，就没有必要总是去setTimeout了。</p&gt;
				<div class="reply"&gt;
			<a class='comment-reply-link' href='/2012/11/javascript-throttle/?replytocom=4054#respond' onclick='return addComment.moveForm("comment-4054", "4054", "respond", "3792")'&gt;回复</a&gt;		</div&gt;
	</div&gt;
</li&gt;
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3436"&gt;
	<img alt='' src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://0.gravatar.com/avatar/0f34da8edf8c0c2a225081a3cc9b1a27?s=43&amp;d=wavatar&amp;r=G" class="avatar  animated tada avatar-43 photo lh_lazyimg" height='43' width='43' /&gt;<noscript&gt;<img alt='' src='http://0.gravatar.com/avatar/0f34da8edf8c0c2a225081a3cc9b1a27?s=43&amp;d=wavatar&amp;r=G' class='avatar  animated tada avatar-43 photo' height='43' width='43' /&gt;</noscript&gt;	<div id="comment-3436" class="comment_c"&gt;
		<h2&gt;
			tglgx						<span class="c_time"&gt;2012 年 11 月 8 日</span&gt;
		</h2&gt;
		<p&gt;这种不知道和第三种有没有太大差别呢；<br /&gt;
其中args因为考虑到需要用最后一次的所以提外了，context这个个人感觉比较纠结，在内在外应该都差不多，姑且也提到函数外了<br /&gt;
var throttle = function(fn, delay){<br /&gt;
     var timer = null;<br /&gt;
     var args,context;<br /&gt;
     return function(){<br /&gt;
         context = this;<br /&gt;
         args = arguments;<br /&gt;
         if(timer) return;<br /&gt;
         timer = setTimeout(function(){<br /&gt;
             timer = null;<br /&gt;
             fn.apply(context, args);<br /&gt;
         }, delay);<br /&gt;
     };<br /&gt;
  };</p&gt;
				<div class="reply"&gt;
			<a class='comment-reply-link' href='/2012/11/javascript-throttle/?replytocom=3436#respond' onclick='return addComment.moveForm("comment-3436", "3436", "respond", "3792")'&gt;回复</a&gt;		</div&gt;
	</div&gt;
</li&gt;
<li class="comment even thread-even depth-1" id="li-comment-3435"&gt;
	<img alt='' src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://1.gravatar.com/avatar/15f7297bec473fe4d577bf9fa15688ba?s=43&amp;d=wavatar&amp;r=G" class="avatar  animated tada avatar-43 photo lh_lazyimg" height='43' width='43' /&gt;<noscript&gt;<img alt='' src='http://1.gravatar.com/avatar/15f7297bec473fe4d577bf9fa15688ba?s=43&amp;d=wavatar&amp;r=G' class='avatar  animated tada avatar-43 photo' height='43' width='43' /&gt;</noscript&gt;	<div id="comment-3435" class="comment_c"&gt;
		<h2&gt;
			<a onclick="javascript:pageTracker._trackPageview('/outgoing/blog.niceue.com');"  href='http://blog.niceue.com' rel='external nofollow' class='url'&gt;Jony</a&gt;						<span class="c_time"&gt;2012 年 11 月 8 日</span&gt;
		</h2&gt;
		<p&gt;虽然chrome比较好测试，但是在chrome下测试是不能反映出来问题的，特别是IE系<br /&gt;
这个应该还是要根据实际需求来吧，还有第二种方法里层的闭包args = arguments获取不到吧？</p&gt;
				<div class="reply"&gt;
			<a class='comment-reply-link' href='/2012/11/javascript-throttle/?replytocom=3435#respond' onclick='return addComment.moveForm("comment-3435", "3435", "respond", "3792")'&gt;回复</a&gt;		</div&gt;
	</div&gt;
</li&gt;
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3434"&gt;
	<img alt='' src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://1.gravatar.com/avatar/9a4fb21184a6fc518e2ed630d09c2fb9?s=43&amp;d=wavatar&amp;r=G" class="avatar  animated tada avatar-43 photo lh_lazyimg" height='43' width='43' /&gt;<noscript&gt;<img alt='' src='http://1.gravatar.com/avatar/9a4fb21184a6fc518e2ed630d09c2fb9?s=43&amp;d=wavatar&amp;r=G' class='avatar  animated tada avatar-43 photo' height='43' width='43' /&gt;</noscript&gt;	<div id="comment-3434" class="comment_c"&gt;
		<h2&gt;
			隐身						<span class="c_time"&gt;2012 年 11 月 8 日</span&gt;
		</h2&gt;
		<p&gt;写得是非常好,昨天才无意识使用了一函数节流,今天就看到这个概念,,</p&gt;
<p&gt;文章中提到的JavaScript高级程序设计中的代码,    clearTimeout(methor.tId) 中的methor哪来的?</p&gt;
				<div class="reply"&gt;
			<a class='comment-reply-link' href='/2012/11/javascript-throttle/?replytocom=3434#respond' onclick='return addComment.moveForm("comment-3434", "3434", "respond", "3792")'&gt;回复</a&gt;		</div&gt;
	</div&gt;
</li&gt;
<li class="comment even thread-even depth-1" id="li-comment-3416"&gt;
	<img alt='' src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://0.gravatar.com/avatar/8f83c9585789faf360d7d5e180991691?s=43&amp;d=wavatar&amp;r=G" class="avatar  animated tada avatar-43 photo lh_lazyimg" height='43' width='43' /&gt;<noscript&gt;<img alt='' src='http://0.gravatar.com/avatar/8f83c9585789faf360d7d5e180991691?s=43&amp;d=wavatar&amp;r=G' class='avatar  animated tada avatar-43 photo' height='43' width='43' /&gt;</noscript&gt;	<div id="comment-3416" class="comment_c"&gt;
		<h2&gt;
			<a onclick="javascript:pageTracker._trackPageview('/outgoing/blog.ueder.info');"  href='http://blog.ueder.info' rel='external nofollow' class='url'&gt;welpher.yu</a&gt;						<span class="c_time"&gt;2012 年 11 月 7 日</span&gt;
		</h2&gt;
		<p&gt;性能这个是怎么测试出来的呢</p&gt;
				<div class="reply"&gt;
			<a class='comment-reply-link' href='/2012/11/javascript-throttle/?replytocom=3416#respond' onclick='return addComment.moveForm("comment-3416", "3416", "respond", "3792")'&gt;回复</a&gt;		</div&gt;
	</div&gt;
<ul class='children'&gt;
<li class="comment byuser comment-author-weberpan bypostauthor odd alt depth-2" id="li-comment-3431"&gt;
	<img alt='TAT.weber' src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://www.alloyteam.com/wp-content/uploads/2012/11/weberpan_avatar-43x43.jpg" class="avatar avatar-43 photo lh_lazyimg" height='43' width='43' /&gt;<noscript&gt;<img alt='TAT.weber' src='http://www.alloyteam.com/wp-content/uploads/2012/11/weberpan_avatar-43x43.jpg' class='avatar avatar-43 photo' height='43' width='43' /&gt;</noscript&gt;	<div id="comment-3431" class="comment_c"&gt;
		<h2&gt;
			<a onclick="javascript:pageTracker._trackPageview('/outgoing/weberpan.diandian.com/');"  href='http://weberpan.diandian.com/' rel='external nofollow' class='url'&gt;TAT.weber</a&gt;						<span class="c_time"&gt;2012 年 11 月 8 日</span&gt;
		</h2&gt;
		<p&gt;在chrome下按F12，在TimeLine标签下就可以监控获取当前页面动作的帧速、memory占用等</p&gt;
				<div class="reply"&gt;
			<a class='comment-reply-link' href='/2012/11/javascript-throttle/?replytocom=3431#respond' onclick='return addComment.moveForm("comment-3431", "3431", "respond", "3792")'&gt;回复</a&gt;		</div&gt;
	</div&gt;
</li&gt;
</ul&gt;
</li&gt;
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-3319"&gt;
	<img alt='' src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://1.gravatar.com/avatar/94be2826d00c3c7d86dc529f3e83dc9e?s=43&amp;d=wavatar&amp;r=G" class="avatar  animated tada avatar-43 photo lh_lazyimg" height='43' width='43' /&gt;<noscript&gt;<img alt='' src='http://1.gravatar.com/avatar/94be2826d00c3c7d86dc529f3e83dc9e?s=43&amp;d=wavatar&amp;r=G' class='avatar  animated tada avatar-43 photo' height='43' width='43' /&gt;</noscript&gt;	<div id="comment-3319" class="comment_c"&gt;
		<h2&gt;
			webkou						<span class="c_time"&gt;2012 年 11 月 4 日</span&gt;
		</h2&gt;
		<p&gt;太棒了 ，正好解决我之前碰到的一个难题，非常赞！！</p&gt;
				<div class="reply"&gt;
			<a class='comment-reply-link' href='/2012/11/javascript-throttle/?replytocom=3319#respond' onclick='return addComment.moveForm("comment-3319", "3319", "respond", "3792")'&gt;回复</a&gt;		</div&gt;
	</div&gt;
</li&gt;
<li class="comment byuser comment-author-azrael odd alt thread-even depth-1" id="li-comment-3284"&gt;
	<img alt='' src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://1.gravatar.com/avatar/1fd8a957b9f4bffd19ef5d178c6c5325?s=43&amp;d=wavatar&amp;r=G" class="avatar  animated tada avatar-43 photo lh_lazyimg" height='43' width='43' /&gt;<noscript&gt;<img alt='' src='http://1.gravatar.com/avatar/1fd8a957b9f4bffd19ef5d178c6c5325?s=43&amp;d=wavatar&amp;r=G' class='avatar  animated tada avatar-43 photo' height='43' width='43' /&gt;</noscript&gt;	<div id="comment-3284" class="comment_c"&gt;
		<h2&gt;
			<a onclick="javascript:pageTracker._trackPageview('/outgoing/imatlas.com');"  href='http://imatlas.com' rel='external nofollow' class='url'&gt;TAT.iAzrael</a&gt;						<span class="c_time"&gt;2012 年 11 月 2 日</span&gt;
		</h2&gt;
		<p&gt;嗯， 可以看下 underscore的delay和debounce，其实两种写法都有各自的用途</p&gt;
				<div class="reply"&gt;
			<a class='comment-reply-link' href='/2012/11/javascript-throttle/?replytocom=3284#respond' onclick='return addComment.moveForm("comment-3284", "3284", "respond", "3792")'&gt;回复</a&gt;		</div&gt;
	</div&gt;
</li&gt;
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-3276"&gt;
	<img alt='' src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_1x1.gif" file="http://1.gravatar.com/avatar/d6c22c91e9f73c5962f476d2b4e0d475?s=43&amp;d=wavatar&amp;r=G" class="avatar  animated tada avatar-43 photo lh_lazyimg" height='43' width='43' /&gt;<noscript&gt;<img alt='' src='http://1.gravatar.com/avatar/d6c22c91e9f73c5962f476d2b4e0d475?s=43&amp;d=wavatar&amp;r=G' class='avatar  animated tada avatar-43 photo' height='43' width='43' /&gt;</noscript&gt;	<div id="comment-3276" class="comment_c"&gt;
		<h2&gt;
			<a onclick="javascript:pageTracker._trackPageview('/outgoing/liunian.info');"  href='http://liunian.info' rel='external nofollow' class='url'&gt;流年</a&gt;						<span class="c_time"&gt;2012 年 11 月 2 日</span&gt;
		</h2&gt;
		<p&gt;学习了，一直没考虑到升级版的做法。</p&gt;
				<div class="reply"&gt;
			<a class='comment-reply-link' href='/2012/11/javascript-throttle/?replytocom=3276#respond' onclick='return addComment.moveForm("comment-3276", "3276", "respond", "3792")'&gt;回复</a&gt;		</div&gt;
	</div&gt;
</li&gt;
	</ol&gt;
	
	
	<div class="pagenavi"&gt;</div&gt;
 
<div class="clearfix"&gt;</div&gt;


	<div id="respond" class="commentform"&gt;
		<h3&gt;发表评论</h3&gt;
		<div class="cancel-comment-reply"&gt;<a rel="nofollow" id="cancel-comment-reply-link" href="/2012/11/javascript-throttle/#respond" style="display:none;"&gt;点击这里取消回复。</a&gt;</div&gt;
				<form action="http://www.alloyteam.com/wp-comments-post.php" method="post" id="commentform"&gt;
		
						<p&gt;<input type="text" name="author" id="author" value="" size="22" tabindex="1" /&gt;
			<label for="author"&gt;<small&gt;称呼 (必填)</small&gt;</label&gt;</p&gt;
			<p&gt;<input type="text" name="email" id="email" value="" size="22" tabindex="2" /&gt;
			<label for="email"&gt;<small&gt;邮箱 (不会被公开,必填)</small&gt;</label&gt;</p&gt;
			<p&gt;<input type="text" name="url" id="url" value="" size="22" tabindex="3" /&gt;
			<label for="url"&gt;<small&gt;网站</small&gt;</label&gt;</p&gt;
						<p&gt;<textarea name="comment" id="comment" cols="100%" rows="6" tabindex="4" onkeydown="if(event.ctrlKey&amp;&amp;event.keyCode==13){document.getElementById('submit').click();return false};"&gt;</textarea&gt;</p&gt;
			<p&gt;<input name="submit" type="submit" id="submit" tabindex="5" value="提 交" /&gt;<input type='hidden' name='comment_post_ID' value='3792' id='comment_post_ID' /&gt;
<input type='hidden' name='comment_parent' id='comment_parent' value='0' /&gt;
</p&gt;
			<p style="display: none;"&gt;<input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="4a469a13db" /&gt;</p&gt;			
		</form&gt;
				
	</div&gt;
	
</div&gt;
	</div&gt;</div&gt;
<div id="sidebar"&gt;
	<div class="widget"&gt;			<div class="textwidget"&gt;<a title="全球首个在线编程对战游戏——CodeTank官网" href="http://CodeTank.AlloyTeam.com/" target="_blank"&gt;
<img class="lh_lazyimg" src="http://www.alloyteam.com/wp-content/plugins/images-lazyload-and-slideshow/blank_250x250.gif" file="/wp-content/uploads/2012/10/codetank_banner.png"/&gt;<noscript&gt;<img src="/wp-content/uploads/2012/10/codetank_banner.png"/&gt;</noscript&gt;
</a&gt;</div&gt;
		</div&gt;<div class="widget"&gt;<div class="ilovertitle"&gt;<span class="ilovertitlespan"&gt;分类目录</span&gt;</div&gt;		<ul&gt;
	<li class="cat-item cat-item-102"&gt;<a href="http://www.alloyteam.com/category/alloylabs/" title="腾讯 Web 前端 Alloy Labs 实验室"&gt;Alloy 实验室</a&gt; (24)
<ul class='children'&gt;
	<li class="cat-item cat-item-82"&gt;<a href="http://www.alloyteam.com/category/alloylabs/html5game/" title="开发HTML5游戏
"&gt;HTML5游戏</a&gt; (10)
</li&gt;
	<li class="cat-item cat-item-37"&gt;<a href="http://www.alloyteam.com/category/alloylabs/showcase/" title="查看 作品 下的所有文章"&gt;作品</a&gt; (17)
</li&gt;
</ul&gt;
</li&gt;
	<li class="cat-item cat-item-4"&gt;<a href="http://www.alloyteam.com/category/webfrontend/" title="Web前端开发技术"&gt;Web前端</a&gt; (104)
<ul class='children'&gt;
	<li class="cat-item cat-item-6"&gt;<a href="http://www.alloyteam.com/category/webfrontend/css3/" title="查看 CSS3 下的所有文章"&gt;CSS3</a&gt; (14)
</li&gt;
	<li class="cat-item cat-item-20"&gt;<a href="http://www.alloyteam.com/category/webfrontend/html5/" title="查看 HTML5 下的所有文章"&gt;HTML5</a&gt; (32)
</li&gt;
	<li class="cat-item cat-item-5"&gt;<a href="http://www.alloyteam.com/category/webfrontend/javascript/" title="查看 JavaScript 下的所有文章"&gt;JavaScript</a&gt; (35)
</li&gt;
	<li class="cat-item cat-item-63"&gt;<a href="http://www.alloyteam.com/category/webfrontend/%e5%89%8d%e7%ab%af%e4%bc%98%e5%8c%96/" title="查看 前端优化 下的所有文章"&gt;前端优化</a&gt; (16)
</li&gt;
	<li class="cat-item cat-item-1"&gt;<a href="http://www.alloyteam.com/category/webfrontend/ued/" title="用户体验设计、可用性研究、以用户为中心的设计"&gt;用户体验设计</a&gt; (10)
</li&gt;
</ul&gt;
</li&gt;
	<li class="cat-item cat-item-38"&gt;<a href="http://www.alloyteam.com/category/%e5%89%8d%e7%ab%af%e8%b5%84%e8%ae%af/" title="查看 前端资讯 下的所有文章"&gt;前端资讯</a&gt; (43)
</li&gt;
	<li class="cat-item cat-item-11"&gt;<a href="http://www.alloyteam.com/category/team/" title="查看 团队 下的所有文章"&gt;团队</a&gt; (18)
</li&gt;
	<li class="cat-item cat-item-39"&gt;<a href="http://www.alloyteam.com/category/%e8%b5%84%e6%ba%90%e5%b7%a5%e5%85%b7/" title="查看 资源工具 下的所有文章"&gt;资源工具</a&gt; (19)
</li&gt;
		</ul&gt;
</div&gt;		<div class="widget"&gt;		<div class="ilovertitle"&gt;<span class="ilovertitlespan"&gt;最新文章</span&gt;</div&gt;		<ul&gt;
				<li&gt;<a href="http://www.alloyteam.com/2013/09/jx-framework-tutorial-c/" title="腾讯Web前端JX框架入门教程(三)"&gt;腾讯Web前端JX框架入门教程(三)</a&gt;</li&gt;
				<li&gt;<a href="http://www.alloyteam.com/2013/08/jx-framework-tutorial-b/" title="腾讯Web前端JX框架入门教程(二)"&gt;腾讯Web前端JX框架入门教程(二)</a&gt;</li&gt;
				<li&gt;<a href="http://www.alloyteam.com/2013/08/yong-aop-gai-shan-javascript-dai-ma/" title="用AOP改善javascript代码"&gt;用AOP改善javascript代码</a&gt;</li&gt;
				<li&gt;<a href="http://www.alloyteam.com/2013/08/javascript-zhong-you-qu-di-fan-ke-li-hua-ji-shu/" title="Javascript中有趣的反柯里化技术"&gt;Javascript中有趣的反柯里化技术</a&gt;</li&gt;
				<li&gt;<a href="http://www.alloyteam.com/2013/08/2013-zhong-guo-html5-feng-hui-ji-kai-fa-zhe-ri-ji-jiang-sheng-da-ju-xing/" title="2013中国HTML5峰会暨开发者日即将盛大举行"&gt;2013中国HTML5峰会暨开发者日即将盛大举行</a&gt;</li&gt;
				<li&gt;<a href="http://www.alloyteam.com/2013/02/rang-java-gen-javascript-geng-jia-qin-mi/" title="让Java跟Javascript更加亲密"&gt;让Java跟Javascript更加亲密</a&gt;</li&gt;
				<li&gt;<a href="http://www.alloyteam.com/2013/02/cong-wang-ye-jian-ting-android-she-bei-di-fan-hui-jian/" title="从网页监听Android设备的返回键"&gt;从网页监听Android设备的返回键</a&gt;</li&gt;
				<li&gt;<a href="http://www.alloyteam.com/2012/11/somatosensory-game-wall-introduced/" title="腾讯AlloyTeam体感游戏《墙来了WallComing》介绍"&gt;腾讯AlloyTeam体感游戏《墙来了WallComing》介绍</a&gt;</li&gt;
				<li&gt;<a href="http://www.alloyteam.com/2012/11/the-css3-ui-lib-library-introduction/" title="腾讯 AlloyTeam 的 CSS3 UI Lib库简介"&gt;腾讯 AlloyTeam 的 CSS3 UI Lib库简介</a&gt;</li&gt;
				<li&gt;<a href="http://www.alloyteam.com/2012/11/mozilla-html5-bootcamp-seminar-ntu-singapore/" title="Mozilla HTML5 Bootcamp &amp; Seminar 活动回顾"&gt;Mozilla HTML5 Bootcamp &#038; Seminar 活动回顾</a&gt;</li&gt;
				</ul&gt;
		</div&gt;<div class="widget"&gt;<div class="ilovertitle"&gt;<span class="ilovertitlespan"&gt;注册/登录</span&gt;</div&gt;			<ul&gt;
						<li&gt;<a href="http://www.alloyteam.com/wp-login.php"&gt;登录</a&gt;</li&gt;
			<li&gt;<a href="http://www.alloyteam.com/feed/" title="使用 RSS 2.0 订阅本站点内容"&gt;文章 <abbr title="Really Simple Syndication"&gt;RSS</abbr&gt;</a&gt;</li&gt;
			<li&gt;<a href="http://www.alloyteam.com/comments/feed/" title="使用 RSS 订阅本站点的所有文章的近期评论"&gt;评论 <abbr title="Really Simple Syndication"&gt;RSS</abbr&gt;</a&gt;</li&gt;
			<li&gt;<a href="http://cn.wordpress.org/" title="基于 WordPress，一个优美、先进的个人信息发布平台。"&gt;WordPress.org</a&gt;</li&gt;
						</ul&gt;
</div&gt;
</div&gt;
﻿ <div class="clearfix"&gt;</div&gt;

</div&gt;
</div&gt;
<div id="footer"&gt;
	<div id="footerbar"&gt;
    <!--Copyright--&gt;
		<div class="copyright"&gt; 
			<p&gt;
				<span&gt;
					Copyright &copy;&nbsp; 2011-2013  <a href="http://www.alloyteam.com"&gt;Tencent AlloyTeam</a&gt;. All Rights Reserved. Powered By <a href="http://wordpress.org/"&gt;WordPress</a&gt;.
				</span&gt;
			</p&gt;
		</div&gt;
    <!--Copyright End--&gt;     
	</div&gt;
<!--[if !IE]&gt;<!--&gt;
<script type="text/javascript"&gt;
	window.onerror=function(){return true;}

	var alloyrefer = document.referrer;
	var hasClassListProperty = document && Object.prototype.hasOwnProperty.call(document.documentElement,'classList');
	var addClass = function(){
        if (hasClassListProperty) {
            return function (el, className) {
                if (!el || !className ) {
                    return;
                }
                el.classList.add(className);
            };
        } else {
            return function (el, className) {
                if (!el || !className ) {
                    return;
                }
                el.className += ' ' + className;
            };
        }
	}();
	var refername = "www.alloyteam.com";
	var flag = alloyrefer.indexOf(refername) === -1;
	if(flag && alloyrefer !== ""){	
		var main = document.getElementById("main");
		var alloyteam = document.getElementById("alloyteam");
		var alloyteam2 = document.getElementById("alloyteam2");
		var tencentInfo = document.getElementById("tencentInfo");
		var header = document.getElementById("header");	
		var alloy = document.getElementById("alloy");	
		addClass(alloy,'alloy'); 
		addClass(header,'header');		
		addClass(main,'main');
		addClass(alloyteam,'alloyteam');
		addClass(alloyteam2,'alloyteam');
		addClass(tencentInfo,'tencentInfo');

	}
	document.body.style.display = "block";
	if(flag){
		setTimeout(function(){
			if (navigator.userAgent.indexOf('Firefox') &gt;= 0){
				document.documentElement.scrollTop = 1;
				document.documentElement.scrollTop = 0;
			}else{
				document.body.scrollTop = 2;
				document.body.scrollTop = 0;   
			}
				
		},3000);		
	}
</script&gt;
<!--<![endif]--&gt;  
<script type="text/javascript" src="http://www.alloyteam.com/wp-content/themes/alloyteam/js/all.js"&gt;</script&gt;
<script type="text/javascript" src="http://www.alloyteam.com/wp-content/themes/alloyteam/comments-ajax.js"&gt;</script&gt;

<!-- tracker added by Ultimate Google Analytics plugin v1.6.0: http://www.oratransplant.nl/uga --&gt;
<script type="text/javascript"&gt;
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script&gt;
<script type="text/javascript"&gt;
var pageTracker = _gat._getTracker("UA-23019343-3");
pageTracker._initData();
pageTracker._trackPageview();
</script&gt;
<p&gt;<a onclick='document.cookie="wpmp_switcher=mobile;path=/;expires=Tue, 01-01-2030 00:00:00 GMT";' href='http://www.alloyteam.com/2012/11/javascript-throttle/?wpmp_switcher=mobile'&gt;Switch to our mobile site</a&gt;</p&gt;<script type='text/javascript' src='http://www.alloyteam.com/wp-content/plugins/dynamic-to-top/js/libs/jquery.easing.js?ver=1.3'&gt;</script&gt;
<script type='text/javascript'&gt;
/* <![CDATA[ */
var mv_dynamic_to_top = {"text":"To Top","version":"0","min":"300","speed":"300","easing":"easeInOutExpo","margin":"20"};
/* ]]&gt; */
</script&gt;
<script type='text/javascript' src='http://www.alloyteam.com/wp-content/plugins/dynamic-to-top/js/dynamic.to.top.min.js?ver=3.4.2'&gt;</script&gt;

</div&gt;
<script src="http://www.alloyteam.com/wp-includes/syntaxhighlighter/scripts/shCore.js"&gt;</script&gt;
<script src="http://www.alloyteam.com/wp-includes/syntaxhighlighter/scripts/shAutoloader.js"&gt;</script&gt;
<script&gt;
function path()
{
  var args = arguments,
      result = []
      ;
  for(var i = 0; i < args.length; i++)
      result.push(args[i].replace('@', 'http://www.alloyteam.com/wp-includes/syntaxhighlighter/scripts/'));
  return result
};
SyntaxHighlighter.autoloader.apply(null, path(
  'applescript            @shBrushAppleScript.js',
  'actionscript3 as3      @shBrushAS3.js',
  'bash shell             @shBrushBash.js',
  'coldfusion cf          @shBrushColdFusion.js',
  'cpp c                  @shBrushCpp.js',
  'c# c-sharp csharp      @shBrushCSharp.js',
  'css                    @shBrushCss.js',
  'delphi pascal          @shBrushDelphi.js',
  'diff patch pas         @shBrushDiff.js',
  'erl erlang             @shBrushErlang.js',
  'groovy                 @shBrushGroovy.js',
  'java                   @shBrushJava.js',
  'jfx javafx             @shBrushJavaFX.js',
  'js jscript javascript  @shBrushJScript.js',
  'perl pl                @shBrushPerl.js',
  'php                    @shBrushPhp.js',
  'text plain             @shBrushPlain.js',
  'py python              @shBrushPython.js',
  'ruby rails ror rb      @shBrushRuby.js',
  'sass scss              @shBrushSass.js',
  'scala                  @shBrushScala.js',
  'sql                    @shBrushSql.js',
  'vb vbnet               @shBrushVb.js',
  'xml xhtml xslt html    @shBrushXml.js'
));
SyntaxHighlighter.defaults.toolbar = false;
SyntaxHighlighter.defaults.title = '双击选中源代码';
SyntaxHighlighter.all();
</script&gt;
</body&gt;
</html&gt;
        </textarea>
        </div>
        <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
        <script src="../js/clearly.js"></script>
        <script>
            var html = window.__getMyClearlyResults().html;
            $('#main_content_wrap').html(html);
        </script>
  </body>
</html>
