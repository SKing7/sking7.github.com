<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>The Sea of Ideas</title>
<link rel="stylesheet" href="../css/article.css" />
</head>
<body>
<div class="m-content">
<h1>The Sea of Ideas</h1>
<div class="post-content post-content-single right-col"><h3><span id="Introduction">Introduction</span></h3><p>You may have heard the term <i>frames per second</i> (fps), and that 60 fps is a really good target for everything animated. But most console games run at 30 fps, and motion pictures generally run at 24 fps, so why should you go all the way to 60 fps?</p><h3><span id="Frames_per_second">Frames… per second?</span></h3><h4><span id="The_early_days_of_filmmaking">The early days of filmmaking</span></h4><div id="attachment_2309" class="wp-caption alignnone"><img class="wp-image-2309 size-full" src="http://paulbakaus.com/wp-content/uploads/2014/05/800px-Charlton_Heston_as_Antony_in_Julius_Caesar_BW_image_by_Chalmers_Butterfield.jpg" alt="800px-Charlton_Heston_as_Antony_in_Julius_Caesar,_B&amp;W_image_by_Chalmers_Butterfield" width="800" height="563" /><p class="wp-caption-text">A production scene from the 1950 Hollywood film Julius Caesar starring Charlton Heston. Via&nbsp;<a href="http://en.wikipedia.org/wiki/File:Charlton_Heston_as_Antony_in_Julius_Caesar,_B%26W_image_by_Chalmers_Butterfield.jpg">Wikipedia</a>.</p></div><p>When the first filmmakers started to record motion pictures, many discoveries weren’t made scientifically, but by trial and error. The first cameras and projectors were hand controlled, and in the early days analog film was very expensive – so expensive that when directors recorded motion on camera, they used the lowest acceptable frame rate for portrayed motion in order to conserve film. That threshold usually hovered at around 16 fps to 24 fps.</p><p>When sound was added to the physical film (as an audio track next to the film) and played back along with the video at the same pace, hand-controlled playback suddenly became a problem. It turns out that humans can deal with a variable frame rate, but not with a variable sound rate (where both tempo and pitch change), so filmmakers had to settle on a steady rate for both. That rate was 24 fps and, almost a hundred years later, it remains the standard for motion pictures. (In television, frame rates had to be modified slightly due to the way CRT TVs sync with the AC power frequency.)</p><h4><span id="The_human_eye_vs_frames">The human eye vs. frames</span></h4><p>But if 24 fps is barely acceptable for motion pictures, then what is the optimal frame rate? This is a trick question, as there is none.</p><div id="attachment_2322" class="wp-caption alignnone"><img class="size-full wp-image-2322" src="http://paulbakaus.com/wp-content/uploads/2014/05/800px-Ventral-dorsal_streams.svg_.png" alt="Motion perception is the process of inferring the speed and direction of elements in a scene based on visual, vestibular and proprioceptive inputs. Although this process appears straightforward to most observers, it has proven to be a difficult problem from a computational perspective, and extraordinarily difficult to explain in terms of neural processing." width="800" height="571" /><p class="wp-caption-text">Motion perception is the process of inferring the speed and direction of elements in a scene based on visual, vestibular and proprioceptive inputs. Although this process appears straightforward to most observers, it has proven to be a difficult problem from a computational perspective, and extraordinarily difficult to explain in terms of neural processing. – Wikipedia</p></div><p>The eye is not a camera. It does not see motion as a series of frames. Instead, it perceives a continuous stream of information rather than a set of discrete images. Why, then, do frames work at all?</p><p>Two important phenomena explain why we see motion when looking at quickly rotated images: <i>persistence of vision</i> and the <i>phi phenomenon</i>.</p><p>Most filmmakers think <a href="http://en.wikipedia.org/wiki/Persistence_of_vision">persistence of vision</a> is the sole reason, which isn’t true; although observed but not scientifically proven, persistence of vision is the phenomenon by which an afterimage seemingly persists for approximately 40 milliseconds (ms) on the retina of the eye. This explains why we don’t see black flicker in movie theaters or (usually) on CRTs.</p><div id="attachment_2323" class="wp-caption alignnone"><img class="size-full wp-image-2323" src="http://paulbakaus.com/wp-content/uploads/2014/05/Phi_phenomenom_no_watermark.gif" alt="The Phi Phenomenon in action. Notice that even nothing is moving, it still feels that way?" width="340" height="98" /><p class="wp-caption-text">The Phi Phenomenon in action. Notice that even though nothing is moving, it still feels that way?</p></div><p>The <a href="https://en.wikipedia.org/wiki/Phi_phenomenon">phi phenomenon</a>, on the other hand, is the true reason we perceive motion when being shown individual images. It’s the optical illusion of perceiving continuous motion between separate objects viewed rapidly in succession.</p><p>Our brain is very good at helping us fake it – not perfect, but good enough. Using a series of still frames to simulate motion creates perceptual artifacts, depending largely on the frame rate. <b>So no frame rate will ever be optimal, but we can get pretty close</b>.</p><h4><span id="Common_frame_rates_from_poor_to_perfect">Common frame rates, from poor to perfect</span></h4><p>To get a better idea of the absolute scale of frame rate quality, here’s an overview chart. Keep in mind that because the eye is complex and doesn’t see individual frames, none of this is hard science, merely observations by various people over time.</p><table><tbody><tr><td>10-12 fps</td><td><a href="http://en.wikipedia.org/wiki/Frame_rate">Absolute minimum</a> for motion portrayal. Anything below is recognized as individual images.</td></tr><tr><td>&lt; 16 fps</td><td>Causes visible stutter, headaches for many.</td></tr><tr><td>24 fps</td><td>Minimum tolerable to perceive motion, cost efficient.</td></tr><tr><td>30 fps</td><td>Much better than 24 fps, but not lifelike. The standard for NTSC video, due to the AC signal frequency.</td></tr><tr><td>48 fps</td><td>Good, but not good enough to feel entirely real (even though <a href="http://en.wikipedia.org/wiki/Frame_rate#Background">Thomas Edison thought so</a>). Also see <a href="http://movieline.com/2012/12/14/hobbit-high-frame-rate-science-48-frames-per-second/">this article</a>.</td></tr><tr><td>60 fps</td><td>The sweet spot; most people won’t perceive much smoother images above 60 fps.</td></tr><tr><td>∞ fps</td><td>To date, science hasn’t proven or observed our theoretical limit.</td></tr></tbody></table><p>Note: Even though 60 fps is observed to be a good number for smooth animations, that’s not all there is to a great picture. <i>Contrast</i> and <i>sharpness</i> can still be improved beyond that number. As an example of how sensitive our eyes are to changes in brightness, there have been scientific studies showing that test subjects can perceive a white frame between a thousand black frames. If you want to go deeper, <a href="http://amo.net/NT/02-21-01FPS.html">here</a> <a href="http://www.ncbi.nlm.nih.gov/pubmed/15385611">are</a> <a href="http://en.wikipedia.org/wiki/Frame_rate">a</a> <a href="http://xcorr.net/2011/11/20/whats-the-maximal-frame-rate-humans-can-perceive/">few</a> <a href="http://skeptics.stackexchange.com/questions/3348/can-the-human-eye-distinguish-frame-rates-above-60-hz">resources</a>.</p><h4><span id="Demo_time_How_does_24_fps_compare_to_60_fps">Demo time: How does 24 fps compare to 60 fps?</span></h4><p><i>Thanks to <a href="http://marctv.de/" target="_blank">Marc Tönsing</a> for creating this fantastic comparison.</i></p><h4><span id="HFR_Rewiring_your_brain_with_the_help_of_a_Hobbit">HFR: Rewiring your brain with the help of a Hobbit</span></h4><p>“The Hobbit” was the first popular motion picture shot at twice the standard frame rate, 48 fps, called <i>high frame rate</i> or HFR. Unfortunately not everyone was happy about the new look. There were multiple reasons for this, but the biggest one by far was the so-called <a href="http://en.wikipedia.org/wiki/Motion_interpolation">soap opera effect</a>.</p><p>Most people’s brains have become trained to assume that 24 fps equals expensive movies, while 50-60 half frames (interlaced TV signals) reminds us of TV productions and destroys the “<a href="http://en.wikipedia.org/wiki/Film_look">film look</a>”. A similar effect is created when enabling motion interpolation on your TV for 24p (progressive) material, disliked by many viewers (even though modern algorithms are usually pretty good at rendering smooth motion without artefacts, a common reason naysayers dismiss the feature).</p><p>Even though higher frame rates are measurably better (by making motion less jerky and fighting motion blur), there’s no easy answer on how to make them <i>feel</i> better. It requires retraining your brain, and while some viewers reported that everything was fine after ten minutes into “The Hobbit”, others have sworn off HFR entirely.</p><h4><span id="Cameras_vs_CGI_The_story_of_motion_blur">Cameras vs. CGI: The story of motion blur</span></h4><p>But if 24 fps is supposedly barely tolerable, why have you never walked out of a cinema, complaining that the picture was too choppy? It turns out that video cameras have a natural feature – or bug, depending on your definition – that CGI (including CSS animation!) is missing: <i>motion blur</i>.</p><p>Once you see it, the lack of motion blur in video games and in software is painfully obvious. Dmitri Shuralyov has created a <a href="https://dl.dropboxusercontent.com/u/8554242/dmitri/projects/MotionBlurDemo/MotionBlurDemo.html">nifty WebGL demo</a> that simulates motion blur. Move your mouse around quickly to see the effect.</p><p>Motion blur, as defined at Wikipedia, is</p><blockquote><p>…the apparent streaking of rapidly moving objects in a still image or a sequence of images such as a movie or animation. It results when the image being recorded changes during the recording of a single frame, either due to rapid movement or long exposure.</p></blockquote><p>In this case, a picture says it better.</p><p><em>Images courtesy of Evans &amp; Sutherland Computer Corporation, Salt Lake City, UT. Used by permission. All rights reserved.</em></p><p>Motion blur “cheats” by <b>portraying a lot of motion in a single frame at the expense of detail</b>. This is the reason a movie displayed at 24 fps looks relatively acceptable compared to a video game displayed at 24 fps.</p><p>But how is motion blur created in the first place? In the words of <a href="http://www.es.com/Products/60Frames.html">E&amp;S</a>, pioneers at using 60 fps for their mega dome screens:</p><blockquote><p>When you shoot film at 24 fps, the camera only sees and records a portion of the motion in front of the lens, and the shutter closes between each exposure, allowing the camera to reposition the film for the next frame. This means that the shutter is closed between frames as long as it is open. With fast motion and action in front of the camera, the frame rate is actually too slow to keep up, so the imagery ends up being blurred in each frame (because of the exposure time).</p></blockquote><p>Here’s a simplified graphic explaining the process.</p><p>Classical movie cameras use a so-called <a href="http://en.wikipedia.org/wiki/Rotary_disc_shutter">rotary disc shutter</a> to do the job of capturing motion blur. By rotating the disc, you open the shutter for a controlled amount of time at a certain angle and, depending on that angle, you change the exposure time on the film. If the exposure time is short, less motion is captured on the frame, resulting in less motion blur; if the exposure time is long, more motion is captured on the frame, resulting in more motion blur.</p><div id="attachment_2314" class="wp-caption alignnone"><img class="wp-image-2314 size-full" src="http://paulbakaus.com/wp-content/uploads/2014/05/image03.png" alt="image03" width="713" height="329" /><p class="wp-caption-text">The rotary disc shutter in action. Via Wikipedia.</p></div><p>If motion blur is such a good thing, why would a movie maker want to get rid of it? Well, by adding motion blur, you lose detail; by getting rid of it, you lose smoothness. So when directors want to shoot scenes that require a lot of detail, such as explosions with tiny particles flying through the air or complicated action scenes, they often choose a tight shutter that reduces blur and creates a crisp, <a href="http://en.wikipedia.org/wiki/Stop_motion">stop motion</a>-like look.</p><div id="attachment_2315" class="wp-caption alignnone"><img class="wp-image-2315 size-full" src="http://paulbakaus.com/wp-content/uploads/2014/05/image12.png" alt="image12" width="500" height="150" /><p class="wp-caption-text">Motion Blur capture visualized. Via Wikipedia.</p></div><h5><span id="So_why_dont_we_just_add_it">So why don’t we just add it?</span></h5><p>Sadly, even though motion blur would make lower frame rates in games and on web sites much more acceptable, adding it is often simply too expensive. To recreate perfect motion blur, you would need to capture four times the number of frames of an object in motion, and then do temporal filtering or anti-aliasing (there is a great explanation by Hugo Elias <a href="http://freespace.virgin.net/hugo.elias/graphics/x_motion.htm">here</a>). If making a 24 fps source more acceptable requires you to render at 96 fps, you might as well just bump up the frame rate in the first place, so it’s often not an option for live content. Exceptions are video games that know the trajectory of moving objects in advance and can <a href="http://www.volnaiskra.com/2012/03/why-more-games-should-support-motion.html">approximate motion blur</a>, as well as declarative animation systems such as CSS Animations, and of course CGI films like Pixar’s.</p><h3><span id="60_Hz_60_fps_Refresh_rates_and_why_they_matter">60 Hz != 60 fps: Refresh rates and why they matter</span></h3><p><i>Note: Hertz (Hz) is usually used when talking about refresh rates, while frames per second (fps) is an established term for frame-based animation. To not confuse the two, we’ll use Hz for refresh rates and fps for frame rates.</i></p><p>If you’ve ever wondered why Blu-Ray playback is so poor on your laptop, it’s often because the frame rate is not evenly divisible by the <a href="http://en.wikipedia.org/wiki/Refresh_rate">refresh rate</a> (DVD’s, on the other hand, are converted before they arrive in your drive). Yes, the refresh rate and frame rate are not the same thing. Per Wikipedia, “[..] the refresh rate includes the repeated drawing of identical frames, while frame rate measures how often a video source can feed an entire frame of new data to a display.” <b>So the frame rate describes the number of individual frames shown on screen, while the refresh rate describes the number of times the image on screen is refreshed or updated</b>.</p><p>In the best case, refresh rate and and frame rate are in perfect sync, but there are good reasons to use three times the refresh rate of the frame rate in certain scenarios, depending on the projection system being used.</p><h4><span id="A_new_problem_with_every_display">A new problem with every display</span></h4><h5><span id="Movie_projectors">Movie projectors</span></h5><p>Many people think that movie projectors work by rolling a film past a light source. But if that were the case, we would only see a continuous blurry image. Instead, as with capturing the film in the first place, a <a href="http://en.wikipedia.org/wiki/Movie_projector#Shutter">shutter</a> is used to project separate frames. After a frame is shown, the shutter is closed and no light is let through while the film moves, after which the shutter is opened to show the next frame, and the process repeats.</p><div id="attachment_2316" class="wp-caption alignnone"><img class="wp-image-2316 size-full" src="http://paulbakaus.com/wp-content/uploads/2014/05/image09.png" alt="image09" width="838" height="340" /><p class="wp-caption-text">A movie projector’s shutter in action. From <a href="http://en.wikipedia.org/wiki/Movie_projector#Shutter" target="_blank">Wikipedia</a>.</p></div><p>That isn’t the whole picture, though. Sure, this process would show you a movie, but the flicker caused by the screen being black half the time would drive you crazy. This “black out” between the frames is what would destroy the illusion. To compensate for this issue, movie projectors actually close the shutter twice or even three times during a single frame.</p><p>Of course, this seems completely counter-intuitive – why would adding <i>more</i> flicker feel like <i>less</i> flicker? The answer is that it reduces the “black out” period, which has a disproportionate effect on the vision system. &nbsp;The&nbsp;<a href="http://en.wikipedia.org/wiki/Flicker_fusion_threshold">flicker fusion threshold</a> (closely related to persistence of vision) describes the effect that these black out periods have. At roughly ~45Hz “black out” periods need to be less than ~60% of the frame time, which is why the double shutter method for movies works. At above 60Hz the “black out” period can be over 90% of the frame time (needed by displays like CRTs).The full concept is subtly more complicated, but as a rule of thumb, here’s how to prevent the perception of flicker.</p><ul><li>Use a different display type that doesn’t flicker due to no “black out” between frames – that is, always keep a frame on display</li><li>Have constant, non-variable black phases that modulate at less than 16 ms</li></ul><h5><span id="Flickery_CRTs">Flickery CRTs</span></h5><p>CRT monitors and TVs work by shooting electrons onto a fluorescent screen containing <a href="http://en.wikipedia.org/wiki/Cathode_ray_tube#Phosphor_persistence">low persistence phosphor</a>. How low is the persistence? So low that you never actually see a full image! Instead, while the electron scan is running, the lit-up phosphor loses its intensity in <b>less than 50 microseconds – that’s 0.05 milliseconds</b>! By comparison, a full frame on your Android or iPhone is shown for 16.67ms.</p><div id="attachment_2317" class="wp-caption alignnone"><img class="wp-image-2317 size-full" src="http://paulbakaus.com/wp-content/uploads/2014/05/image02.png" alt="image02" width="320" height="240" /><p class="wp-caption-text">The refresh scan, captured at a 1/3000 second exposure. From <a href="http://en.wikipedia.org/wiki/File:Refresh_scan.jpg" target="_blank">Wikipedia</a>.</p></div><p>So the whole reason that CRTs work in the first place is persistence of vision. Because of the long black phase between light samples, CRTs are often perceived to flicker – especially in PAL, which operates at 50 Hz, versus NTSC, which operates at 60 Hz, right where the flicker fusion threshold kicks in.</p><p>To make matters even more complicated, the eye doesn’t perceive flicker equally in every corner. In fact, peripheral vision, though much blurrier than direct vision, is more sensitive to brightness and has a significantly faster response time. This was likely very useful in the caveman days for detecting wild animals leaping out from the side to eat you, but it causes plenty of headaches when watching movies on a CRT up close or from an odd angle.</p><h5><span id="Blurry_LCDs">Blurry LCDs</span></h5><p>Liquid Crystal Displays (LCDs), categorized as a <a href="http://en.wikipedia.org/wiki/Sample_and_hold">sample-and-hold</a> type display, are pretty amazing because they don’t have any black phases in the first place. The current image just stays up until the display is given a new image.</p><p>Let me repeat that: <b>There is no refresh-induced flicker with LCDs, no matter how low the refresh rate</b>.</p><p>But now you’re thinking, “Wait – I’ve been shopping for TVs recently and every manufacturer promoted the hell out of a better refresh rate!” And while a large part of it is surely marketing, higher refresh rates with LCDs do solve a problem – just not the one you’re thinking of.</p><h6><span id="Eye_induced_motion_blur">Eye induced motion blur</span></h6><p>LCD manufacturers implement higher and higher refresh rates because of <a href="http://en.wikipedia.org/wiki/Display_motion_blur">display or eye-induced motion blur</a>. That’s right; not only can a camera record motion blur, but your eyes can as well! Before explaining how this happens, here are two mind blowing demos that help you experience the effect (click the image).</p><p><a href="http://www.testufo.com/#test=eyetracking" target="_blank"><img class="alignnone size-full wp-image-2318" src="http://paulbakaus.com/wp-content/uploads/2014/05/image06.png" alt="image06" width="875" height="405" /></a></p><p>In this <a href="http://www.testufo.com/#test=eyetracking">first experiment</a>, focusing your vision onto the unmoving flying alien at the top allows you to clearly see the white lines, while focusing on the moving alien at the bottom magically makes the white lines disappear. In the words of the Blur Busters website, “Your eye tracking causes the vertical lines in each refresh to be blurred into thicker lines, filling the black gaps. Short-persistence displays (such as CRT or <a href="http://www.blurbusters.com/faq/120hz-monitors/">LightBoost</a>) eliminate this motion blur, so this motion test looks different on those displays.”</p><p>In fact, the effect of our eyes tracking certain objects can’t ever be fully prevented, and is often such a big problem with movies and film productions that there are people whose <i>whole job</i> is to predict what the eye will be tracking in a scene and to make sure that there is nothing else to disturb it.</p><p>In the <a href="http://www.testufo.com/#test=blackframes">second experiment</a>, the folks at Blur Busters try to recreate the effect of an LCD display vs. short-persistence displays by simply inserting black frames between display frames and, amazingly, <a href="http://www.testufo.com/#test=blackframes">it works</a>.</p><p>As illustrated earlier, motion blur can either be a blessing or a curse – it sacrifices sharpness for smoothness, and the blurring added by your eyes is never desirable. So why is motion blur such a big issue with LCDs compared to CRTs that do not have such issues? Here’s an explanation of what happens if a frame that has been captured in a short amount of time is held on screen longer than expected.</p><p><img class="alignnone size-full wp-image-2319" src="http://paulbakaus.com/wp-content/uploads/2014/05/image08.png" alt="image08" width="1113" height="520" /></p><p>The following quote from Dave Marsh’s <a href="http://msdn.microsoft.com/en-us/windows/hardware/gg463407.aspx">great MSDN article about temporal rate conversion</a> is amazingly accurate and timely for a sixteen-year-old article:</p><blockquote><p>When a pixel is addressed, it is loaded with a value and stays at that light output value until it is next addressed. From an image portrayal point of view, this is the wrong thing to do. The sample of the original scene is only valid for an instant in time. After that instant, the objects in the scene will have moved to different places. It is not valid to try to hold the images of the objects at a fixed position until the next sample comes along that portrays the object as having instantly jumped to a completely different place.</p></blockquote><p>And, his conclusion:</p><blockquote><p>Your eye tracking will be trying to smoothly follow the movement of the object of interest and the display will be holding it in a fixed position for the whole frame. The result will inevitably be a blurred image of the moving object.</p></blockquote><p>Yikes! So what you want to do is flash a sample onto the retina and then let your eye, in combination with your brain, do the motion interpolation.</p><h4><span id="Extra_So_how_much_does_our_brain_interpolate_really">Extra: So how much does our brain interpolate, really?</span></h4><p>Nobody knows for sure, but it’s clear that there are plenty of areas where your brain helps to create the final image shown to your brain. Take this wicked <a href="http://visionaryeyecare.wordpress.com/2008/08/04/eye-test-find-your-blind-spot-in-each-eye/" target="_blank">blind spot test</a> as example: Turns out there’s a blind spot right where the optic nerve head on the retina is, a spot that’s supposed to be black but gets filled in which interpolated interpolation by our brain.</p><h3><span id="Frames_and_screen_refreshes_are_not_mix_and_match">Frames and screen refreshes are not mix and match!</span></h3><p>As mentioned earlier, there are problems when the refresh rate and frame rate are not in sync; that is, when the refresh rate is not evenly divisible by the frame rate.</p><h4><span id="Problem_Screen_tearing">Problem: Screen tearing</span></h4><p>What happens when your movie or app begins to draw a new frame to the screen, and the screen is in the middle of a refresh? It literally tears the frame apart (<a href="http://www.youtube.com/watch?v=jVAFuUAKPMc">see it on video</a>).</p><p>Here’s what happens behind the scenes. Your CPU/GPU does some processing to compose a frame, then submits it to a buffer that must wait for a monitor to trigger a refresh through the driver stack. The monitor then reads the pending frame and starts to display it (you need double buffering here so that there is always one image being presented and one being composited). Tearing happens when the buffer that’s <i>currently</i> being drawn by the monitor from top to bottom gets swapped by the graphics card with the <i>next</i> frame pending consumption. The result is that the top half of your screen is from frame A (the frame that is drawn too early before the refresh), while the bottom half is from frame B (the frame that was drawn before frame A).</p><p>Note: To be precise, screen tearing can occur even when both refresh rate and frame rate match! They need to match both <b>phase</b> and <b>frequency</b>.</p><p>That’s clearly not what we want. Fortunately, there is a solution!</p><h4><span id="Solution_Vsync">Solution: Vsync</span></h4><p>Screen tearing can be eliminated through Vsync, short for vertical synchronization. It’s a feature of either hardware or software that ensures that tearing doesn’t happen – that your software can only draw a new frame when the previous refresh is complete. Vsync throttles the consume-vs.-display frequency of the above process so that the image being presented doesn’t change in the middle of the screen.</p><p>Thus, if the new frame isn’t ready to be drawn in the next screen refresh, the screen simply recycles the previous frame and draws it again. This, unfortunately, leads to the next problem.</p><h4><span id="New_problem_Jitter">New problem: Jitter</span></h4><p>Even though our frames are now at least not torn, the playback is still far from smooth. This time, the reason is an issue that is so problematic that every industry has been giving it new names: judder, <a href="http://en.wikipedia.org/wiki/Jitter">jitter</a>, stutter, <a href="http://jankfree.org/">jank</a>, or hitching. Let’s settle on “jitter”.</p><p><b>Jitter happens when an animation is played at a different frame rate than the rate at which it was captured (or supposed to play). Often, this means Jitter happens when the playback rate is unsteady or variable, rather than fixed (as most content is recorded at fixed rates)</b>. Unfortunately, this is exactly what happens when trying to display, for example, 24 fps on a screen with 60 refreshes per second. Every once in a while, because 60 cannot be evenly divided by 24, a single frame must be presented twice (when not utilizing more advanced conversions), disrupting smooth effects such as camera pans.</p><p>In games and websites with lots of animation, this is even more apparent. Many can’t keep their animation at a constant, divisible frame rate. Instead, they have high variability due to reasons such as separate graphic layers running independently of each other, processing user input, and so on. This might shock you, but an animation that is capped at 30 fps looks much, much better than the same animation varying between 40 fps and 50 fps.</p><p>You don’t have to believe me; experience it with your own eyes. <a href="http://www.testufo.com/stutter#demo=microstuttering&amp;foreground=FFFFFF&amp;background=000000&amp;max=12&amp;pps=720">Here’s a powerful microstutter demo</a>.</p><h3><span id="Fighting_jitter">Fighting jitter</span></h3><h4><span id="During_conversion_Telecine">During conversion: Telecine</span></h4><p><a href="http://en.wikipedia.org/wiki/Telecine">Telecine</a> describes the process of converting motion picture film to video. Expensive professional converters such as those used by TV stations do this mostly through a process called <i>motion vector steering</i> that can create very convincing new fill frames, but two other methods are still common.</p><h5><span id="Speed_up">Speed up</span></h5><p>When trying to convert from 24 fps to a PAL signal at 25 fps (e.g., TV or video in the UK), a common practice is to simply speed up the original video by 1/25th of a second. So if you’ve ever wondered why “Ghostbusters” in Europe is a couple of minutes shorter, that’s why. While this method often works surprisingly well for video, it’s terrible for audio. How bad can 1/25th of a second realistically be without an additional pitch change, you ask? Almost a half-tone bad.</p><p>Take this real example of a major fail. When Warner released the extended Blu-Ray collection of Lord of the Rings in Germany, they reused an already PAL-corrected sound master for the German dub, which was sped up by 1/25th, then pitched down to correct the change. But because Blu-Ray is 24 fps, they had to convert it back, so they slowed it down again. Of course, it’s a bad idea to do such a two-fold conversion anyway, as it is a lossy process, but even worse, when slowing it down again to match the Blu-Ray video, <i>they forgot to change the pitch back</i>, so every actor in the movie suddenly sounded super depressing, speaking a half-tone lower. Yes, this actually happened, and yes, there was fan outrage, lots of tears, lots of bad copies, and lots of money wasted on a large media recall.</p><p>The moral of the story: speed change is not a great idea.</p><h5><span id="Pulldown">Pulldown</span></h5><p>Converting movie material to <a href="http://en.wikipedia.org/wiki/NTSC">NTSC</a>, the US standard for television, isn’t as simple as speeding up the movie, because changing 24 fps to 29.97 fps would mean a 24.875% speed up. Unless you really love chipmunks, this may be not the best option.</p><p>Instead, a process called <a href="http://en.wikipedia.org/wiki/Three-two_pull_down">3:2 pulldown</a> was invented (among others), which became the most popular way of conversion. It’s the process of taking 4 original frames and converting them to 10 interlaced half-frames, or 5 full frames. Here’s a picture describing the process.</p><div id="attachment_2321" class="wp-caption alignnone"><img class="size-full wp-image-2321" src="http://paulbakaus.com/wp-content/uploads/2014/05/image05.png" alt="2:3 Pull down in action. From Wikipedia." width="1000" height="1025" /><p class="wp-caption-text">3:2 Pulldown in action. From Wikipedia.</p></div><p>On an interlaced screen (i.e. a CRT), the video fields in the middle are shown in tandem, each of them interlaced, and so are made up of only every second row of pixels. The original frame, A, is split into two half frames that are both shown on screen. The next frame, B, is also split but the odd video field is shown twice, so it’s distributed across 3 half frames and, in total, we arrive at 10 distributed half frames for the 4 original full frames.</p><p>This works fairly well when portrayed on an interlaced screen (such as a CRT TV) at roughly 60 video fields (practically half frames, every odd or even row blank), as you never see two of these together at once. But it can look terrible on displays that don’t support half frames and must composite them together again into 30 full frames, as in the row at the far right of the picture. This is because every 3rd and 4th frame is stitched together from two different original frames, resulting in what I call a “Frankenframe”. This looks especially bad with fast motion, when the difference between the two original frames is significant.</p><p>So pulldown sounds nifty, but it isn’t a general solution either. Then what is? Is there really no holy grail? It turns out there is, and the solution is deceptively simple!</p><h4><span id="During_display_G-Sync_Freesync_and_capping">During display: G-Sync, Freesync and capping</span></h4><p><img class="alignleft size-medium wp-image-2324" src="http://paulbakaus.com/wp-content/uploads/2014/05/NVIDIA_GSync-24.1-229x300.jpg" alt="NVIDIA_GSync-24.1" width="229" height="300" /></p><p>Much better than trying to work around a fixed refresh rate is, of course, a variable refresh rate that is always in sync with the frame rate, and that’s exactly what <a href="http://www.geforce.com/hardware/technology/g-sync">Nvidia’s G-Sync technology</a> and <a href="http://www.anandtech.com/show/7641/amd-demonstrates-freesync-free-gsync-alternative-at-ces-2014">AMD’s Freesync</a> do. G-Sync is a module built into monitors that allows them to synchronize to the output of the GPU instead of synchronizing the GPU to the monitor, while Freesync achieves the same <a href="http://www.blurbusters.com/vesa-adopts-freesync/">without a module</a>. It’s truly groundbreaking and eliminates the need for telecine, and it makes anything with a variable frame rate, such as games and web animations, look <i>so</i> much smoother.</p><p>Unfortunately, both G-Sync and Freesync are still fairly new technologies and not yet widely deployed on consumer devices, so if you’re a developer doing animations on websites or apps and can’t afford the full 60 fps, your best bet is to cap the frame rate so that it is evenly divisible by the refresh rate – in almost every case, that cap is 30 fps.</p><h3><span id="Conclusion_actionable_follow-ups">Conclusion &amp; actionable follow-ups</span></h3><p>So how do we achieve a decent balance among our desired effects – minimal motion blur, minimal flickering, constant frame rates, great portrayal of motion, and great compatibility with all displays – without taxing the screen and GPUs too much? Yes, super high frame rates could reduce motion blur further, but at a great cost. The answer is clear and, after reading this article, you should know what it is: <b>60 fps</b>.</p><p>Now that you are wiser, go do your best at running all of your animated content at 60 fps.</p><div class="action"><h4><span id="a_If_youre_a_web_developer">a) If you’re a web developer</span></h4><p>Head over to <a href="http://jankfree.org/">jankfree.org</a>, where members of the Chrome team are collecting the best resources on how to get all of your apps and animations silky smooth. If you only have time for one article, make it Paul Lewis’s excellent <a href="http://calendar.perfplanet.com/2013/the-runtime-performance-checklist/">runtime performance checklist</a>.</p><h4><span id="b_If_youre_an_Android_developer">b) If you’re an Android developer</span></h4><p>Check out <a href="http://developer.android.com/training/best-performance.html">Best Practices for Performance</a> in our official Android Training pages, where we summarize the most important factors, bottlenecks, and optimization tricks for you.</p><h4><span id="c_If_you_work_in_the_film_industry">c) If you work in the film industry</span></h4><p>Record all of your content at 60 fps or, even better, at 120 fps, so you can scale down to 60 fps, 30 fps and 24 fps when needed (sadly, to also support PAL’s 50 fps and 25 fps, you’ll need to drive it up to 600 fps). Display all your content at 60 fps and don’t apologize for the soap opera effect. This revolution will take time, but it will work.</p><h4><span id="d_For_everyone_else">d) For everyone else</span></h4><p>Demand 60 fps whenever you see moving images on the screen, and when someone asks why, direct them to this article.</p></div><p><strong>Important: If this article influenced you and your business decisions in a positive way, I would <a href="http://twitter.com/pbakaus" target="_blank">love to hear</a> from you.</strong></p><p>Let’s all work together for a silky smooth future!</p></div></div>
<script>var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34802167-1']); _gaq.push(['_setDomainName', 'liuzhe.co']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })();</script></body>
</html>