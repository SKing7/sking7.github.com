<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Tutorial: Making annoying rainbows and other color cycles in Javascript</title>
<meta name="description" content="Javascript Tutorial by KrazyDad">
<meta name="keywords" content="color,colour,rgb,pastels,convert,color cycles,rainbows,games,colors,javascript,tutorials,sine waves,trig,fun,annoyings">
<link rel=stylesheet type="text/css" href="/wbase_sm2.css">
<style>
pre { font-size:12px; background-color: #EEE; }
</style>
<script language="JavaScript">
<!--

function RGB2Color(r,g,b)
{
  return '#' + byte2Hex(r) + byte2Hex(g) + byte2Hex(b);
}

function byte2Hex(n)
{
  var nybHexString = "0123456789ABCDEF";
  return String(nybHexString.substr((n >> 4) & 0x0F,1)) + nybHexString.substr(n & 0x0F,1);
}


function roundDecimal(v,n)
{
  var isNeg = v < 0;
  v = Math.abs(v);

  return (isNeg? '-' : '') + String(Math.floor(v)) + '.' + String((1 + Math.abs(v) - Math.floor(Math.abs(v)))*Math.pow(10,n)).substr(1,n);
}

function colorText(str,phase)
{
  if (phase == undefined)
    phase = 0;
  center = 128;
  width = 127;
  frequency = Math.PI*2/str.length;
  for (var i = 0; i < str.length; ++i)
  {
     red   = Math.sin(frequency*i+2+phase) * width + center;
     green = Math.sin(frequency*i+0+phase) * width + center;
     blue  = Math.sin(frequency*i+4+phase) * width + center;
     document.write( '<font color="' + RGB2Color(red,green,blue) + '">' + str.substr(i,1) + '</font>');
  }
}

function makeColorGradient(frequency1, frequency2, frequency3, phase1,phase2,phase3,center,width,len)
{
  if (len == undefined)
    len = 50;
  if (center == undefined)
    center = 128;
  if (width == undefined)
    width = 127;
  for (var i = 0; i < len; ++i)
  {
     var red = Math.sin(frequency1*i + phase1) * width + center;
     var grn = Math.sin(frequency2*i + phase2) * width + center;
     var blu = Math.sin(frequency3*i + phase3) * width + center;
     document.write( '<font color="' + RGB2Color(red,grn,blu) + '">&#9608;</font>');
  }
}


// -->
</script>

</head>
<body BGCOLOR=white TEXT=black>

<script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-605293-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<div class="outer" align=center>
<div class="inner">
<div class="adbar">
<script type="text/javascript"><!--
google_ad_client = "pub-1449267043676994";
//728x90 Puzzle Banners
google_ad_slot = "6905239361";
google_ad_width = 728;
google_ad_height = 90;
//--></script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div> <!-- adbar -->
<div >
<table cellpadding=0 cellspacing=0 border=0 width="100%">
<tr>
<td width=549 align=center height=122><a href="/" title="Creator of software toys of wondrous delight."><img src="/img/kz_whitelogo_wood2.jpg" width=549 height=122 border=0 style="position:relative; left:-12px;"></a>
</td>
<td width="100%" align=right valign=top style="position:relative; left:-9px;">
  <table cellpadding=0 cellspacing=0 border=0>
  <tr><td><img src="/img/dot.gif" width=1 height=8 alt="" />
  </td></tr>
  <tr><td align="right">
  <font size="3">
  <br/>
  <a class="outer" href="/blog/" title="Current Events in the land of KrazyDad">Blog</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="outer" href="/pubs/" title="Books, papers and more...">Publications</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="outer" href="/" title="Free Printable Puzzles">Puzzles</a><br />
  <a class="outer" href="/fungames.php" title="Games and Software Toys">Fun &amp; Games</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="outer" href="/about.php" title="Learn all about me, you curious person.">About</a><br/>

  </font>
  </td></tr></table>
</td>
<td width=30><img src="/img/dot.gif" width=30 height=60 alt="" /></td>
</tr></table>
<table class='bdy' width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width=10>&nbsp;</td>
<td valign=top width=620 align=left>
<!-- news item -->



<br>
<h1>
<script language="JavaScript">
<!--
colorText("Making annoying rainbows in javascript",0);
// -->
</script>
</h1>
<h3>A tutorial by jim bumgardner (<a href="https://twitter.com/#!/jbum">@jbum</a> on twitter)</h3>
<p>
<a class="FlattrButton" style="display:none;" href="http://krazydad.com/tutorials/makecolors.php"></a>
<noscript><a href="http://flattr.com/thing/465411/Making-annoying-rainbows-in-javascript-A-tutorial-on-color-cycles-" target="_blank">
<img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0" /></a></noscript>
<p>
<i>
6/2012: You'll find a great, mind-blowing overview of how color perception works on <a href="http://blog.asmartbear.com/color-wheels.html">Jason Cohen's blog</a>. He points to a <a href="http://www.handprint.com/HP/WCL/color1.html">far more in-depth source</a> which will also reward your time.
<p>
12/2011: Charlie Loyd has written <a href="http://basecase.org/env/on-rainbows">a nice analysis</a> of the techniques presented in this article, and makes
a good case for sine-generated rainbows as an aesthetic improvement over the more common HSB-space rainbows (which have brightness/saturation spokes).
<p>
1/2011: Since I wrote this tutorial, CSS3 has introduced the hsla() color specifications, which makes the kinds of tricks explained in
this article much easier on browsers that support CSS3.  Since my intent was to teach some simple color theory and applied mathematics, I suggest 
you pretend this feature doesn't exist as you read this article.  Then, afterwards, use it willy nilly!
</i>
<p><hr/>
<p>
This is a tutorial on how to produce sequences of discrete colors, for use in fonts, graphics or tables, such as
in the color strips shown here, or the title of this article.
<p>
<center>
<script language="JavaScript">
<!--
makeColorGradient(.3,.3,.3,0,2,4,128,127,32);
// -->
</script>
</center>
<p>
Obviously you can make a webpage look incredibly annoying if you
overuse this technique (and by <i>overuse</i>, I mean <i>use at all</i>), but you may have fun learning to do it, and you will improve your javascript skills, and your
understanding of how colors work.

<p>
<center>

<script language="JavaScript">
<!--
makeColorGradient(2,4,6,0,2,4,128,127,32);
// -->

</script>
</center>
<p>
I am going to use javacsript for my code examples, but you can use the same
basic techniques in any language, and indeed I originally developed these tricks in C, but I now use the same old
tricks in C++, Perl, Processing, Java, Flash Actionscript and other languages.
<p>

<center>
<script language="JavaScript">
<!--
makeColorGradient(.3,.3,.3,0,0,0,128,127,32);
// -->
</script>
</center>
<p>
To get the most out of this tutorial, you will need to know a little Javascript, and a little HTML.  However, you won't
need to know a whole lot.  I mean c'mon.  I even explain how <i>hexadecimal</i> works in this document, and why
'#FF0000' comes out red, and so on...
<p>
<center>
<script language="JavaScript">
<!--
makeColorGradient(.3,.3,.3,0,1,2,192,63,32);
// -->
</script>
</center>
<p>
Well, let's get to it, shall we?
<p>
<center>
<table width=80%><tr>
<td>
<a class="donate" href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=dad%40krazydad%2ecom&item_name=KrazyDad+-+Jim+Bumgardner+-+Color+Cycle+Tutorial&item_number=TUTORIAL_006&no_shipping=1&cn=Your%20comments%20are%20welcome&tax=0&currency_code=USD&bn=PP%2dDonationsBF&charset=UTF%2d8&return=http%3A%2F%2Fkrazydad.com%2Ftutorials%2Fmakecolors.php%3Fpaypal%3Dsuccess&cancel_return=http%3A%2F%2Fkrazydad.com%2Ftutorials%2Fmakecolors.php%3Fpaypal%3Dcancel"><font color=#e85c9e>Your PayPal donations keep KrazyDad running.  Thank you for helping out!
</font></a>
<p/>Prefer to donate by mail? <a href="/donatebymail.php" target="donatebymail">Here's how.</a>
</td>
<td height=64>
  <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
  <input type="hidden" name="cmd" value="_donations">
  <input type="hidden" name="business" value="dad@krazydad.com">
  <input type="hidden" name="item_name" value="KrazyDad - Jim Bumgardner - Color Cycle Tutorial">
  <input type="hidden" name="item_number" value="TUTORIAL-006">
  <input type="hidden" name="no_shipping" value="1">
  <input type="hidden" name="cn" value="Your comments are welcome">
  <input type="hidden" name="currency_code" value="USD">
  <input type="hidden" name="tax" value="0">
  <input type="hidden" name="bn" value="PP-DonationsBF">
  <input type="hidden" name="return" value="http://krazydad.com/tutorials/makecolors.php?paypal=success">
  <input type="hidden" name="cancel_return" value=" http://krazydad.com/tutorials/makecolors.php?paypal=cancel">
  <!-- <input type="image" src="https://www.paypal.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="Donate with PayPal"> -->
  <input type="image" src="/img/paypal_donate.png" width=147 height=69 border="0" name="submit" alt="Donate with PayPal">
</form>
</td></tr></table>
</center><p>
<h2>Converting R,G,B values to HTML hex notation</h2>

On computer monitors, you get different colors by combining red, green and blue.  The red, green and blue levels are called 'color components'.
<p>
To generate rainbow-like sequences of colors, I am going to be manipulating the individual RGB components of each subsequent color.
So the first thing I need is a utility function to convert individual red, green and blue values to an HTML hex color specification, which
looks something like this:
<p>
#AABBCC
<p>
This represents an RGB color with 8-bits per component.  In an 8-bit color system, the values of the color components, R, G, and B can
go from 0-255.  But the HTML color specification uses hexadecimal notation for each of the components, so that they each occupy two digits.
<p>
In hexadecimal, each color component (red, green, and blue) occupies two digits, like so:
#<font color='red'>RR</font><font color='green'>GG</font><font color='blue'>BB</font>.  So our color has the following hex values:

<pre>
<table border=1 cellspacing=0 cellpadding=8>
<tr><td>Component</td><td>Value (in hex)</td></tr>
<tr><td>Red</td><td>AA</td></tr>
<tr><td>Green</td><td>BB</td></tr>
<tr><td>Blue</td><td>CC</td></tr>
</table>
</pre>
Hexadecimal numbers are base 16 numbers.  You can use the following table to convert two digit hex numbers to their
decimal equivalents.
<p>
<table border=1 cellpadding=8 cellspacing=0 ><tr>
<td>Hexadecimal</td><td>0</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>A</td><td>B</td><td>C</td><td>D</td><td>E</td><td>F</td></tr>
<td>Decimal</td><td>0</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td></tr>
</table>
<p>
If you don't have a calculator handy that does hexadecimal -> decimal conversion, it's not too hard to do it yourself.
Just take the first digit, convert it to decimal (using the above table, which is easily memorized, especially if you're not busy friday), multiply it by 16, and
then add the decimal equivalent of the second digit.  For example, the number AB corresponds to 10*16 + 11, or 171.
<p>
Using this formula, you will see that the color #AABBCC corresponds to the following values:
<pre>
<table border=1 cellspacing=0 cellpadding=8>
<tr><td>Component</td><td>Value (in hex)</td><td>Value (in decimal)</td></tr>
<tr><td>Red</td><td>AA</td><td>170</td></tr>
<tr><td>Green</td><td>BB</td><td>187</td></tr>
<tr><td>Blue</td><td>CC</td><td>204</td></tr>
</table>
</pre>
<p>
What I need for this tutorial is a function that does the reverse - converts 170,187,204 back to #AABBCC.
I would use it like this:
<p>
<pre>
output = RGB2Color(170,187,204);
</pre>
<p>
And know that the string '#AABBCC' is in the output value, ready to be output as HTML, using the documen