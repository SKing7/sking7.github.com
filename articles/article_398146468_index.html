<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type  5.2.2" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="http://www.ruanyifeng.com/blog/styles.css" type="text/css" />
<link rel="start" href="http://www.ruanyifeng.com/blog/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="http://feeds.feedburner.com/ruanyifeng" />
<script type="text/javascript" src="http://www.ruanyifeng.com/blog/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://www.ruanyifeng.com/blog/2012/05/responsive_web_design.html">
<dc:title>自适应网页设计（Responsive Web Design）</dc:title>
<dc:description>随着3G的普及，越来越多的人使用手机上网。...</dc:description>
<dc:creator>阮一峰</dc:creator>
<dc:date>2012-05-01T14:57:01+08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->


    
    <link rel="prev bookmark" href="http://www.ruanyifeng.com/blog/2013/07/gpg.html" title="GPG入门教程" />
    <link rel="next bookmark" href="http://www.ruanyifeng.com/blog/2013/08/linux_boot_process.html" title="Linux 的启动流程" />
    
    <title>如何让搜索引擎抓取AJAX内容？ - 阮一峰的网络日志</title>
</head>
<body id="scrapbook" class="mt-entry-archive one-column" onload="individualArchivesOnLoad(commenter_name)">
    <div id="container">
        <div id="container-inner">

            <div id="header">
    <div id="header-inner">
        <div id="header-content">


            <div id="header-name">阮一峰的网络日志 <span id="site_location"> » <a href="http://www.ruanyifeng.com/blog/" accesskey="1">首页</a></span><span id="site_archive"> » <a href="http://www.ruanyifeng.com/blog/archives.html">档案</a></span>
</div>

<div id="google_search">
<!-- SiteSearch Google -->
<form action="http://www.ruanyifeng.com/blog/search.html" id="cse-search-box">
      <div>
        <input type="hidden" name="cx" value="016304377626642577906:b_e9skaywzq" />
    <input type="hidden" name="cof" value="FORID:11" />
    <input type="hidden" name="ie" value="UTF-8" />
        <input type="text" name="q" size="20" class="searchbox" id="sbi" value=""/>
        <input type="image" src="/static/themes/theme_scrapbook/images/top_search_submit.gif" class="searchbox_submit" value="" alt="搜索" name="sa"/>
      </div>
    </form>
<!-- SiteSearch Google -->
</div>
<div id="feed_icon">
<a href="/feed.html" title="订阅Feed">
<img src="http://www.feedburner.com/fb/images/pub/feed-icon32x32.png" alt="" style="border: 0pt none;" />
</a></div>

        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <div id="entry-1784" class="entry-asset asset hentry">
                                <div class="asset-header">
<div class="asset-nav entry-nav">

<div class="entry-location">
<ul>
<li>上一篇：<a href="http://www.ruanyifeng.com/blog/2013/07/gpg.html" title="GPG入门教程">GPG入门教程&nbsp;&nbsp;&nbsp;&nbsp;</a></li>
<li>下一篇：<a href="http://www.ruanyifeng.com/blog/2013/08/linux_boot_process.html" title="Linux 的启动流程">Linux&nbsp;的启动流程</a></li>
</ul>
</div>



    
                                    <div class="entry-categories">
                                        <p>分类<span class="delimiter">：</span></p>
                                        <ul>
                                            <li><a href="http://www.ruanyifeng.com/blog/it/javascript/" rel="tag">JavaScript</a></li>
                                        </ul>
                                    </div>
    



                                            
</div>
                                </div>
<article class="hentry">
                                    <h1 id="page-title" class="asset-name entry-title">如何让搜索引擎抓取AJAX内容？</h1>
                                            <div id="share_button" style="float:right;padding-right:2em;padding-top:1em;"></div>
                                    <div class="asset-meta">
                                        

                                            <p class="vcard author">作者： <a class="fn url" href="http://www.ruanyifeng.com">阮一峰</a></p>

<p>日期： <a href="http://www.ruanyifeng.com/blog/2013/07/"><abbr class="published" title="2013-07-16T11:32:47+08:00">2013年7月16日</abbr></a></p>



                                    </div>
                                
                                <div class="asset-content entry-content" id="main-content">

                                    <!-- div class="asset-body" -->
                                        <p>越来越多的网站，开始采用<a href="http://en.wikipedia.org/wiki/Single-page_application">"单页面结构"</a>（Single-page application）。</p>
                                    <!-- /div -->


                                    <!-- div id="more" class="asset-more" -->
                                        <p>整个网站只有一张网页，采用<a href="http://zh.wikipedia.org/wiki/AJAX">Ajax</a>技术，根据用户的输入，加载不同的内容。</p>

<p><img src="http://image.beekka.com/blog/201307/bg2013071603.jpg" /></p>

<p>这种做法的好处是用户体验好、节省流量，缺点是AJAX内容无法被搜索引擎抓取。举例来说，你有一个网站。</p>

<blockquote><pre><code class="language-bash">
　　http://example.com  
　　
</code></pre></blockquote>

<p>用户通过<a href="http://www.ruanyifeng.com/blog/2011/03/url_hash.html">井号结构</a>的URL，看到不同的内容。</p>

<blockquote><pre><code class="language-bash">
　　http://example.com#1
　　http://example.com#2
　　http://example.com#3  
　　
</code></pre></blockquote>

<p>但是，搜索引擎只抓取example.com，不会理会井号，因此也就无法索引内容。</p>

<p>为了解决这个问题，Google提出了"井号+感叹号"的结构。</p>

<blockquote><pre><code class="language-bash">
　　http://example.com#!1
　　
</code></pre></blockquote>

<p>当Google发现上面这样的URL，就自动抓取另一个网址：</p>

<blockquote><pre><code class="language-bash">
　　http://example.com/?_escaped_fragment_=1
　　
</code></pre></blockquote>

<p>只要你把AJAX内容放在这个网址，Google就会收录。但是问题是，"井号+感叹号"非常难看且烦琐。Twitter曾经采用这种结构，它把</p>

<blockquote><pre><code class="language-bash">
　　http://twitter.com/ruanyf
　　
</code></pre></blockquote>

<p>改成</p>

<blockquote><pre><code class="language-bash">
　　http://twitter.com/#!/ruanyf
　　
</code></pre></blockquote>

<p>结果用户抱怨连连，只用了半年就废除了。</p>

<p>那么，有没有什么方法，可以在保持比较直观的URL的同时，还让搜索引擎能够抓取AJAX内容？</p>

<p>我一直以为没有办法做到，直到前两天看到了<a href="http://www.discourse.org/">Discourse</a>创始人之一的<a href="http://eviltrout.com/2013/06/19/adding-support-for-search-engines-to-your-javascript-applications.html">Robin Ward</a>的解决方法，不禁拍案叫绝。</p>

<p><img src="http://image.beekka.com/blog/201307/bg2013071602.png" /></p>

<p>Discourse是一个论坛程序，严重依赖Ajax，但是又必须让Google收录内容。它的解决方法就是放弃井号结构，采用 <a href="http://html5doctor.com/history-api/">History API</a>