<html>
    
<head><meta charset="UTF-8" /><link rel="shortcut icon" href="//static4.scirra.net/images/fresh/scirra-favicon-02.ico" /><link rel="apple-touch-icon" href="//static4.scirra.net/images/fresh/scirra-favicon-57px-01.png" /><link href="//fonts.googleapis.com/css?family=Open+Sans:400,400italic,600,600italic" rel="stylesheet" type="text/css" /><link href="//fonts.googleapis.com/css?family=Sansita+One" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="//static4.scirra.net/css/fresh.css?v=124" />
    
    
        <link rel="stylesheet" href="//static3.scirra.net/css/sitewidenotice.css?v=124" />
    
    <title>How to write low garbage real-time Javascript - Scirra.com</title>
    <link href="http://www.scirra.com/blog/76/how-to-write-low-garbage-real-time-javascript" rel="canonical" />
    <meta name="description" content="Garbage collection pauses can be a real headache in real-time Javascript apps like games.  This blog post covers some of the technical details to avoid GC overhead, which should be useful for plugin developers." />  
    <link rel="stylesheet" href="//static2.scirra.net/css/freshblog.css?v=124" />
    
<title>

</title></head>
<body>
    
    <form method="post" action="how-to-write-low-garbage-real-time-javascript?page=1#comments" id="Form1">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKLTYzNjQyNzAzNw9kFgJmD2QWBAIFD2QWBAIFDxYCHgdWaXNpYmxlZ2QCBg9kFgZmDxYCHgRUZXh0BTpIb3cgdG8gd3JpdGUgbG93IGdhcmJhZ2UgcmVhbC10aW1lIEphdmFzY3JpcHQgLSBTY2lycmEuY29tZAIBDxYCHwEFS2h0dHA6Ly93d3cuc2NpcnJhLmNvbS9ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdGQCAg8WAh8BBdIBR2FyYmFnZSBjb2xsZWN0aW9uIHBhdXNlcyBjYW4gYmUgYSByZWFsIGhlYWRhY2hlIGluIHJlYWwtdGltZSBKYXZhc2NyaXB0IGFwcHMgbGlrZSBnYW1lcy4gIFRoaXMgYmxvZyBwb3N0IGNvdmVycyBzb21lIG9mIHRoZSB0ZWNobmljYWwgZGV0YWlscyB0byBhdm9pZCBHQyBvdmVyaGVhZCwgd2hpY2ggc2hvdWxkIGJlIHVzZWZ1bCBmb3IgcGx1Z2luIGRldmVsb3BlcnMuZAIHDxYCHgZhY3Rpb24FPWhvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9wYWdlPTEjY29tbWVudHMWEGYPFgIfAGcWBAIBDxYCHwEFATNkAgMPFgIfAQX5BzxpbWcgc3JjPSJodHRwczovL3N0YXRpYzIuc2NpcnJhLm5ldC9pbWFnZXMvc3RvcmUvNTUvbm90aW9uLWdhbWVzLWxvZ28tMDEuanBnIiBzdHlsZT0iZmxvYXQ6cmlnaHQ7bWFyZ2luLXRvcDotMjBweDsiIHdpZHRoPTgwIGhlaWdodD0xMTUgLz48YSBocmVmPSJodHRwczovL3d3dy5zY2lycmEuY29tL2Jsb2cvMTIxL3N1cGVyLXViaWUtbGFuZC1ub3ctYXZhaWxhYmxlIiBzdHlsZT0iZGlzcGxheTpibG9jaztmbG9hdDpsZWZ0OyI+PGltZyBzcmM9Imh0dHBzOi8vc3RhdGljMi5zY2lycmEubmV0L2ltYWdlcy9zdG9yZS81NS9zdXBlci11YmllLWxhbmQucG5nIiBzdHlsZT0ibWFyZ2luLXRvcDotNTBweDstd2Via2l0LWJveC1zaGFkb3c6IC00cHggLTNweCA5cHggcmdiYSg1MCwgNTAsIDUwLCAwLjc3KTstbW96LWJveC1zaGFkb3c6ICAgIC00cHggLTNweCA5cHggcmdiYSg1MCwgNTAsIDUwLCAwLjc3KTtib3gtc2hhZG93OiAgICAgICAgIC00cHggLTNweCA5cHggcmdiYSg1MCwgNTAsIDUwLCAwLjc3KTsiIHdpZHRoPTIxMCBoZWlnaHQ9MTQwIC8+PC9hPjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6LTEwcHg7Ij48YSBocmVmPSJodHRwczovL3d3dy5zY2lycmEuY29tL2Jsb2cvMTIxL3N1cGVyLXViaWUtbGFuZC1ub3ctYXZhaWxhYmxlIiBzdHlsZT0iZm9udC1zaXplOjMycHg7Ij5TdXBlciBVYmllIExhbmQgTm93IEF2YWlsYWJsZSE8L2E+PHNwYW4gc3R5bGU9ImRpc3BsYXk6YmxvY2s7Y29sb3I6d2hpdGU7Zm9udC13ZWlnaHQ6Ym9sZDsiPkFuIGF3ZXNvbWUgQ29uc3RydWN0IDIgZ2FtZS4gIDxhIGhyZWY9Imh0dHBzOi8vd3d3LnNjaXJyYS5jb20vc3RvcmUvZ2FtZXMvc3VwZXItdWJpZS1sYW5kIj5CdXkgbm93ITwvYT4gPHNwYW4gc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO2JhY2tncm91bmQ6cmVkO3RleHQtYWxpZ246Q2VudGVyO2ZvbnQtd2VpZ2h0OmJvbGQ7cGFkZGluZzogMnB4IDhweDttYXJnaW4tbGVmdDozMHB4OyI+T05MWSAkOS45OSE8L3NwYW4+PC9zcGFuPjwvZGl2PmQCAQ9kFgICAQ9kFggCDw8WAh8AaGQCEQ8WAh4FY2xhc3MFCHNlbGVjdGVkZAISDxYCHwBoZAIcDw8WAh8AZ2RkAgUPZBYIAgIPFgIfAQWjCDxsaT48YSAgaHJlZj0iLi4vMTI0L2ludHJvZHVjaW5nLXRoZS1jb25zdHJ1Y3QtMi1kZWJ1Z2dlci1hbmQtcHJvZmlsZXIiPkludHJvZHVjaW5nIHRoZSBDb25zdHJ1Y3QgMiBEZWJ1Z2dlciBhbmQgUHJvZmlsZXI8L2E+PC9saT48bGk+PGEgIGhyZWY9Ii4uLzEyMy9tYWtlLW1vbmV5LWZyb20teW91ci1nYW1lcyI+TWFrZSBtb25leSBmcm9tIHlvdXIgZ2FtZXMhPC9hPjwvbGk+PGxpPjxhICBocmVmPSIuLi8xMjEvc3VwZXItdWJpZS1sYW5kLW5vdy1hdmFpbGFibGUiPlN1cGVyIFViaWUgTGFuZCBOb3cgQXZhaWxhYmxlITwvYT48L2xpPjxsaT48YSAgaHJlZj0iLi4vMTE5L3Nwcml0ZXItc3VwcG9ydC1pbi1jb25zdHJ1Y3QtMiI+U3ByaXRlciBzdXBwb3J0IGluIENvbnN0cnVjdCAyPC9hPjwvbGk+PGxpPjxhICBocmVmPSIuLi8xMTgvd2luZG93cy04LXN1bW1lci1jb21wZXRpdGlvbi1yZXN1bHRzIj5XaW5kb3dzIDggU3VtbWVyIENvbXBldGl0aW9uIFJlc3VsdHM8L2E+PC9saT48bGk+PGEgIGhyZWY9Ii4uLzExNy90aXplbi1hcHAtY2hhbGxlbmdlLTRtLWluLXByaXplcyI+VGl6ZW4gQXBwIENoYWxsZW5nZSAtICQ0bSBpbiBwcml6ZXM8L2E+PC9saT48bGk+PGEgIGhyZWY9Ii4uLzExNi9jb25zdHJ1Y3QtMi1nb2luZy10by1lZHVjYXRpb24iPkNvbnN0cnVjdCAyIEdvaW5nIHRvIEVkdWNhdGlvbjwvYT48L2xpPjxsaT48YSAgaHJlZj0iLi4vMTE1L25ld2dyb3VuZHMtdG91Y2hqYW0tY29tcGV0aXRpb24tcmVzdWx0cyI+TmV3Z3JvdW5kcyBUb3VjaGphbSBDb21wZXRpdGlvbiBSZXN1bHRzPC9hPjwvbGk+PGxpPjxhICBocmVmPSIuLi8xMTQvYW5ub3VuY2luZy1ibGFja2JlcnJ5LTEwLWFuZC10aXplbi1leHBvcnQtaW4tZnJlZS1jb25zdHJ1Y3QtMi11cGRhdGUiPkFubm91bmNpbmcgQmxhY2tiZXJyeSAxMCBhbmQgVGl6ZW4gZXhwb3J0IGluIGZyZWUgQ29uc3RydWN0IDIgdXBkYXRlPC9hPjwvbGk+PGxpPjxhICBocmVmPSIuLi8xMTMvd2luZG93cy04LXN1bW1lci1jb21wZXRpdGlvbiI+V2luZG93cyA4IHN1bW1lciBjb21wZXRpdGlvbjwvYT48L2xpPmQCBA8WAh8BBRAxNXRoLCBNYXJjaCAyMDEyZAIFDxYCHwEF2Qk8bGk+PGEgdGl0bGU9Ik91ciBibG9nIHJlbGF0aW5nIHRvIEhUTUw1LCBDb25zdHJ1Y3QgMiwgZ2FtZSBtYWtpbmcsIGNvbXBldGl0b3JzIChzdWNoIGFzIEdhbWVTYWxhZCBhbmQgR2FtZU1ha2VyKSwgc3RhcnQtdXBzLCBidXNpbmVzcywgb3VyIHN0cmF0ZWd5LCBkZXZlbG9wbWVudCBhbmQgdGhlIGluZHVzdHJ5IGluIGdlbmVyYWwuIiBocmVmPSIuLi8uLi90YWdzLzczL2Jsb2ciPkJsb2c8L2E+PC9saT48bGk+PGEgdGl0bGU9IklmIHlvdSB3YW50IHRvIG1ha2UgZ2FtZXMgQ29uc3RydWN0IDIgaXMgdGhlIHRvb2wgb2YgY2hvaWNlLiBDcmVhdGUgZ2FtZXMgYW5kIHNoYXJlIHRoZW0uIE5vIHByb2dyYW1taW5nIHJlcXVpcmVkLCBhbmQgZ2FtZXMgY3JlYXRlZCBhcmUgZXhwb3J0ZWQgdG8gSFRNTDUuIE1ha2UgYSBnYW1lIGluIENvbnN0cnVjdCAyLiIgaHJlZj0iLi4vLi4vdGFncy83Ny9jb25zdHJ1Y3QyIj5Db25zdHJ1Y3QyPC9hPjwvbGk+PGxpPjxhIHRpdGxlPSJDb25zdHJ1Y3QgMiB0aGUgZ2FtZSBtYWtlciBleHBvcnRzIHRvIEhUTUw1IHdoaWNoIGlzIGEgbmV3LCBvcGVuIHRlY2hub2xvZ3kuIEdhbWVzIGNyZWF0ZWQgaW4gQ29uc3RydWN0IDIgYXJlIHNoYXJlYWJsZSBvbiB0aGUgd2ViIGluIGEgZmV3IGVhc3kgY2xpY2tzLiBNYWtlIGdhbWVzIHdpdGggQ29uc3RydWN0IDIuIiBocmVmPSIuLi8uLi90YWdzLzEwMy9odG1sNSI+SFRNTDU8L2E+PC9saT48bGk+PGEgdGl0bGU9IkNvbnN0cnVjdCAyIGV4cG9ydHMgZ2FtZXMgaW50byBIVE1MNSB3aGljaCB1c2VzIEphdmFTY3JpcHQuIEphdmFTY3JpcHQgaXMgYSBzY3JpcHRpbmcgbGFuZ3VhZ2UgdGhhdCBhZGRzIGxvZ2ljIGFuZCBmdW5jdGlvbiBpbnRvIGdhbWVzLiBJdCBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgRUNNQVNjcmlwdCBsYW5ndWFnZS4iIGhyZWY9Ii4uLy4uL3RhZ3MvMTQ4L2phdmFzY3JpcHQiPkphdmFzY3JpcHQ8L2E+PC9saT48bGk+PGEgdGl0bGU9IlJlc291cmNlcyB0YWdnZWQgdGVjaG5pY2FsIGdlbmVyYWxseSByZWZlciB0byBhcnRpY2xlcy90dXRvcmlhbHMgdGhhdCBnbyBpbnRvIGRlZXAgZGV0YWlsIGFib3V0IENvbnN0cnVjdCAyIHRoZSBnYW1lIG1ha2VyIHRoYXQgZ2FtZSBjcmVhdG9ycyB0aGVtc2VsdmVzIGFyZSBwcm9iYWJseSBub3QgcmVxdWlyZWQgdG8ga25vdyB0byBtYWtlIGdhbWVzIiBocmVmPSIuLi8uLi90YWdzLzE0Ny90ZWNobmljYWwiPlRlY2huaWNhbDwvYT48L2xpPmQCBg9kFgYCAg9kFgQCAw8WAh4LXyFJdGVtQ291bnQCDxYeZg9kFhgCBQ8PFgIfAGdkZAIJDxYCHwEFBDUzNzlkAgsPDxYCHgtOYXZpZ2F0ZVVybAVOfi9yZWdpc3Rlcj9yZXR1cm49YmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/cGFnZT0xZGQCDQ8WAh8BBQE2ZAIPDw8WAh8FBU5+L3JlZ2lzdGVyP3JldHVybj1ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9wYWdlPTFkZAIRDw8WAh8FBQ1+L3VzZXJzL21pcGV5ZBYCZg8PFggeBVdpZHRoGwAAAAAAAFRAAQAAAB4GSGVpZ2h0GwAAAAAAAFRAAQAAAB4ISW1hZ2VVcmwFRC8vc3RhdGljNC5zY2lycmEubmV0L2F2YXRhcnMvODAvNGMxMDk3NTUzZDViZTFiNGJhNDkyMGNhNzY4OGY2ODQucG5nHgRfIVNCAoADZGQCEw8PFgQfAQUFTWlwZXkfBQUNfi91c2Vycy9taXBleWRkAhUPFgIfAQUFMTEuNWtkAhcPFgIfAQVcPHA+V2hhdCBhbiBpbnNpZ2h0ZnVsIGVudHJ5ISBJJ2xsIGJlIHN1cmUgdG8gcmVtZW1iZXIgdGhpcyB0aGUgbmV4dCB0aW1lIEkgZGl2ZSBpbnRvIEpTLjwvcD5kAhkPFgIfAQUFTWlwZXlkAhwPDxYCHwUFaX4vYmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/YWN0aW9uPXJlcG9ydGNvbW1lbnQmcGFnZT0xJmNvbW1lbnRJRD01Mzc5I3JlcG9ydGRkAh8PFgIfAQVnPGFiYnIgY2xhc3M9InRpbWVhZ28iIHRpdGxlPSIyMDEyLTAzLTE1VDE3OjExOjU2LjkwMzAwMDAiPlRodXJzZGF5LCBNYXJjaCAxNSwgMjAxMiBhdCA1OjExOjU2IFBNPC9hYmJyPmQCAQ9kFhgCBQ8PFgIfAGdkZAIJDxYCHwEFBDUzODFkAgsPDxYCHwUFTn4vcmVnaXN0ZXI/cmV0dXJuPWJsb2cvNzYvaG93LXRvLXdyaXRlLWxvdy1nYXJiYWdlLXJlYWwtdGltZS1qYXZhc2NyaXB0P3BhZ2U9MWRkAg0PFgIfAQUBMmQCDw8PFgIfBQVOfi9yZWdpc3Rlcj9yZXR1cm49YmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/cGFnZT0xZGQCEQ8PFgIfBQUSfi91c2Vycy90ZWxsZXMwODA4ZBYCZg8PFggfBhsAAAAAAABUQAEAAAAfBxsAAAAAAABUQAEAAAAfCAVELy9zdGF0aWMzLnNjaXJyYS5uZXQvYXZhdGFycy84MC85NTk2YmQyZmY3NjQ3Y2JjOGJiM2YxZmJjYTFiOTViMy5wbmcfCQKAA2RkAhMPDxYEHwEFClRFTExFUzA4MDgfBQUSfi91c2Vycy90ZWxsZXMwODA4ZGQCFQ8WAh8BBQUxMi42a2QCFw8WAh8BBX48cD5UaGF0J3MgdHJ1ZSwgZm9yIGV4YW1wbGUsIEkgYmVsaWV2ZSBpbiBmaXJzdCBjaGVja3Mgb25seSwgaWYgeW91IG5lZWQgZG91YmxlIGNoZWNrIHNvbWV0aGluZywgaXQncyB3cm9uZyBvciBwb29yIGNvZGVkLjwvcD5kAhkPFgIfAQUKVEVMTEVTMDgwOGQCHA8PFgIfBQVpfi9ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9hY3Rpb249cmVwb3J0Y29tbWVudCZwYWdlPTEmY29tbWVudElEPTUzODEjcmVwb3J0ZGQCHw8WAh8BBWc8YWJiciBjbGFzcz0idGltZWFnbyIgdGl0bGU9IjIwMTItMDMtMTVUMTc6MjE6MTAuMzYzMDAwMCI+VGh1cnNkYXksIE1hcmNoIDE1LCAyMDEyIGF0IDU6MjE6MTAgUE08L2FiYnI+ZAICD2QWGAIHDw8WAh8AZ2RkAgkPFgIfAQUENTM4MmQCCw8PFgIfBQVOfi9yZWdpc3Rlcj9yZXR1cm49YmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/cGFnZT0xZGQCDQ8WAh8BBQEwZAIPDw8WAh8FBU5+L3JlZ2lzdGVyP3JldHVybj1ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9wYWdlPTFkZAIRDw8WAh8FBQ9+L3VzZXJzL2FnZWlzZXJkFgJmDw8WCB8GGwAAAAAAAFRAAQAAAB8HGwAAAAAAAFRAAQAAAB8IBUQvL3N0YXRpYzIuc2NpcnJhLm5ldC9hdmF0YXJzLzgwL2ZiZGIxMzk1NjUwMTQ1NWYyODNkYzNkNjVjMGZmNmUyLnBuZx8JAoADZGQCEw8PFgQfAQUHYWdlaXNlch8FBQ9+L3VzZXJzL2FnZWlzZXJkZAIVDxYCHwEFBTMsNTY3ZAIXDxYCHwEFLzxwPkNhbiB5b3UgY2xhcmlmeSBwbGVhc2U6IFdoYXQgaXMgZ2FyYmFnZT88L3A+ZAIZDxYCHwEFB2FnZWlzZXJkAhwPDxYCHwUFaX4vYmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/YWN0aW9uPXJlcG9ydGNvbW1lbnQmcGFnZT0xJmNvbW1lbnRJRD01MzgyI3JlcG9ydGRkAh8PFgIfAQVnPGFiYnIgY2xhc3M9InRpbWVhZ28iIHRpdGxlPSIyMDEyLTAzLTE1VDE3OjI4OjQzLjIwMDAwMDAiPlRodXJzZGF5LCBNYXJjaCAxNSwgMjAxMiBhdCA1OjI4OjQzIFBNPC9hYmJyPmQCAw9kFhgCBQ8PFgIfAGdkZAIJDxYCHwEFBDUzODNkAgsPDxYCHwUFTn4vcmVnaXN0ZXI/cmV0dXJuPWJsb2cvNzYvaG93LXRvLXdyaXRlLWxvdy1nYXJiYWdlLXJlYWwtdGltZS1qYXZhc2NyaXB0P3BhZ2U9MWRkAg0PFgIfAQUBNGQCDw8PFgIfBQVOfi9yZWdpc3Rlcj9yZXR1cm49YmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/cGFnZT0xZGQCEQ8PFgIfBQURfi91c2Vycy9kYW5pamVycnlkFgJmDw8WCB8GGwAAAAAAAFRAAQAAAB8HGwAAAAAAAFRAAQAAAB8IBUQvL3N0YXRpYzIuc2NpcnJhLm5ldC9hdmF0YXJzLzgwLzFjYjNlOWZlYTRkODFmNTVhNGJlZmFjODExMzU2OTExLnBuZx8JAoADZGQCEw8PFgQfAQUJRGFuaWplcnJ5HwUFEX4vdXNlcnMvZGFuaWplcnJ5ZGQCFQ8WAh8BBQU0LDU3NGQCFw8WAh8BBUY8cD5Nb3N0IG5lZWRlZC4gU29tZSBiZXN0IHByYWN0aWNlcyBmb3IgSlMgcHJvZ3JhbW1pbmcuIFRoYW5rIHlvdSE8L3A+ZAIZDxYCHwEFCURhbmlqZXJyeWQCHA8PFgIfBQVpfi9ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9hY3Rpb249cmVwb3J0Y29tbWVudCZwYWdlPTEmY29tbWVudElEPTUzODMjcmVwb3J0ZGQCHw8WAh8BBWc8YWJiciBjbGFzcz0idGltZWFnbyIgdGl0bGU9IjIwMTItMDMtMTVUMTc6MzM6MDMuMjUzMDAwMCI+VGh1cnNkYXksIE1hcmNoIDE1LCAyMDEyIGF0IDU6MzM6MDMgUE08L2FiYnI+ZAIED2QWFgIJDxYCHwEFBDUzOTBkAgsPDxYCHwUFTn4vcmVnaXN0ZXI/cmV0dXJuPWJsb2cvNzYvaG93LXRvLXdyaXRlLWxvdy1nYXJiYWdlLXJlYWwtdGltZS1qYXZhc2NyaXB0P3BhZ2U9MWRkAg0PFgIfAQUBM2QCDw8PFgIfBQVOfi9yZWdpc3Rlcj9yZXR1cm49YmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/cGFnZT0xZGQCEQ8PFgIfBQUSfi91c2Vycy9jb21tb25saXNwZBYCZg8PFggfBhsAAAAAAABUQAEAAAAfBxsAAAAAAABUQAEAAAAfCAVELy9zdGF0aWM0LnNjaXJyYS5uZXQvYXZhdGFycy84MC9iZmQ1YjgzMGQ0MTc0ZWJjMDVhOWJlZWYwMjQ0NDM1Mi5wbmcfCQKAA2RkAhMPDxYEHwEFCmNvbW1vbmxpc3AfBQUSfi91c2Vycy9jb21tb25saXNwZGQCFQ8WAh8BBQM5NjRkAhcPFgIfAQXlBDxwPkl0J3MgZ29vZCB0byBzZWUgc29tZW9uZSBwb2ludCBvdXQgdGhlIGdhcmJhZ2UgY29sbGVjdGlvbiAoYWthIGF1dG9tYXRpYyBtZW1vcnkgbWFuYWdlbWVudCkgY29uY2VybnMgaW4gcmVhbHRpbWUgSmF2YVNjcmlwdCBhcHBsaWNhdGlvbnMuIEhvd2V2ZXIsIEkgbXVzdCBub3RlIHRoYXQgeW91ciBtaWxlYWdlIG1heSB2YXJ5IHdpdGggdGhlc2UgdGVjaG5pcXVlcyBmb3IgcmV1c2luZyBsb25nLWxpdmVkIG9iamVjdHMsIHdoaWNoIHJlbGllcyBvbiB0aGUgSmF2YVNjcmlwdCBpbnRlcnByZXRlciB1c2luZyAiZ2VuZXJhdGlvbmFsIiBnYXJiYWdlIGNvbGxlY3Rpb24uIEF0IHRoaXMgdGltZSwgaXQgc2VlbXMgdGhhdCBvbmx5IENocm9tZSAoYW5kIE5vZGVKUyBbdGhvdWdoIE5vZGVKUyBpc24ndCBhIGJyb3dzZXJdKSBoYXMgdGhpcy4gVGhlcmUgYXJlIGdlbmVyYXRpb25hbCBjb2xsZWN0b3JzIGluIHRoZSB3b3JrcyBmb3IgRmlyZWZveCBhbmQgU2FmYXJpL1dlYktpdCwgYnV0IHVudGlsIHRob3NlIGFyZSByZWxlYXNlZCwgc3VjaCB0ZWNobmlxdWVzIHdvbid0IHByb2R1Y2UgdGhlIHNhbWUgdHJlbWVuZG91cyBpbXByb3ZlbWVudHMgYWNyb3NzIGJyb3dzZXJzLjwvcD5kAhkPFgIfAQUKY29tbW9ubGlzcGQCHA8PFgIfBQVpfi9ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9hY3Rpb249cmVwb3J0Y29tbWVudCZwYWdlPTEmY29tbWVudElEPTUzOTAjcmVwb3J0ZGQCHw8WAh8BBWc8YWJiciBjbGFzcz0idGltZWFnbyIgdGl0bGU9IjIwMTItMDMtMTVUMTk6Mzk6MzEuOTYzMDAwMCI+VGh1cnNkYXksIE1hcmNoIDE1LCAyMDEyIGF0IDc6Mzk6MzEgUE08L2FiYnI+ZAIFD2QWFgIJDxYCHwEFBDUzOTFkAgsPDxYCHwUFTn4vcmVnaXN0ZXI/cmV0dXJuPWJsb2cvNzYvaG93LXRvLXdyaXRlLWxvdy1nYXJiYWdlLXJlYWwtdGltZS1qYXZhc2NyaXB0P3BhZ2U9MWRkAg0PFgIfAQUBNGQCDw8PFgIfBQVOfi9yZWdpc3Rlcj9yZXR1cm49YmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/cGFnZT0xZGQCEQ8PFgIfBQUSfi91c2Vycy9jb21tb25saXNwZBYCZg8PFggfBhsAAAAAAABUQAEAAAAfBxsAAAAAAABUQAEAAAAfCAVELy9zdGF0aWM0LnNjaXJyYS5uZXQvYXZhdGFycy84MC9iZmQ1YjgzMGQ0MTc0ZWJjMDVhOWJlZWYwMjQ0NDM1Mi5wbmcfCQKAA2RkAhMPDxYEHwEFCmNvbW1vbmxpc3AfBQUSfi91c2Vycy9jb21tb25saXNwZGQCFQ8WAh8BBQM5NjRkAhcPFgIfAQXQATxwPkJUVywgZ2FyYmFnZSBpbiB0aGlzIGNvbnRleHQgbWVhbnMgaGVhcCBhbGxvY2F0ZWQgbWVtb3J5IHRoYXQgaXMgbm8gbG9uZ2VyIGluIHVzZSBmb3IgdGhlIHJlbWFpbmRlciBvZiB0aGUgcHJvZ3JhbSBleGVjdXRpb24sIGFuZCB0aHVzIGNhbiBiZSAiZ2FyYmFnZSBjb2xsZWN0ZWQiIHRvIGZyZWUgdGhhdCBtZW1vcnkgZm9yIHN1YnNlcXVlbnQgdXNlLjwvcD5kAhkPFgIfAQUKY29tbW9ubGlzcGQCHA8PFgIfBQVpfi9ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9hY3Rpb249cmVwb3J0Y29tbWVudCZwYWdlPTEmY29tbWVudElEPTUzOTEjcmVwb3J0ZGQCHw8WAh8BBWc8YWJiciBjbGFzcz0idGltZWFnbyIgdGl0bGU9IjIwMTItMDMtMTVUMjA6MDA6NDQuNzIzMDAwMCI+VGh1cnNkYXksIE1hcmNoIDE1LCAyMDEyIGF0IDg6MDA6NDQgUE08L2FiYnI+ZAIGD2QWGAIFDw8WAh8AZ2RkAgkPFgIfAQUENTM5M2QCCw8PFgIfBQVOfi9yZWdpc3Rlcj9yZXR1cm49YmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/cGFnZT0xZGQCDQ8WAh8BBQEyZAIPDw8WAh8FBU5+L3JlZ2lzdGVyP3JldHVybj1ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9wYWdlPTFkZAIRDw8WAh8FBRN+L3VzZXJzL2Rzc29udGhlbmV0ZBYCZg8PFggfBhsAAAAAAABUQAEAAAAfBxsAAAAAAABUQAEAAAAfCAVELy9zdGF0aWMxLnNjaXJyYS5uZXQvYXZhdGFycy84MC81YjAwYjAwYmFiNzA4YWY3ZDhmMDI4NzAyY2QyMzgzOS5wbmcfCQKAA2RkAhMPDxYEHwEFC2Rzc29udGhlbmV0HwUFE34vdXNlcnMvZHNzb250aGVuZXRkZAIVDxYCHwEFBTIsMDk1ZAIXDxYCHwEFFjxwPmV4Y2VsbGVudCBwb3N0ITwvcD5kAhkPFgIfAQULZHNzb250aGVuZXRkAhwPDxYCHwUFaX4vYmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/YWN0aW9uPXJlcG9ydGNvbW1lbnQmcGFnZT0xJmNvbW1lbnRJRD01MzkzI3JlcG9ydGRkAh8PFgIfAQVnPGFiYnIgY2xhc3M9InRpbWVhZ28iIHRpdGxlPSIyMDEyLTAzLTE1VDIwOjQwOjQyLjE1MDAwMDAiPlRodXJzZGF5LCBNYXJjaCAxNSwgMjAxMiBhdCA4OjQwOjQyIFBNPC9hYmJyPmQCBw9kFhgCBQ8PFgIfAGdkZAIJDxYCHwEFBDUzOTVkAgsPDxYCHwUFTn4vcmVnaXN0ZXI/cmV0dXJuPWJsb2cvNzYvaG93LXRvLXdyaXRlLWxvdy1nYXJiYWdlLXJlYWwtdGltZS1qYXZhc2NyaXB0P3BhZ2U9MWRkAg0PFgIfAQUBMmQCDw8PFgIfBQVOfi9yZWdpc3Rlcj9yZXR1cm49YmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/cGFnZT0xZGQCEQ8PFgIfBQUPfi91c2Vycy9janIxOTc0ZBYCZg8PFggfBhsAAAAAAABUQAEAAAAfBxsAAAAAAABUQAEAAAAfCAVELy9zdGF0aWMxLnNjaXJyYS5uZXQvYXZhdGFycy84MC81Zjg2Y2M5YmYzNjNiODdhOWM2MTJlZTAyNjRiNTU4ZS5wbmcfCQKAA2RkAhMPDxYEHwEFB2NqcjE5NzQfBQUPfi91c2Vycy9janIxOTc0ZGQCFQ8WAh8BBQUzLDg1NGQCFw8WAh8BBU48cD5UaGFua3MgQXNobGV5ISBIb3cgZG8geW91IGZpbmQgdGhlIHRpbWUgdG8gZG8gdGhlIGdyZWF0IHdvcmsgeW91IGRvPyA6KTwvcD5kAhkPFgIfAQUHY2pyMTk3NGQCHA8PFgIfBQVpfi9ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9hY3Rpb249cmVwb3J0Y29tbWVudCZwYWdlPTEmY29tbWVudElEPTUzOTUjcmVwb3J0ZGQCHw8WAh8BBWc8YWJiciBjbGFzcz0idGltZWFnbyIgdGl0bGU9IjIwMTItMDMtMTVUMjE6NTE6MTUuMzI3MDAwMCI+VGh1cnNkYXksIE1hcmNoIDE1LCAyMDEyIGF0IDk6NTE6MTUgUE08L2FiYnI+ZAIID2QWGAIFDw8WAh8AZ2RkAgkPFgIfAQUENTM5N2QCCw8PFgIfBQVOfi9yZWdpc3Rlcj9yZXR1cm49YmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/cGFnZT0xZGQCDQ8WAh8BBQEyZAIPDw8WAh8FBU5+L3JlZ2lzdGVyP3JldHVybj1ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9wYWdlPTFkZAIRDw8WAh8FBRJ+L3VzZXJzL3JleHJhaW5ib3dkFgJmDw8WCB8GGwAAAAAAAFRAAQAAAB8HGwAAAAAAAFRAAQAAAB8IBUQvL3N0YXRpYzQuc2NpcnJhLm5ldC9hdmF0YXJzLzgwLzBmNTliOTExYjdjZmM0MTU3NTAwYjQ0N2RhM2MzZjA0LnBuZx8JAoADZGQCEw8PFgQfAQUKcmV4cmFpbmJvdx8FBRJ+L3VzZXJzL3JleHJhaW5ib3dkZAIVDxYCHwEFBTExLjlrZAIXDxYCHwEFXDxwPkkgYWdyZWUgcGVyZm9ybWFuY2UgaXMgaW1wb3J0YW50LiBIb3dldmVyLCAiYnVnIGZyZWUiIGlzIG1vc3QgaW1wb3J0YW50IHRoaW5nIGF0IGFsbC48L3A+ZAIZDxYCHwEFCnJleHJhaW5ib3dkAhwPDxYCHwUFaX4vYmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/YWN0aW9uPXJlcG9ydGNvbW1lbnQmcGFnZT0xJmNvbW1lbnRJRD01Mzk3I3JlcG9ydGRkAh8PFgIfAQVlPGFiYnIgY2xhc3M9InRpbWVhZ28iIHRpdGxlPSIyMDEyLTAzLTE2VDAzOjEyOjUxLjk4MzAwMDAiPkZyaWRheSwgTWFyY2ggMTYsIDIwMTIgYXQgMzoxMjo1MSBBTTwvYWJicj5kAgkPZBYYAgUPDxYCHwBnZGQCCQ8WAh8BBQQ1NDAxZAILDw8WAh8FBU5+L3JlZ2lzdGVyP3JldHVybj1ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9wYWdlPTFkZAINDxYCHwEFATBkAg8PDxYCHwUFTn4vcmVnaXN0ZXI/cmV0dXJuPWJsb2cvNzYvaG93LXRvLXdyaXRlLWxvdy1nYXJiYWdlLXJlYWwtdGltZS1qYXZhc2NyaXB0P3BhZ2U9MWRkAhEPDxYCHwUFDX4vdXNlcnMvYWNvcmRkFgJmDw8WCB8GGwAAAAAAAFRAAQAAAB8HGwAAAAAAAFRAAQAAAB8IBUQvL3N0YXRpYzQuc2NpcnJhLm5ldC9hdmF0YXJzLzgwLzRkNjM4MDZhNDljMzkzMTY3N2QxZjM3OTc5MWJkN2VlLnBuZx8JAoADZGQCEw8PFgQfAQUFYWNvcmQfBQUNfi91c2Vycy9hY29yZGRkAhUPFgIfAQUFMiwwNjRkAhcPFgIfAQVuPHA+QWxtb3N0IGNlcnRhaW5seSBhIGR1bWIgcXVlc3Rpb246IERvZXMgdGhlIHNhbWUgcHJpbmNpcGxlIG9mIHJlLXVzYWdlIGFwcGx5IHRvIG9iamVjdHMgc3Bhd25lZCBpbiBnYW1lPzwvcD5kAhkPFgIfAQUFYWNvcmRkAhwPDxYCHwUFaX4vYmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/YWN0aW9uPXJlcG9ydGNvbW1lbnQmcGFnZT0xJmNvbW1lbnRJRD01NDAxI3JlcG9ydGRkAh8PFgIfAQVlPGFiYnIgY2xhc3M9InRpbWVhZ28iIHRpdGxlPSIyMDEyLTAzLTE2VDA3OjQ0OjE1LjIxMzAwMDAiPkZyaWRheSwgTWFyY2ggMTYsIDIwMTIgYXQgNzo0NDoxNSBBTTwvYWJicj5kAgoPZBYWAgkPFgIfAQUENTQxMmQCCw8PFgIfBQVOfi9yZWdpc3Rlcj9yZXR1cm49YmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/cGFnZT0xZGQCDQ8WAh8BBQExZAIPDw8WAh8FBU5+L3JlZ2lzdGVyP3JldHVybj1ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9wYWdlPTFkZAIRDw8WAh8FBQ5+L3VzZXJzL2FzaGxleWQWAmYPDxYIHwYbAAAAAAAAVEABAAAAHwcbAAAAAAAAVEABAAAAHwgFRC8vc3RhdGljMS5zY2lycmEubmV0L2F2YXRhcnMvODAvMWFjYjQ3YTcyOGM3YzhhMTg2NjQ3ZGNmYWEyYjU4NjUucG5nHwkCgANkZAITDw8WBB8BBQZBc2hsZXkfBQUOfi91c2Vycy9hc2hsZXlkZAIVDxYCHwEFBTkxLjFrZAIXDxYCHwEFhwE8cD5AYWNvcmQsIHlvdSBkb24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoaXMgYXQgYWxsIGZyb20gd2l0aGluIEMyLCBpdCBoYW5kbGVzIHRoZSByZWN5Y2xpbmcgb2Ygb2JqZWN0cyBmb3IgeW91IGJlaGluZCB0aGUgc2NlbmVzLjwvcD5kAhkPFgIfAQUGQXNobGV5ZAIcDw8WAh8FBWl+L2Jsb2cvNzYvaG93LXRvLXdyaXRlLWxvdy1nYXJiYWdlLXJlYWwtdGltZS1qYXZhc2NyaXB0P2FjdGlvbj1yZXBvcnRjb21tZW50JnBhZ2U9MSZjb21tZW50SUQ9NTQxMiNyZXBvcnRkZAIfDxYCHwEFZTxhYmJyIGNsYXNzPSJ0aW1lYWdvIiB0aXRsZT0iMjAxMi0wMy0xNlQxNTo0NjozNy40NjMwMDAwIj5GcmlkYXksIE1hcmNoIDE2LCAyMDEyIGF0IDM6NDY6MzcgUE08L2FiYnI+ZAILD2QWGAIFDw8WAh8AZ2RkAgkPFgIfAQUENTQyMWQCCw8PFgIfBQVOfi9yZWdpc3Rlcj9yZXR1cm49YmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/cGFnZT0xZGQCDQ8WAh8BBQEwZAIPDw8WAh8FBU5+L3JlZ2lzdGVyP3JldHVybj1ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9wYWdlPTFkZAIRDw8WAh8FBQ5+L3VzZXJzL3RhbHRhbGQWAmYPDxYIHwYbAAAAAAAAVEABAAAAHwcbAAAAAAAAVEABAAAAHwgFRC8vc3RhdGljMy5zY2lycmEubmV0L2F2YXRhcnMvODAvMmE2ODBlM2JmNGRmNmMyODAyODkxZjlkN2ZlYTU1MjcucG5nHwkCgANkZAITDw8WBB8BBQZ0YWx0YWwfBQUOfi91c2Vycy90YWx0YWxkZAIVDxYCHwEFBTMsODkxZAIXDxYCHwEFKzxwPm5pY2UuLiB0aGFua3MhITxiciAvPmkgd2lsbCB1c2UgaXQhITwvcD5kAhkPFgIfAQUGdGFsdGFsZAIcDw8WAh8FBWl+L2Jsb2cvNzYvaG93LXRvLXdyaXRlLWxvdy1nYXJiYWdlLXJlYWwtdGltZS1qYXZhc2NyaXB0P2FjdGlvbj1yZXBvcnRjb21tZW50JnBhZ2U9MSZjb21tZW50SUQ9NTQyMSNyZXBvcnRkZAIfDxYCHwEFZTxhYmJyIGNsYXNzPSJ0aW1lYWdvIiB0aXRsZT0iMjAxMi0wMy0xNlQxNzo1NDo0NS45MDMwMDAwIj5GcmlkYXksIE1hcmNoIDE2LCAyMDEyIGF0IDU6NTQ6NDUgUE08L2FiYnI+ZAIMD2QWFgIJDxYCHwEFBDU0MjNkAgsPDxYCHwUFTn4vcmVnaXN0ZXI/cmV0dXJuPWJsb2cvNzYvaG93LXRvLXdyaXRlLWxvdy1nYXJiYWdlLXJlYWwtdGltZS1qYXZhc2NyaXB0P3BhZ2U9MWRkAg0PFgIfAQUBMGQCDw8PFgIfBQVOfi9yZWdpc3Rlcj9yZXR1cm49YmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/cGFnZT0xZGQCEQ8PFgIfBQURfi91c2Vycy9pbGxhbmRyaWxkFgJmDw8WCB8GGwAAAAAAAFRAAQAAAB8HGwAAAAAAAFRAAQAAAB8IBUQvL3N0YXRpYzQuc2NpcnJhLm5ldC9hdmF0YXJzLzgwLzdhODE1YjA4N2IyNWI2ODJiYzJhMzJhODg0MGQ4OWZjLnBuZx8JAoADZGQCEw8PFgQfAQUJaWxsYW5kcmlsHwUFEX4vdXNlcnMvaWxsYW5kcmlsZGQCFQ8WAh8BBQM4NzdkAhcPFgIfAQW6ATxwPkkgZGlkbid0IGV4cGVjdCBhbnlib2R5IHRvIGV2ZW4gbm90aWNlIEJveDJEd2ViLWNsb3N1cmUhIFRoYW5rcyBmb3IgdGhlIGNvbXBsZW1lbnQgdG8gbXkgYXBwcm9hY2ggKGV2ZW4gdGhvdWdoIHlvdSBwb2ludGVkIG91dCB0aGF0IEknbSBub3doZXJlIGNsb3NlIHRvIGRvbmUgaW1wbGVtZW50aW5nIGl0IDspICkhPC9wPmQCGQ8WAh8BBQlpbGxhbmRyaWxkAhwPDxYCHwUFaX4vYmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/YWN0aW9uPXJlcG9ydGNvbW1lbnQmcGFnZT0xJmNvbW1lbnRJRD01NDIzI3JlcG9ydGRkAh8PFgIfAQVlPGFiYnIgY2xhc3M9InRpbWVhZ28iIHRpdGxlPSIyMDEyLTAzLTE2VDE4OjA3OjEzLjc0MDAwMDAiPkZyaWRheSwgTWFyY2ggMTYsIDIwMTIgYXQgNjowNzoxMyBQTTwvYWJicj5kAg0PZBYWAgkPFgIfAQUENTQyNGQCCw8PFgIfBQVOfi9yZWdpc3Rlcj9yZXR1cm49YmxvZy83Ni9ob3ctdG8td3JpdGUtbG93LWdhcmJhZ2UtcmVhbC10aW1lLWphdmFzY3JpcHQ/cGFnZT0xZGQCDQ8WAh8BBQEwZAIPDw8WAh8FBU5+L3JlZ2lzdGVyP3JldHVybj1ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9wYWdlPTFkZAIRDw8WAh8FBQ5+L3VzZXJzL2FzaGxleWQWAmYPDxYIHwYbAAAAAAAAVEABAAAAHwcbAAAAAAAAVEABAAAAHwgFRC8vc3RhdGljMS5zY2lycmEubmV0L2F2YXRhcnMvODAvMWFjYjQ3YTcyOGM3YzhhMTg2NjQ3ZGNmYWEyYjU4NjUucG5nHwkCgANkZAITDw8WBB8BBQZBc2hsZXkfBQUOfi91c2Vycy9hc2hsZXlkZAIVDxYCHwEFBTkxLjFrZAIXDxYCHwEFnQE8cD5AaWxsYW5kcmlsIHRoYW5rcyBmb3Igc3RvcHBpbmcgYnksIGl0J3MgYSBncmVhdCBpZGVhIGFuZCBhIG11Y2ggbmVlZGVkIHByb2plY3QgdG8gdHJ5IGFuZCByZWR1Y2UgdGhlIEdDIG92ZXJoZWFkIG9mIGJveDJkLCB0aGFua3MgZm9yIHlvdXIgd29yayBvbiBpdCE8L3A+ZAIZDxYCHwEFBkFzaGxleWQCHA8PFgIfBQVpfi9ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9hY3Rpb249cmVwb3J0Y29tbWVudCZwYWdlPTEmY29tbWVudElEPTU0MjQjcmVwb3J0ZGQCHw8WAh8BBWU8YWJiciBjbGFzcz0idGltZWFnbyIgdGl0bGU9IjIwMTItMDMtMTZUMTg6MTI6MzcuNTQ3MDAwMCI+RnJpZGF5LCBNYXJjaCAxNiwgMjAxMiBhdCA2OjEyOjM3IFBNPC9hYmJyPmQCDg9kFhgCAQ8WAh8AZ2QCCQ8WAh8BBQQ1NDMxZAILDw8WAh8FBU5+L3JlZ2lzdGVyP3JldHVybj1ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9wYWdlPTFkZAINDxYCHwEFATBkAg8PDxYCHwUFTn4vcmVnaXN0ZXI/cmV0dXJuPWJsb2cvNzYvaG93LXRvLXdyaXRlLWxvdy1nYXJiYWdlLXJlYWwtdGltZS1qYXZhc2NyaXB0P3BhZ2U9MWRkAhEPDxYCHwUFD34vdXNlcnMvcXJmdnJnZWQWAmYPDxYIHwYbAAAAAAAAVEABAAAAHwcbAAAAAAAAVEABAAAAHwgFRC8vc3RhdGljNC5zY2lycmEubmV0L2F2YXRhcnMvODAvOTRkNWFkZjcxMzhmZTZkNzQwOGIyY2RjMjFkZGM2NjAucG5nHwkCgANkZAITDw8WBB8BBQdxcmZ2cmdlHwUFD34vdXNlcnMvcXJmdnJnZWRkAhUPFgIfAQUDODUyZAIXDxYCHwEF+gU8cD4iSXQgbWF5IGJlIGJldHRlciB0byB3cml0ZSB0aGUgcmV0dXJuIHZhbHVlIHRvIHRoZSBzYW1lIChnbG9iYWwpIG9iamVjdCBldmVyeSB0aW1lIGFuZCByZXR1cm4gdGhhdCAtIHByb3ZpZGluZyB5b3UgZG9jdW1lbnQgdGhpcyBjYXJlZnVsbHkiIDxiciAvPjxiciAvPi4uLiBObyBtYXR0ZXIgaG93IGNhcmVmdWxseSB5b3UgZG9jdW1lbnQgaXQgV0lMTCBmYWlsLCBhbmQgbW9yZSA6IEkgaWYgeW91IHdhbnQgdG8gYWN0dWFsbHkgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QgeW91IHdpbGwgaGF2ZSB0byBjb3B5IGJlZm9yZSBpdCBnZXRzIHRyYXNoZWQgYnkgbmV4dCBjYWxsIC4uLjxiciAvPjxiciAvPk5vdCB3aGF0IEkgY291bGQgY2FsbCBzdHJ1Y3R1cmVkIHByb2dyYW1taW5nIDtQPGJyIC8+PGJyIC8+V2FudCB0byBwcmV2ZW50IGNvbGxlY3Rpb24gPyBVc2Ugb2JqZWN0cyBwb29scyAuLi4gdGhhdCB0YWtlIGNhcmUgb2YgcmVzZXR0aW5nIGF0IHJldXNlIGFuZCBvbmx5IGdyb3dzIGlmIG5lY2Vzc2FyeSAuLi4gdGhlbiB0aGUgcXVlc3Rpb24gYmVjb21lcyBob3cgbWFueSBvZiB0aGVtIGRvIHlvdSBuZWVkIGF0IHRoZSBzYW1lIHRpbWUgLi48YnIgLz48YnIgLz48YSBocmVmPSJodHRwOi8vZ2FtZXByb2dyYW1taW5ncGF0dGVybnMuY29tL29iamVjdC1wb29sLmh0bWwiIHJlbD0ibm9mb2xsb3ciPmh0dHA6Ly9nYW1lcHJvZ3JhbW1pbmdwYXR0ZXJucy5jb20vb2JqZWN0LXBvb2wuaHRtbDwvYT48YnIgLz48YnIgLz5NeSAyYzwvcD5kAhkPFgIfAQUHcXJmdnJnZWQCHA8PFgIfBQVpfi9ibG9nLzc2L2hvdy10by13cml0ZS1sb3ctZ2FyYmFnZS1yZWFsLXRpbWUtamF2YXNjcmlwdD9hY3Rpb249cmVwb3J0Y29tbWVudCZwYWdlPTEmY29tbWVudElEPTU0MzEjcmVwb3J0ZGQCHw8WAh8BBWU8YWJiciBjbGFzcz0idGltZWFnbyIgdGl0bGU9IjIwMTItMDMtMTZUMjA6NTQ6NTYuNzQwMDAwMCI+RnJpZGF5LCBNYXJjaCAxNiwgMjAxMiBhdCA4OjU0OjU2IFBNPC9hYmJyPmQCBQ8WAh8BBdgEPGxpICBzdHlsZT0iZGlzcGxheTpub25lIiAgaWQ9InByZXYiPjxhIGhyZWY9Ij9wYWdlPTAjY29tbWVudHMiIG9uY2xpY2s9ImNoYW5nZUNvbW1lbnRQYWdlKGN1cnJlbnRQYWdlIC0gMSk7IHJldHVybiBmYWxzZTsiPlByZXY8L2E+PC9saT48bGk+PGEgaWQ9ImNvbW1lbnQtcGFnZWxpbmstMSIgaHJlZj0iP3BhZ2U9MSNjb21tZW50cyIgY2xhc3M9InNlbGVjdGVkIiBvbmNsaWNrPSJjaGFuZ2VDb21tZW50UGFnZSgxKTtyZXR1cm4gZmFsc2U7Ij4xPC9hPjwvbGk+PGxpPjxhIGlkPSJjb21tZW50LXBhZ2VsaW5rLTIiIGhyZWY9Ij9wYWdlPTIjY29tbWVudHMiICBvbmNsaWNrPSJjaGFuZ2VDb21tZW50UGFnZSgyKTtyZXR1cm4gZmFsc2U7Ij4yPC9hPjwvbGk+PGxpPjxhIGlkPSJjb21tZW50LXBhZ2VsaW5rLTMiIGhyZWY9Ij9wYWdlPTMjY29tbWVudHMiICBvbmNsaWNrPSJjaGFuZ2VDb21tZW50UGFnZSgzKTtyZXR1cm4gZmFsc2U7Ij4zPC9hPjwvbGk+PGxpICBpZD0ibmV4dCI+PGEgaHJlZj0iP3BhZ2U9MiNjb21tZW50cyIgb25jbGljaz0iY2hhbmdlQ29tbWVudFBhZ2UoY3VycmVudFBhZ2UgKyAxKTtyZXR1cm4gZmFsc2U7Ij5OZXh0PC9hPjwvbGk+ZAIEDxYCHwBoFgICBQ8PZBYCHgdvbmNsaWNrBRtwb3N0Q29tbWVudCgpO3JldHVybiBmYWxzZTtkAgYPFgIfAGcWBAIBDw8WAh8FBSYvcmVnaXN0ZXI/cmV0dXJuPS9ibG9nZnJlc2guYXNweD9JRD03NmRkAgMPDxYCHwUFIy9sb2dpbj9yZXR1cm49L2Jsb2dmcmVzaC5hc3B4P0lEPTc2ZGQCDg8PFgQfAQUVU3RhYmxlIFJlbGVhc2UgKHIxNDYpHwUFGn4vY29uc3RydWN0Mi9yZWxlYXNlcy9yMTQ2ZGQCDw8PFgYfAQUTQmV0YSBSZWxlYXNlIChyMTQ1KR8FBRp+L2NvbnN0cnVjdDIvcmVsZWFzZXMvcjE0NR8AaGRkAhAPFgIfAQWWAjxkaXYgY2xhc3M9InRvdGFsLWRsLXdyYXAiIHRpdGxlPSJDb25zdHJ1Y3QgMiBoYXMgYmVlbiBkb3dubG9hZGVkIDY2NSw3MDkgdGltZXMgdG8gZGF0ZSI+PGRpdiBjbGFzcz0iY2giPjY8L2Rpdj48ZGl2IGNsYXNzPSJjaCI+NjwvZGl2PjxkaXYgY2xhc3M9ImNoIj41PC9kaXY+PGRpdiBjbGFzcz0iY2hzIj48L2Rpdj48ZGl2IGNsYXNzPSJjaCI+NzwvZGl2PjxkaXYgY2xhc3M9ImNoIj4wPC9kaXY+PGRpdiBjbGFzcz0iY2giPjk8L2Rpdj48cD5Ub3RhbCBkb3dubG9hZHM8L3A+PC9kaXY+ZAIeD2QWAgIDD2QWAmYPFgIfAQUBM2QCHw8WAh8AZ2RkvIjRAL7g8GhMsNMR2A8aE75bxLw=" />


    
        <div id="sitewide-notice">
            <a id="ex" href="javascript:void(0)" onclick="remSiteNotice(3)" title="Hide this notification">x</a>
            <div class="sitewide-notice-inner">
                <img src="https://static2.scirra.net/images/store/55/notion-games-logo-01.jpg" style="float:right;margin-top:-20px;" width="80" height="115" /><a href="https://www.scirra.com/blog/121/super-ubie-land-now-available" style="display:block;float:left;"><img src="https://static2.scirra.net/images/store/55/super-ubie-land.png" style="margin-top:-50px;-webkit-box-shadow: -4px -3px 9px rgba(50, 50, 50, 0.77);-moz-box-shadow:    -4px -3px 9px rgba(50, 50, 50, 0.77);box-shadow:         -4px -3px 9px rgba(50, 50, 50, 0.77);" width="210" height="140" /></a><div style="margin-top:-10px;"><a href="https://www.scirra.com/blog/121/super-ubie-land-now-available" style="font-size:32px;">Super Ubie Land Now Available!</a><span style="display:block;color:white;font-weight:bold;">An awesome Construct 2 game.  <a href="https://www.scirra.com/store/games/super-ubie-land">Buy now!</a> <span style="display:inline-block;background:red;text-align:Center;font-weight:bold;padding: 2px 8px;margin-left:30px;">ONLY $9.99!</span></span></div>
            </div>
        </div>
    

    <header>
        
    

<div class="menu-wrapper">
    <div class="content-wrap">
        
            <a class="topmenu-logo" href="https://www.scirra.com"><img src="//static4.scirra.net/images/fresh/scirra-logo-small-01.png" width="101" height="28" alt="Scirra Logo Small" /></a>
        
        <ul>
            <li id="Construct2Link"><a href="https://www.scirra.com/construct2">Construct 2</a></li><li id="splitConstruct2R" class="split"></li>
            <li id="ManualLink"><a href="https://www.scirra.com/manual">Manual</a></li><li id="splitManualR" class="split"></li>
            <li id="TutorialsLink"><a href="https://www.scirra.com/tutorials">Tutorials</a></li><li id="splitTutR" class="split"></li>
            <li id="StoreLink"><a href="https://www.scirra.com/store">Store</a></li><li class="split"></li>
            <li id="ArcadeLink"><a href="https://www.scirra.com/arcade">Arcade</a></li>
            <li id="BlogLink" class="selected"><a href="https://www.scirra.com/blog">Blog</a></li>
            <li id="ForumsLink"><a href="https://www.scirra.com/forum">Forums</a></li><li id="splotForumR" class="split"></li>
            <li id="EducationLink"><a href="https://www.scirra.com/education">Education</a></li><li id="splitEducationR" class="split"></li>
        </ul>
        
        <div id="LoggedOutView" class="guest-panel">
	
            <a href="../../register" title="Create a Scirra account">Register</a> or <a href="../../login" title="Login to your Scirra account">Login</a>
        
</div>

        <div class="clear"></div>
    </div>
</div>

        <div class="content-wrap">
            
            

            
        </div>
    </header>
    
    
    <div class="clear"></div>
    
    

    <div class="content-wrap">
        <div class="thin-bar-2 r">
            <div class="about-us">
                <img src="//static3.scirra.net/images/fresh/scirra-symbol-01.png" width="67" height="70" alt="Scirra cog" />
                <h2>About Us</h2>
                <div class="clear"></div>
                <p class="about-us-txt">
                    We're a London based startup that develops <a href="~/construct2">Construct 2</a>, software that lets you make your own computer games!
                </p>
            </div>
            
            <div class="c">
                <a href="../blog-feed.rss" title="Blog RSS feed" target="_blank"><img style="margin:0 12px;" src="//static2.scirra.net/images/fresh/feed-icon-01.png" width="34" height="35" /></a>
                <a title="Like us on Facebook!" href="https://www.facebook.com/ScirraOfficial" target="_blank"><img style="margin:0 12px;" src="//static4.scirra.net/images/fresh/facebook-icon-01.png" width="34" height="35" /></a>
                <a title="Follow us on Twitter!" href="https://twitter.com/scirra" target="_blank"><img style="margin:0 12px;" src="//static2.scirra.net/images/fresh/twitter-icon-01.png" width="34" height="35" /></a>
                <a title="Follow us on Google Plus!" href="https://plus.google.com/105404553461194404336/posts" target="_blank"><img style="margin:0 12px;" src="//static1.scirra.net/images/fresh/googleplus-icon-01.png" width="34" height="35" /></a>
                <a title="Watch our Youtube channel!" href="http://www.youtube.com/user/ScirraVideos" target="_blank"><img style="margin:0 12px;" src="//static2.scirra.net/images/fresh/youtube-icon-01.png" width="34" height="35" /></a>
            </div>

            <h2>Archives</h2>
            <a href="../archive" title="Archived blog posts" style="display:block;margin-top:20px;margin-bottom:30px;">Browse all our blog posts</a>
            <h2>Latest Blog Entries</h2>
            <ul>
                <li><a href="../124/introducing-the-construct-2-debugger-and-profiler">Introducing the Construct 2 Debugger and Profiler</a></li><li><a href="../123/make-money-from-your-games">Make money from your games!</a></li><li><a href="../121/super-ubie-land-now-available">Super Ubie Land Now Available!</a></li><li><a href="../119/spriter-support-in-construct-2">Spriter support in Construct 2</a></li><li><a href="../118/windows-8-summer-competition-results">Windows 8 Summer Competition Results</a></li><li><a href="../117/tizen-app-challenge-4m-in-prizes">Tizen App Challenge - $4m in prizes</a></li><li><a href="../116/construct-2-going-to-education">Construct 2 Going to Education</a></li><li><a href="../115/newgrounds-touchjam-competition-results">Newgrounds Touchjam Competition Results</a></li><li><a href="../114/announcing-blackberry-10-and-tizen-export-in-free-construct-2-update">Announcing Blackberry 10 and Tizen export in free Construct 2 update</a></li><li><a href="../113/windows-8-summer-competition">Windows 8 summer competition</a></li>
            </ul>
            <h2>We love brains!</h2>
            <p>Join us!  Joiiinnn ussss!  Mooooree brains!</p>
            <iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2FScirraOfficial&amp;width=310&amp;height=258&amp;colorscheme=light&amp;show_faces=true&amp;border_color=%23efefef&amp;stream=false&amp;header=false&amp;appId=197624256970598" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:310px; height:258px; margin:0 auto;" allowtransparency="true"></iframe>
        </div>
        
        <div class="inner-content-wrap">
            
            <h1>How to write low garbage real-time Javascript</h1>
            
            

            <div class="author-info">by <a href="../../users/ashley">Ashley</a> | 15th, March 2012</div>
            
            <div class="blog-content">
                
                

                <p><em>Edit 27th March 2012: wow, this article went a long way, thanks for the great response!  There has been some criticism of some of the techniques here, such as the use of 'delete'.  I'm aware things like that can cause other slowdowns, we use it very very sparingly in our engine.  As always everything involves tradeoffs and you have to use judgement to balance GC with other concerns.  This is simply a list of techniques we've found useful in our engine and was not meant to be a complete reference.  I hope it's still somehow useful though!</em></p>

<p>For HTML5 games written in Javascript, one of the biggest obstacles to a smooth experience is <strong>garbage collection (GC) pauses.</strong>  Javascript doesn't have explicit memory management, meaning you create things but don't release them.  Sooner or later the browser decides to clean up: execution is paused, the browser figures out which parts of memory are still currently in use, and then releases everything else.  This blog post will go in to the technical details of avoiding GC overhead, which should also come in handy for any plugin or behavior developers working with Construct 2's <a href="http://www.scirra.com/manual/15/sdk" title="Construct 2 Javascript Plugin and Behavior SDK">Javascript SDK</a>.</p>

<p>There are lots of techniques browsers can employ to reduce GC pauses, but if your code creates a lot of garbage, sooner or later it's going to have to pause and clean up.  This results in zig-zag memory usage graphs, as objects are gradually created, then the browser suddenly cleans up.  For example, below is a graph of Chrome's memory usage while playing Space Blaster.</p>

<div align="center"><img src="//www.scirra.com/images/chromememoryusage.png" alt="Chrome garbage-collected memory usage" width="600" /><br /><p><em>
Zig-zag memory usage while playing a Javascript game.  This can be mistaken for a memory leak, but is in fact the normal operation of Javascript.</em></p></div>

<p>Further, a game running at 60 fps only has 16ms to render each frame, and GC collection can easily take 100ms or more - resulting in a visible pause, or in even worse situations, a constantly choppy play experience.  Therefore, for real-time Javascript code like game engines, the solution is to try and reach the point where <em>you create nothing at all</em> during a typical frame.  This is surprisingly difficult, because there are many innocuous looking Javascript statements that actually create garbage, and they <em>all</em> have to be removed from the per-frame code path.  In Construct 2 we've gone to great lengths to minimise the garbage overhead in the per-tick engine, but as you can see from the graph above there's still a small rate of object creation that Chrome is cleaning up every several seconds.  Note it's only a small dip though - there isn't a large amount of memory being cleaned up.  A taller, more extreme zig-zag would be a cause for concern.  However it's probably good enough, since small collections are quicker, and the occasional small pause is not generally too noticable - and as we shall see, sometimes it's extremely difficult to avoid new allocations.</p>

<p>It's also important for third-party plugin and behavior developers to follow these guidelines.  Otherwise, a badly written plugin can create lots of garbage and cause the game to become choppy, even though the main Construct 2 engine is very low-garbage.</p>

<h3>Simple techniques</h3>

<p>First of all, most obviously, the <code>new</code> keyword indicates an allocation, e.g. <code>new Foo()</code>.  Where possible, try to create the object on startup, and simply <strong>re-use the same object</strong> for as long as possible.</p>

<p>Less obviously, there are three syntax shortcuts for common uses of <code>new</code>:</p>

<p><code>{}</code> <em>(creates a new object)</em><br />
<code>[]</code> <em>(creates a new array)</em><br />
<code>function () { ... }</code> <em>(creates a new function, which are also garbage-collected!)</em></p>

<p>For objects, avoid <code>{}</code> the same way you avoid <code>new</code> - try to recycle objects.  Note this includes objects with properties like <code>{ "foo": "bar" }</code>, which is also commonly used in functions to return multiple values at once.  It may be better to write the return value to the same (global) object every time and return that - providing you document this carefully, since you can cause bugs if you keep referencing the returned object which will change on every call!</p>

<p>You can actually re-cycle an existing object (providing it has no prototype chain) by deleting all of its properties, restoring it to an empty object like <code>{}</code>.  For this you can use the <code>cr.wipe(obj)</code> function, defined as:</p>

<pre style="font-size: 0.8em;">// remove all own properties on obj,
effectively reverting it to a new object
cr.wipe = function (obj)
{
	for (var p in obj)
	{
		if (obj.hasOwnProperty(p))
			delete obj[p];
	}
};</pre>

<p>So in some cases you can re-use an object by calling <code>cr.wipe(obj)</code> and adding properties again.  Wiping an object may take longer on-the-spot than simply assigning <code>{}</code>, but in real-time code it's much more important to avoid building up garbage which will later result in a pause.</p>

<p>Assigning <code>[]</code> to an array is often used as a shorthand to clear it (e.g. <code>arr = [];</code>), but note this creates a new empty array and garbages the old one!  It's better to write <code>arr.length = 0;</code> which has the same effect but while re-using the same array object.</p>

<p>Functions are a bit trickier.  Functions are commonly created at startup and don't tend to be allocated at run-time so much - but this means it's easy to overlook the cases where they are dynamically created.  One example is functions which return functions.  The main game loop typically uses <code>setTimeout</code> or <code>requestAnimationFrame</code> to call a member function something like this:</p>

<pre style="font-size: 0.8em;">setTimeout((function (self) { return function () {
self.tick(); }; })(this), 16);</pre>

<p>This looks like a reasonable way to call <code>this.tick()</code> every 16 ms.  However, it also means every tick it returns a new function!  This can be avoided by storing the function permanently, like so:</p>

<pre style="font-size: 0.8em;">// at startup
this.tickFunc = (function (self) { return function () {
self.tick(); }; })(this);

// in the tick() function
setTimeout(this.tickFunc, 16);</pre>

<p>This re-uses the same function every tick rather than spawning a new one.  The same idea can be applied anywhere else functions are returned or otherwise created at runtime.</p>

<h3>Advanced techniques</h3>

<p>As we progress further avoiding garbage becomes more difficult, since Javascript is so fundamentally designed around the GC.  Many of the convenient library functions in Javascript also create new objects.  There is not much you can do here but go back to the documentation and look up the return values.  For example, the array <code>slice()</code> method returns a new array (based on a range in the original array, which remains untouched), string's <code>substr</code> returns a new string (based on a range of characters in the original string, which remains untouched), and so on.  Calling these functions creates garbage, and all you can do is either not call them, or in extreme cases re-write the functions in a way which does not create garbage.  For example in the Construct 2 engine, for various reasons a regular operation is to delete the element at an index from an array.  This convenient snippet was originally used for this:</p>

<pre style="font-size: 0.8em;">var sliced = arr.slice(index + 1);
arr.length = index;
arr.push.apply(arr, sliced);</pre>

<p>However, <code>slice()</code> returns a new array object with the latter part of the array, and it becomes garbage after being copied back in (<code>arr.push.apply</code>).  Since this was a hot spot for garbage creation in our engine, it was rewritten to an iterative version:</p>

<pre style="font-size: 0.8em;">for (var i = index, len = arr.length - 1; i &lt; len; i++)
	arr[i] = arr[i + 1];

arr.length = len;</pre>

<p>Obviously rewriting a lot of library functions is a huge pain, so you have to carefully balance the needs of convenience versus garbage creation.  If it's called many times per frame, you may well want to rewrite a library function yourself.</p>

<p>It can be tempting to use <code>{}</code> syntax to pass data along in recursive functions.  This is better done with a single array representing a stack which you push and pop for each level of recursion.  Better yet, don't actually pop the array - you'll garbage the last object in the array.  Instead use a 'top index' variable which you simply decrement.  Then instead of pushing, increment the top index and re-use the next object in the array if there is one, otherwise do a real push.</p>

<p>Also, <strong>avoid vector objects if at all possible</strong> (as in vector2 with x and y properties).  While again it may be convenient to have functions return these objects so they can change or return both values at once, you can easily end up with hundreds of these created <em>every frame</em>, resulting in terrible GC performance.  These functions must be separated out to work on each component separately, e.g. instead of <code>getPosition()</code> returning a vector2 object, have <code>getX()</code> and <code>getY()</code>.</p>

<p>Sometimes you're stuck with a library which is a garbage nightmare.  The Box2Dweb library is a prime example: it spawns hundreds of b2Vec2 objects every frame constantly spraying the browser with garbage, and can end up causing significant garbage collector pauses.  The best thing to do in this situation is create a recycling cache.  We've been testing a modified version of Box2D (<a href="https://github.com/illandril/box2dweb-closure">Box2Dweb-closure</a>) that does this and it seems to help alleviate (although not entirely solve) GC pauses.  See the code for <code>Get</code> and <code>Free</code> in <a href="https://github.com/illandril/box2dweb-closure/blob/master/src/common/math/b2Vec2.js">b2Vec2.js</a>.  There's an array called the 'free cache', and throughout the code if there's a b2Vec2 which is known to be no longer used, it is freed, which puts it in the free cache.  When requesting a new b2Vec2, if there are any in the free cache they are re-used, otherwise a new one is allocated.  It's not perfect, since by some measurements I made often only half the b2Vec2s created get recycled, but it does relieve the pressure on the GC helping there be less frequent pauses.</p>

<h3>Conclusion</h3>

<p>It's difficult avoiding garbage entirely in Javascript.  The garbage-collection pattern is fundamentally at odds with the requirements of real-time software like games.  It can also be a lot of work to eliminate garbage from Javascript code since there's a lot of straightforward code out there which has the side-effect of creating loads of garbage.  However, with care and attention, it is possible to craft real-time Javascript with little to no garbage collector overhead, and this is essential for games and apps which need to be highly responsive.</p>
            

                <div style="width:410px;margin:0 auto;height:60px;overflow:hidden;">
                    <div style="margin-bottom:5px;text-align:center;"><strong>Now follow us and share this</strong></div>
                    <div class="addthis_toolbox addthis_default_style addthis_32x32_style" style="width:260px; float:right;">
                        <a class="addthis_button_preferred_1"></a>
                        <a class="addthis_button_preferred_2"></a>
                        <a class="addthis_button_preferred_3"></a>
                        <a class="addthis_button_preferred_4"></a>
                        <a class="addthis_button_preferred_5"></a>
                        <a class="addthis_button_preferred_6"></a>
                        <a class="addthis_button_compact"></a>
                    </div>
                    <div class="l" style="margin-top:2px"><a href="https://twitter.com/Scirra" class="twitter-follow-button" data-show-count="false" data-size="large" data-dnt="true">Follow @Scirra</a></div>
                    <div class="clear"></div>
                </div>
            
                <div style="height:70px;">
                    <h2 class="l">Tags:</h2>
                    <ul class="tag-list">
                        <li><a title="Our blog relating to HTML5, Construct 2, game making, competitors (such as GameSalad and GameMaker), start-ups, business, our strategy, development and the industry in general." href="../../tags/73/blog">Blog</a></li><li><a title="If you want to make games Construct 2 is the tool of choice. Create games and share them. No programming required, and games created are exported to HTML5. Make a game in Construct 2." href="../../tags/77/construct2">Construct2</a></li><li><a title="Construct 2 the game maker exports to HTML5 which is a new, open technology. Games created in Construct 2 are shareable on the web in a few easy clicks. Make games with Construct 2." href="../../tags/103/html5">HTML5</a></li><li><a title="Construct 2 exports games into HTML5 which uses JavaScript. JavaScript is a scripting language that adds logic and function into games. It is an implementation of the ECMAScript language." href="../../tags/148/javascript">Javascript</a></li><li><a title="Resources tagged technical generally refer to articles/tutorials that go into deep detail about Construct 2 the game maker that game creators themselves are probably not required to know to make games" href="../../tags/147/technical">Technical</a></li>
                    </ul>
                </div>
                <div>
                    


    <h2>Comments</h2>
    <a name="comments"></a>
    
    <div id="all-comments-wrap" class="all-comments-wrap">
        
                
                <div class="comment-wrap actual-comment" id="comment">
                <a id="EABadge" class="s earlyadop-badge" href="../../store"></a>
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5379">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">6</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/mipey"><img id="AuthorAvatar" class="avatar" src="//static4.scirra.net/avatars/80/4c1097553d5be1b4ba4920ca7688f684.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/mipey">Mipey</a> <span class="repamount">11.5k</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>What an insightful entry! I'll be sure to remember this the next time I dive into JS.</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'Mipey');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5379#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-15T17:11:56.9030000">Thursday, March 15, 2012 at 5:11:56 PM</abbr></div>
                    </div>
                </div>
            
                
                <div class="comment-wrap actual-comment" id="comment">
                <a id="EABadge" class="s earlyadop-badge" href="../../store"></a>
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5381">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">2</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/telles0808"><img id="AuthorAvatar" class="avatar" src="//static3.scirra.net/avatars/80/9596bd2ff7647cbc8bb3f1fbca1b95b3.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/telles0808">TELLES0808</a> <span class="repamount">12.6k</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>That's true, for example, I believe in first checks only, if you need double check something, it's wrong or poor coded.</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'TELLES0808');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5381#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-15T17:21:10.3630000">Thursday, March 15, 2012 at 5:21:10 PM</abbr></div>
                    </div>
                </div>
            
                
                <div class="comment-wrap actual-comment" id="comment">
                
                <a id="STDBadge" class="s stand-badge" href="../../store"></a>
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5382">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">0</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/ageiser"><img id="AuthorAvatar" class="avatar" src="//static2.scirra.net/avatars/80/fbdb13956501455f283dc3d65c0ff6e2.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/ageiser">ageiser</a> <span class="repamount">3,567</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>Can you clarify please: What is garbage?</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'ageiser');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5382#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-15T17:28:43.2000000">Thursday, March 15, 2012 at 5:28:43 PM</abbr></div>
                    </div>
                </div>
            
                
                <div class="comment-wrap actual-comment" id="comment">
                <a id="EABadge" class="s earlyadop-badge" href="../../store"></a>
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5383">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">4</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/danijerry"><img id="AuthorAvatar" class="avatar" src="//static2.scirra.net/avatars/80/1cb3e9fea4d81f55a4befac811356911.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/danijerry">Danijerry</a> <span class="repamount">4,574</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>Most needed. Some best practices for JS programming. Thank you!</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'Danijerry');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5383#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-15T17:33:03.2530000">Thursday, March 15, 2012 at 5:33:03 PM</abbr></div>
                    </div>
                </div>
            
                
                <div class="comment-wrap actual-comment" id="comment">
                
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5390">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">3</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/commonlisp"><img id="AuthorAvatar" class="avatar" src="//static4.scirra.net/avatars/80/bfd5b830d4174ebc05a9beef02444352.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/commonlisp">commonlisp</a> <span class="repamount">964</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>It's good to see someone point out the garbage collection (aka automatic memory management) concerns in realtime JavaScript applications. However, I must note that your mileage may vary with these techniques for reusing long-lived objects, which relies on the JavaScript interpreter using "generational" garbage collection. At this time, it seems that only Chrome (and NodeJS [though NodeJS isn't a browser]) has this. There are generational collectors in the works for Firefox and Safari/WebKit, but until those are released, such techniques won't produce the same tremendous improvements across browsers.</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'commonlisp');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5390#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-15T19:39:31.9630000">Thursday, March 15, 2012 at 7:39:31 PM</abbr></div>
                    </div>
                </div>
            
                
                <div class="comment-wrap actual-comment" id="comment">
                
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5391">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">4</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/commonlisp"><img id="AuthorAvatar" class="avatar" src="//static4.scirra.net/avatars/80/bfd5b830d4174ebc05a9beef02444352.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/commonlisp">commonlisp</a> <span class="repamount">964</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>BTW, garbage in this context means heap allocated memory that is no longer in use for the remainder of the program execution, and thus can be "garbage collected" to free that memory for subsequent use.</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'commonlisp');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5391#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-15T20:00:44.7230000">Thursday, March 15, 2012 at 8:00:44 PM</abbr></div>
                    </div>
                </div>
            
                
                <div class="comment-wrap actual-comment" id="comment">
                <a id="EABadge" class="s earlyadop-badge" href="../../store"></a>
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5393">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">2</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/dssonthenet"><img id="AuthorAvatar" class="avatar" src="//static1.scirra.net/avatars/80/5b00b00bab708af7d8f028702cd23839.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/dssonthenet">dssonthenet</a> <span class="repamount">2,095</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>excellent post!</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'dssonthenet');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5393#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-15T20:40:42.1500000">Thursday, March 15, 2012 at 8:40:42 PM</abbr></div>
                    </div>
                </div>
            
                
                <div class="comment-wrap actual-comment" id="comment">
                <a id="EABadge" class="s earlyadop-badge" href="../../store"></a>
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5395">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">2</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/cjr1974"><img id="AuthorAvatar" class="avatar" src="//static1.scirra.net/avatars/80/5f86cc9bf363b87a9c612ee0264b558e.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/cjr1974">cjr1974</a> <span class="repamount">3,854</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>Thanks Ashley! How do you find the time to do the great work you do? :)</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'cjr1974');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5395#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-15T21:51:15.3270000">Thursday, March 15, 2012 at 9:51:15 PM</abbr></div>
                    </div>
                </div>
            
                
                <div class="comment-wrap actual-comment" id="comment">
                <a id="EABadge" class="s earlyadop-badge" href="../../store"></a>
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5397">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">2</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/rexrainbow"><img id="AuthorAvatar" class="avatar" src="//static4.scirra.net/avatars/80/0f59b911b7cfc4157500b447da3c3f04.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/rexrainbow">rexrainbow</a> <span class="repamount">11.9k</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>I agree performance is important. However, "bug free" is most important thing at all.</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'rexrainbow');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5397#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-16T03:12:51.9830000">Friday, March 16, 2012 at 3:12:51 AM</abbr></div>
                    </div>
                </div>
            
                
                <div class="comment-wrap actual-comment" id="comment">
                <a id="EABadge" class="s earlyadop-badge" href="../../store"></a>
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5401">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">0</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/acord"><img id="AuthorAvatar" class="avatar" src="//static4.scirra.net/avatars/80/4d63806a49c3931677d1f379791bd7ee.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/acord">acord</a> <span class="repamount">2,064</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>Almost certainly a dumb question: Does the same principle of re-usage apply to objects spawned in game?</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'acord');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5401#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-16T07:44:15.2130000">Friday, March 16, 2012 at 7:44:15 AM</abbr></div>
                    </div>
                </div>
            
                
                <div class="comment-wrap actual-comment" id="comment">
                
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5412">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">1</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/ashley"><img id="AuthorAvatar" class="avatar" src="//static1.scirra.net/avatars/80/1acb47a728c7c8a186647dcfaa2b5865.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/ashley">Ashley</a> <span class="repamount">91.1k</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>@acord, you don't need to worry about this at all from within C2, it handles the recycling of objects for you behind the scenes.</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'Ashley');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5412#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-16T15:46:37.4630000">Friday, March 16, 2012 at 3:46:37 PM</abbr></div>
                    </div>
                </div>
            
                
                <div class="comment-wrap actual-comment" id="comment">
                <a id="EABadge" class="s earlyadop-badge" href="../../store"></a>
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5421">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">0</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/taltal"><img id="AuthorAvatar" class="avatar" src="//static3.scirra.net/avatars/80/2a680e3bf4df6c2802891f9d7fea5527.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/taltal">taltal</a> <span class="repamount">3,891</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>nice.. thanks!!<br />i will use it!!</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'taltal');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5421#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-16T17:54:45.9030000">Friday, March 16, 2012 at 5:54:45 PM</abbr></div>
                    </div>
                </div>
            
                
                <div class="comment-wrap actual-comment" id="comment">
                
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5423">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">0</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/illandril"><img id="AuthorAvatar" class="avatar" src="//static4.scirra.net/avatars/80/7a815b087b25b682bc2a32a8840d89fc.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/illandril">illandril</a> <span class="repamount">877</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>I didn't expect anybody to even notice Box2Dweb-closure! Thanks for the complement to my approach (even though you pointed out that I'm nowhere close to done implementing it ;) )!</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'illandril');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5423#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-16T18:07:13.7400000">Friday, March 16, 2012 at 6:07:13 PM</abbr></div>
                    </div>
                </div>
            
                
                <div class="comment-wrap actual-comment" id="comment">
                
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5424">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">0</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/ashley"><img id="AuthorAvatar" class="avatar" src="//static1.scirra.net/avatars/80/1acb47a728c7c8a186647dcfaa2b5865.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/ashley">Ashley</a> <span class="repamount">91.1k</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>@illandril thanks for stopping by, it's a great idea and a much needed project to try and reduce the GC overhead of box2d, thanks for your work on it!</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'Ashley');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5424#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-16T18:12:37.5470000">Friday, March 16, 2012 at 6:12:37 PM</abbr></div>
                    </div>
                </div>
            
                <a name="lastcomment"></a>
                <div class="comment-wrap actual-comment" id="comment">
                
                
                    <div class="hr"></div>
                        <div class="comment-inner-wrap">
                        <div class="comment-vote-wrap" id="vote-wrap-5431">
                            <a id="DownvoteLink" class="downvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a><div class="votecount">0</div><a id="UpvoteLink" class="upvote" href="../../register?return=blog/76/how-to-write-low-garbage-real-time-javascript?page=1"></a>
                        </div>
                        <a id="AvatarHyperlink" href="../../users/qrfvrge"><img id="AuthorAvatar" class="avatar" src="//static4.scirra.net/avatars/80/94d5adf7138fe6d7408b2cdc21ddc660.png" height="80" width="80" /></a>
                            <a id="AuthorLink" class="author-link" href="../../users/qrfvrge">qrfvrge</a> <span class="repamount">852</span> <span class="rep-txt">rep</span>
                        <div class="comment-edit-wrap"></div>

                        <div class="body">
                            <p>"It may be better to write the return value to the same (global) object every time and return that - providing you document this carefully" <br /><br />... No matter how carefully you document it WILL fail, and more : I if you want to actually use the returned object you will have to copy before it gets trashed by next call ...<br /><br />Not what I could call structured programming ;P<br /><br />Want to prevent collection ? Use objects pools ... that take care of resetting at reuse and only grows if necessary ... then the question becomes how many of them do you need at the same time ..<br /><br /><a href="http://gameprogrammingpatterns.com/object-pool.html" rel="nofollow">http://gameprogrammingpatterns.com/object-pool.html</a><br /><br />My 2c</p>
                        </div>
                        
                        <div class="comment-cp">
                            <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, 'qrfvrge');"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="how-to-write-low-garbage-real-time-javascript?action=reportcomment&amp;page=1&amp;commentID=5431#report"></a>
                        </div>

                        <div class="time-ago"><abbr class="timeago" title="2012-03-16T20:54:56.7400000">Friday, March 16, 2012 at 8:54:56 PM</abbr></div>
                    </div>
                </div>
            
    
        <div class="comment-wrap">
            <div class="comment-page-wrap">
                <ul id="comment-page-list">
                    <li style="display:none" id="prev"><a href="?page=0#comments" onclick="changeCommentPage(currentPage - 1); return false;">Prev</a></li><li><a id="comment-pagelink-1" href="?page=1#comments" class="selected" onclick="changeCommentPage(1);return false;">1</a></li><li><a id="comment-pagelink-2" href="?page=2#comments" onclick="changeCommentPage(2);return false;">2</a></li><li><a id="comment-pagelink-3" href="?page=3#comments" onclick="changeCommentPage(3);return false;">3</a></li><li id="next"><a href="?page=2#comments" onclick="changeCommentPage(currentPage + 1);return false;">Next</a></li>
                </ul>
            </div>
        </div>
    </div>



<div id="comment-template" style="display:none;">
        
    <div class="comment-wrap actual-comment" id="comment#IDOfComment">
        #badgelink
        <div class="hr"></div>
            <div class="comment-inner-wrap">
            <div class="comment-vote-wrap" id="vote-wrap-#IDOfComment">
                <a id="DownvoteLink" title="Downvote this comment" class="#downvoteclass" onclick="commentVote(false, #IDOfComment);return false;" href="#baseURL?action=commentvote&amp;upvote=0&amp;page=#currentcommentpage&amp;commentID=#IDOfComment"></a><div class="votecount">#currentvotecount</div><a id="UpvoteLink" title="Upvote this comment!" class="#upvoteclass" onclick="commentVote(true, #IDOfComment);return false;" href="#baseURL?action=commentvote&amp;upvote=1&amp;page=#currentcommentpage&amp;commentID=#IDOfComment"></a>
            </div>
            #avatar
                #authorlink <span class="repamount">#rep</span> <span class="rep-txt">rep</span>
            <div class="comment-edit-wrap"></div>
            <div class="body">
                #comment
            </div>
            <div class="comment-cp">
                <a href="javascript:void(0)" class="quote" title="Quote this comment" onclick="addQuote(this, '#authorUsername');"></a><a id="EditCommentLink" title="Edit this comment" class="edit" onclick="editComment(#IDOfComment);return false;" href="javascript:void(0);"></a><a id="ReportCommentLink" title="Report this comment" class="report" href="#baseURL?action=reportcomment&amp;page=#currentcommentpage&amp;commentID=#IDOfComment#report"></a><a id="DeleteLink" title="Delete this comment" class="delete" onclick="deleteComment(#IDOfComment);return false;" href="javascript:void(0)"></a>
            </div>
            <div class="time-ago">#timeago</div>
        </div>
    </div>
</div>


    <div class="comment-form-wrap">
        <h2>Leave a comment</h2>
        <p>
            Everyone is welcome to leave their thoughts!  <a id="RegisterLink" href="/register?return=/blogfresh.aspx?ID=76">Register a new account</a> or <a id="LoginLink" href="/login?return=/blogfresh.aspx?ID=76">login</a>.
        </p>
    </div>



                </div>
                <div class="clear"></div>
            </div>
        </div>
    </div>

    
    <footer>
        <div class="footer-tear"></div>
        <div class="footer-wrap">
            <div class="content-wrap">
                <ul>
                    <li>
                        <h2>Make Games</h2>
                        <ul>
                            <li><a href="../../construct2">Construct 2</a></li>
                            <li><a href="../../construct2/releases">Download Construct 2</a></li>
                            <li><a href="../../store/construct-2">Pricing</a></li>
                            <li><a href="../../store/construct-2">Compare Features</a></li>
                            <li><a href="../../manual">Online Manual</a></li>
                        </ul>
                    </li>
                    <li>
                        <h2>Play Games</h2>
                        <ul>
                            <li><a href="../../arcade">Arcade</a></li>
                            <li><a href="../../arcade/submit">Upload a Game</a></li>
                            <li><a href="../../forum/arcade_forum48.html">Discuss</a></li>
                        </ul>
                    </li>
                    <li>
                        <h2>Download</h2>
                        <ul>
                            <li><a id="LatestStableLink" href="../../construct2/releases/r146">Stable Release (r146)</a></li>
                            <li></li>
                        </ul>
                        <div class="total-dl-wrap" title="Construct 2 has been downloaded 665,709 times to date"><div class="ch">6</div><div class="ch">6</div><div class="ch">5</div><div class="chs"></div><div class="ch">7</div><div class="ch">0</div><div class="ch">9</div><p>Total downloads</p></div>
                        <h2 style="margin-top:5px;margin-bottom:0px;">Game Assets</h2>
                        <ul>
                            <li><a href="http://www.scirra.com/freebundle.zip" target="_blank">Free Bundle (13mb)</a></li>
                        </ul>
                    </li>
                    <li>
                        <h2>Community</h2>
                        <ul>
                            <li><a href="../../blog">Blog</a></li>
                            <li><a href="../../forum">Forums</a></li>
                            <li><a href="../../tutorials">Tutorials</a></li>
                        </ul>
                    </li>
                    <li>
                        <h2>About Scirra</h2>
                        <ul>
                            <li><a href="../../about">About Scirra</a></li>
                            <li><a href="../../careers">Careers</a></li>
                            <li><a href="../../contact">Contact Us</a></li>
                            <li><a href="../../press-kit">Press Kit</a></li>
                            <li><a href="../../people">The Team</a></li>
                            <li><a href="../../privacy-policy">Privacy Policy</a></li>
                            <li><a href="../../terms-and-conditions">Terms and Conditions</a></li>
                            <li><a href="../../sitemap">Site Map</a></li>
                        </ul>
                    </li>
                </ul>
                <div class="clear"></div>
                
                <div class="footer-item-wrap">
                    <div>
                         <a href="../../"><img src="//static3.scirra.net/images/fresh/footer-scirra-logo-01.png" width="177" height="44" alt="Scirra Logo" /></a>
                    </div>
                    <div class="address">
                        Scirra Ltd, Electroline House<br />
                        15 Lion Road, London, TW1 4JH
                    </div>
                    <div class="postcard">
                        <a href="../../badges/45/postcard">Send us a postcard!</a>
                    </div>
                    <div>
                       <ul>
                            <li><a href="https://www.facebook.com/ScirraOfficial" target="_blank"><img src="//static2.scirra.net/images/fresh/footer-facebook-icon-01.png" width="34" height="35" /></a></li>
                            <li><a href="https://twitter.com/scirra" target="_blank"><img src="//static1.scirra.net/images/fresh/footer-twitter-icon-01.png" width="34" height="35" /></a></li>
                            <li><a href="https://plus.google.com/105404553461194404336/posts" target="_blank"><img src="//static2.scirra.net/images/fresh/footer-google-plus-icons-01.png" width="34" height="35" /></a></li>
                       </ul>
                    </div>
                </div>
                <div class="clear"></div>
                <div class="copyright">Copyright  2013 Scirra Ltd, All rights reserved.</div>

            </div>
        </div>
    </footer>
    
     <script>
         var RelPath = "../../";
         var Domainroot = "http://www.scirra.com";
     </script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="//static2.scirra.net/js/common.min.js?v=15"></script> 
    <script type="text/javascript">

        var alertsMarked = false;

        $(document).ready(function () {
            


            $('#fblikeframe').html('<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.scirra.com&send=false&layout=button_count&width=150&show_faces=true&action=like&colorscheme=light&font&height=21&appId=197624256970598" height="21" scrolling="no" frameborder="0" allowTransparency="true"></iframe>');
            !function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = "//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } } (document, "script", "twitter-wjs");


            $('#UserDropdownLink').click(function () {

                if ($('#UserDropDown').is(':visible')) {
                    hideUserDropDown();
                } else {
                    showUserDropDown();
                    hideAlertsDropDown();
                }
                return false;
            });
            
            $('#AlertBoxLink').click(function () {

                if ($('#AlertsDropDown').is(':visible')) {
                    hideAlertsDropDown();
                } else {
                    showAlertsDropDown();
                    hideUserDropDown();
                }
                return false;
            });

            $('#UserDropDown').click(function (event) {
                event.stopPropagation();
            });
            $('#AlertsDropDown').click(function (event) {
                event.stopPropagation();
            });
            
            $('body').click(function (e) {
                hideUserDropDown();
                hideAlertsDropDown();
            });

        });
        
        function hideAlertsDropDown() {
            $('#AlertsDropDown').slideUp('fast');
        }
        function showAlertsDropDown() {
            $('#AlertsDropDown').slideDown('fast');

            // Mark as read
            if (!alertsMarked) {
                $.ajax({
                    url: RelPath + "handlers/fresh/MarkAlerts.ashx",
                    success: function(data) {
                        alertsMarked = true;
                    }
                });
            }

        }

        function hideUserDropDown() {
            $('#UserDropDown').slideUp('fast');
        }
        function showUserDropDown() {
            $('#UserDropDown').slideDown('fast');
        }

        function plusone_callback(response) {
            $.ajax({
                url: RelPath + "handlers/gp1.ashx?o=" + response.state + "&u=" + response.href,
                context: document.body,
                success: function () {
                    $(this).addClass("done");
                }
            });

        }

    </script>
    <script src="//apis.google.com/js/plusone.js"></script>

    
    <script type="text/javascript">
        var addthis_config = { "data_track_clickback": true };
        var addthis_share = {
            templates: {
                twitter: ' {{url}} #html5 @scirra'
            }
        }
    </script>            
    <script type="text/javascript" src="//s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4e25dca2548fdc54"></script>

    <script src="//static4.scirra.net/js/qtip.js?v=15"></script> 
    <script>
        var currentPage = 1;
        var totalPages = 3;
        var anchor = '21f5b098-0673-4c63-80ae-11b67e925906';
        var commentsPerPage = 15;
        var avatarSize = 80;
        var baseHREF = '../../';
        var textAreaDefaultTxt = "Write your comment...";
        var maxLength =2500;
        var minLength = 10;
        var currentUserID = 0;
        var currentUsername = '';
    
        // Finds all instances of @username and highlights them
        function highlightSelfReferences() {
            $('.actual-comment .body').each(function () {

                var content = $(this).html();
                var re = new RegExp("@" + currentUsername,"gi");
                content = content.replace(re, '<span class="self-reference">' + currentUsername + '</span>');

                $(this).html(content);
            });
        }

        $(document).ready(function() {
            if($('#CommentEntry').val() == '')
                $('#CommentEntry').val(textAreaDefaultTxt);

            $('#char-count').html(maxLength);
            $('#chat-remain-wrap').show();
            highlightSelfReferences();
            initCP();
        });
        $('#CommentEntry').focus(function() {
            if($('#CommentEntry').val() == textAreaDefaultTxt) {
                $('#CommentEntry').val('');
            }
        });
        $('#CommentEntry').blur(function () {
            var val = $.trim($('#CommentEntry').val());
            if(val == '')
                $('#CommentEntry').val(textAreaDefaultTxt);
        });

        $("#CommentEntry").keyup(function() {

            updateCommentCount();

        });
        
        function getCurrentVoteCount(commentID) {
            return parseInt($('#vote-wrap-' + commentID + ' .votecount').html());
        }
        function setVoteCount(commentID, value) {
            $('#vote-wrap-' + commentID + ' .votecount').html(value);
        }

        function clearVisualVote(commentID) {

            var voteCount = getCurrentVoteCount(commentID);
            
            if($('#vote-wrap-' + commentID + ' .downvote').hasClass("downchosen")) {
                voteCount++;
                $('#vote-wrap-' + commentID + ' .downvote').removeClass("downchosen");
            }
            if($('#vote-wrap-' + commentID + ' .upvote').hasClass("upchosen")) {
                voteCount--;
                $('#vote-wrap-' + commentID + ' .upvote').removeClass("upchosen");
            }
            setVoteCount(commentID, voteCount);
        }
        function showUpVoted(commentID) {
            clearVisualVote(commentID);
            $('#vote-wrap-' + commentID + ' .upvote').addClass("upchosen");

            setVoteCount(commentID, getCurrentVoteCount(commentID) + 1);
        }
        function showDownVoted(commentID) {
            clearVisualVote(commentID);
            $('#vote-wrap-' + commentID + ' .downvote').addClass("downchosen");
            
            setVoteCount(commentID, getCurrentVoteCount(commentID) - 1);
        }

        function commentVote(upVote, commentID) {

            $.ajax({
                url: 'https://www.scirra.com/handlers/fresh/comments/VoteComment.ashx?commentID=' + commentID + '&upvote=' + upVote,
                success: function(data) {

                    var alertClass = "cream";
                    var errorMessage = data;
                    var blockTooltip     = false;

                    if(data == 'NotLoggedIn') {
                        alertClass = "red";
                        errorMessage = "You are not currently logged in!";
                    }
                    else if(data == 'CantVoteOnOwnComment') {
                        alertClass = "red";
                        errorMessage = "You can't vote on your own comment!";
                    }
                    else if(data == 'VoteLocked') {
                        alertClass = "red";
                        errorMessage = "Your vote is now locked from changes.";
                    }
                    else if(data == 'VoteCancelled') {
                        blockTooltip = true;
                        clearVisualVote(commentID);
                    }
                    else if(data == 'NewUpvoteRecorded') {
                        blockTooltip = true;
                        showUpVoted(commentID);
                    }
                    else if(data == 'NewDownvoteRecorded') {
                        blockTooltip = true;
                        showDownVoted(commentID);
                    }
                    else if(data == 'VoteChangedToUpvote') {
                        blockTooltip = true;
                        showUpVoted(commentID);
                    }
                    else if(data == 'VoteChangedToDownvote') {
                        blockTooltip = true;
                        showDownVoted(commentID);
                    }
                    
                    if(!blockTooltip) {
                        $('#vote-wrap-' + commentID).qtip(
                        {
                            content: errorMessage, // Give it some content
                            position: {
                                corner: {
                                    target: 'topMiddle',
                                    tooltip: 'bottomLeft'
                                }
                            },
                            hide: {
                                fixed: true // Make it fixed so it can be hovered over
                            },
                            show: {
                                ready: true,
                                solo: true
                            },
                            style: {
                                padding: '5px 15px',
                                name: alertClass,
                                width: {
                                    max: 280
                                },
                                style: { border: { radius: 3 } }
                            }
                        });
                    }
                }
            });

        }
        
        function cancelCommentEdit(commentID) {
            $('#comment' + commentID + " .body").show();
            $('#comment' + commentID + ' .comment-edit-wrap').hide();
        }
        
        function editComment(commentID) {

            var commentText = htmlCommentToCommentCode($('#comment' + commentID + " .body").html());

            $('#comment' + commentID + ' .comment-edit-wrap').html('<div class="edit-comment-wrap" id="edit-comment-wrap-' + commentID + '"><textarea id="comment-edited-text-' + commentID + '">' + commentText + '</textarea><div class="edit-comment-buttons"><button class="l" onclick="cancelCommentEdit(' + commentID + ');return false;">Cancel</button><button class="r" onclick="saveCommentEdits(' + commentID +');return false;">Save Changes</button></div><div class="clear"></div></div>');
            $('#comment' + commentID + " .body").hide();
            $('#comment' + commentID + ' .comment-edit-wrap').show();
            
            // Hide control panel, not needed
            $('#comment' + commentID + ' .comment-cp').slideUp('fast');

            $('#comment-edited-text-' + commentID).focus();
        }
        
        function updateCommentCount() {
            var len = $('#CommentEntry').val().length;
            var remaining = maxLength - len;
            
            if(remaining < 0 && !$('#char-count').hasClass("red")) {
                $('#char-count').addClass("red");
            }
            else if(remaining >= 0 && $('#char-count').hasClass("red")) {
                $('#char-count').removeClass("red");
            }

            $('#char-count').html(remaining);
        }

        function initCP() {
            
            $('.actual-comment').bind('mouseenter', function() {
                if (currentUserID != 0) {

                    if (!$(this).find('.comment-edit-wrap').is(':visible')) {
                        $(this).find('.comment-cp').slideDown('fast');
                    }
                }
            });
            $('.actual-comment').bind('mouseleave', function() {
                $(this).find('.comment-cp').slideUp('fast');
            });
            
        }

        function undoCommentDelete(commentID) {

            $.ajax({
                url: 'https://www.scirra.com/handlers/fresh/comments/DeleteComment.ashx?commentID=' + commentID + '&undelete=1',
                success: function(data) {
                    $('#deleted-comment-notice-' + commentID).remove();
                    $('#comment' + commentID).show();
                }
            });

        }

        function deleteComment(commentID) {
            
            
            $.ajax({
                url: 'https://www.scirra.com/handlers/fresh/comments/DeleteComment.ashx?commentID=' + commentID,
                success: function(data) {
                    if(data == "error") {

                        $('#comment' + commentID).html('<div class="comment-error-wrap">This following comment could not be deleted!  Either you do not have permission, or 10 minutes have expired since you posted this comment and it is now locked from deletes.</div>' + $('#comment' + commentID).html());
                        $('#comment' + commentID).show();

                    } else {
                        $('#comment' + commentID).fadeOut('fast');
                        $('#comment' + commentID).parent().prepend('<div id="deleted-comment-notice-' + commentID + '" class="comment-wrap comment-error-wrap">Comment has been deleted! <a href="javascript:void(0);" onclick="undoCommentDelete(' + commentID + ');return false;">Undo delete</a></div>');
                    }
                }
            });

            
        }

        function showError(message) {
            $('#ErrorBox-JS').html(message);
            $('#ErrorBox-JS').show();
            $("#CommentEntry").removeAttr('disabled');
            $('#PublishCommentButton').removeAttr('disabled');
            $("#CommentEntry").focus();
        }

        // Turn comment HTML into code for editing/quoting etc
        function htmlCommentToCommentCode(comment) {
            comment = $.trim(comment);

            // Self references
            comment = comment.replace(/\<span class="self-reference"\>(.*?)\<\/span\>/gi,"@$1");

            // Anchors
            comment = comment.replace(/\<a(.*?)href="(.*?)"(.*?)>(.*?)<\/a>/gi,"$2");

            comment = comment.replace(/\<p\>\<\/p\>/g,"");
            comment = comment.replace(/\<\/p\>\<p\>/g,"\n\n");
            comment = comment.replace(/\<\/p\>/g,"");
            comment = comment.replace(/\<p\>/g,"");
            comment = comment.replace(/\<br\>/g,"\n");
            comment = comment.replace(/\<br\/\>/g,"\n");
            comment = comment.replace(/\<br \/\>/g,"\n");
            comment = comment.replace(/&lt;/g,"<");
            comment = comment.replace(/&gt;/g,">");
            comment = comment.replace(/&amp;/g,"&");
            
            while(comment.indexOf("\n\n\n") != -1) {
                comment = comment.replace("\n\n\n", "\n\n");
            }
            
            return comment;

        }

        function addQuote(comment, quotedUsername) {
            var commentToQuote = $.trim($(comment).parent().parent().find('.body').html());
            
            // Comment only works for 1 next, remove instances of other quotes
            commentToQuote = commentToQuote.replace(/<div class="quoted-text">.*?<\/div>/g,"<br /><br />");
            commentToQuote = commentToQuote.replace(/<\/div>/g,"");
            
            commentToQuote = htmlCommentToCommentCode(commentToQuote);

            // Max of two line breaks
            commentToQuote = $.trim(commentToQuote);

            if($('#CommentEntry').val()  == textAreaDefaultTxt)
                $('#CommentEntry').val('');
            $('#CommentEntry').val('[quote=' + quotedUsername + ']\n' + commentToQuote + '\n[/quote]\n\n' + $('#CommentEntry').val());
            $('#CommentEntry').focus();
            updateCommentCount();
            
            // Set cursor
            setCaretToPos(document.getElementById("CommentEntry"), $('#CommentEntry').val().length);
            
            // Scroll to bottom
            var tarea = $('#CommentEntry');
            tarea.scrollTop(
                tarea[0].scrollHeight - tarea.height()
            );
        }

        function setSelectionRange(input, selectionStart, selectionEnd) {
          if (input.setSelectionRange) {
            input.focus();
            input.setSelectionRange(selectionStart, selectionEnd);
          }
          else if (input.createTextRange) {
            var range = input.createTextRange();
            range.collapse(true);
            range.moveEnd('character', selectionEnd);
            range.moveStart('character', selectionStart);
            range.select();
          }
        }
        function setCaretToPos (input, pos) {
          setSelectionRange(input, pos, pos);
        }

        function showEditError(commentID, message) {
            $('#edit-comment-wrap-' + commentID + ' .comment-error-wrap').remove();
            $('#edit-comment-wrap-' + commentID).prepend('<div class="comment-error-wrap">' + message + '</div>');
            $('#edit-comment-wrap-' + commentID + ' .comment-error-wrap').show();

            $('#comment-edited-text-' + commentID).removeAttr("disabled");
            $('#edit-comment-wrap-' + commentID + " button").removeAttr("disabled");
            $('#comment-edited-text-' + commentID).focus();
        }

        function saveCommentEdits(commentID) {

            var comment = $.trim($('#comment-edited-text-' + commentID).val());

            // Prevent resubmits
            $('#comment-edited-text-' + commentID).attr("disabled", "disabled");
            $('#edit-comment-wrap-' + commentID + " button").attr("disabled", "disabled");
            
            if(comment.length < minLength)
                showEditError(commentID, "Comment must be at least " + minLength + " characters long!");
            else if(comment.length > maxLength)
                showEditError(commentID, "Comment can't be over " + maxLength + " characters long!");
            else {
                
                var data = "comment=" + encodeURIComponent(comment) + "&commentID=" + commentID;
                // Attempt ajax post
                $.ajax({
                    type: 'POST',
                    url: 'https://www.scirra.com/handlers/fresh/comments/UpdateComment.ashx',
                    data: data
                })
                .success(function(response) {

                    // 0 returns if failed
                    if (response != "0") {
                            
                        $('#comment' + commentID + ' .body').html('<p>' + response + '</p>');
                        $('#comment' + commentID + ' .comment-edit-wrap').hide();
                        highlightSelfReferences();
                        $('#comment' + commentID + " .body").slideDown('fast');

                    } else
                        showEditError(commentID, "Oops!  Something went wrong.  :(  Please contact support if it persists!");

                })
                .error(function() {
                    showEditError(commentID, "Oops!  Something went wrong on the server!  Please try again or email support.");
                });
            }
        }

        // Attempt to post the comment
        function postComment() {

            var comment = $.trim($('#CommentEntry').val());
            var blockRedirect = false;
            if(comment == textAreaDefaultTxt) {
               comment = "";
               $('#CommentEntry').val('');
            }
            
            // Prevent multiple post requests
            $("#CommentEntry").attr("disabled", "disabled");
            $('#PublishCommentButton').attr("disabled", "disabled");
            
            if(comment.length < minLength)
                showError("Your comment must be at least " + minLength + " characters long!");
            else if(comment.length > maxLength)
                showError("Your comment can't be over " + maxLength + " characters long!");
            else {

                var data = "comment=" + encodeURIComponent(comment) + "&anchor=" + anchor;

                // Attempt ajax post
                $.ajax({
                  type: 'POST',
                  url: 'https://www.scirra.com/handlers/fresh/comments/PostComment.ashx',
                  data: data
                })
                .success(function(response) {

                    if(response == "Posted") {
                        window.location.href = "?action=lastpage&t=" + Date.now() + "#lastcomment";
                        blockRedirect = true;
                    }
                    else if(response == "CommentNoLongEnough") {
                        showError("Your comment is not long enough!");
                    }
                    else if(response == "FloodControlExceeded") {
                        showError("You're attempting to post comments too quickly!  Please wait a little while and try again.");
                    }
                    else if(response == "BannedAccount") {
                        showError("Your account is banned, please contact support if this is a mistake!");
                    }
                    else if(response == "SpamDetected") {
                        showError("Our spam robots have told us they think this comment is possible spam!  Please do not attempt to resubmit this comment or you may be banned!  If you are not a spammer, please email support@scirra.com and request to be whitelisted.");
                    }
                    else if(response == "SpamDetectedAndBanned") {
                        showError("Uh oh :(  Your comment looks like spam and we've temporarially suspended your account.  If this is an error, please contact support@scirra.com and we'll apologise profusely and unban you straight away!");
                    }
                    else if(response == "SpamDetected") {
                        showError("Our spam robots have told us they think this comment is possible spam!  Please do not attempt to resubmit this comment or you may be banned!  If you are not a spammer, please contact us and request to be whitelisted.");
                    }
                    else
                        showError("Oops!  Something went wrong.  :(  Please contact support if it persists!");

                })
                .error(function() {
                    showError("Oops!  Something went wrong!  Please try again or email support.");
                })
                .complete(function () {
                    if(!blockRedirect) {
                        $("#CommentEntry").removeAttr('disabled');
                        $('#PublishCommentButton').removeAttr('disabled');
                    }
                });
            }

        }
        
        function htmlEncode(value){
          return $('<div/>').text(value).html();
        }

        function htmlDecode(value){
          return $('<div/>').html(value).text();
        }

        function changeCommentPage(newPage) {
        
            if(newPage != currentPage && newPage > 0 && newPage <= totalPages) {

                $('#ReportedComment').hide();
                $('.comment-error-wrap').hide();

                var commentsFetched = false;

                //var delayAmount = 0;
                $.each($('#all-comments-wrap .actual-comment'), function(index, value) {
                    //delayAmount += 30;
                    //$(this).delay(delayAmount).slideUp('fast');
                    $(this).hide();
                });
                
                var jqxhr = $.getJSON("https://www.scirra.com/handlers/fresh/comments/GetComments.ashx?anchor=" + anchor + "&page=" + newPage + "&avatarSize=" + avatarSize + "&commentsPerPage=" + commentsPerPage, function(json) {

                    commentsFetched = true;
                    var template = $('#comment-template').html();
                    var allNewComments = "";
                    
                    $.each(json.comments, function(i,item){

                    var newComment = template;


                        // Get correct class for placed votes
                        var downvoteCSSClass = "downvote";
                        var upvoteCSSClass = "upvote";
                        var usersCommentVote = parseInt(item.currentUserVote);
                        if(usersCommentVote == -1)
                            downvoteCSSClass += " downchosen";
                        else if(usersCommentVote == 1)
                            upvoteCSSClass += " upchosen";

                        var canDelete = item.canDelete;
                        var canEdit = item.canEdit;
                        
                        if(!canEdit || !canDelete) {
                            var temp = $(newComment);
                            if(!canEdit)
                                temp.find(".edit").remove();
                            if(!canDelete)
                                temp.find(".delete").remove();
                            newComment = $('<div>').append(temp.clone()).remove().html();
                        }
                        
                        

                        newComment = newComment.replace(/#upvoteclass/gi, upvoteCSSClass);
                        newComment = newComment.replace(/#downvoteclass/gi, downvoteCSSClass);

                        newComment = newComment.replace(/#baseURL/gi, baseHREF + "blog/76/how-to-write-low-garbage-real-time-javascript");
                        newComment = newComment.replace(/#rep/gi, item.formattedRep);
                        newComment = newComment.replace(/#currentcommentpage/gi, newPage);
                        newComment = newComment.replace(/#currentvotecount/gi, item.currentVoteCount);
                        newComment = newComment.replace(/#authorUsername/gi, item.username);
                        newComment = newComment.replace(/#IDOfComment/gi, item.commentID);
                        newComment = newComment.replace(/#avatar/gi, "<a href=\"" + baseHREF + "users/" + item.SEOusername + "\"><img class=\"avatar\" src=\"" + item.avatar + "\" width=\"" + avatarSize + "\" height=\"" + avatarSize + "\" /></a>");
                        newComment = newComment.replace(/#authorlink/gi, "<a href=\"" + baseHREF + "users/" + item.SEOusername + "\" class=\"author-link\">" + item.username + "</a>");

                        var isEarlyAdopter = item.EarlyAdopter == "True";
                        var isStandardLicenseHolder = item.StandardHolder == "True";
                        if(isStandardLicenseHolder) {
                            newComment = newComment.replace(/#badgelink/gi, "<a id=\"STDBadge\" class=\"s stand-badge\" href=\"" + baseHREF + "store\"></a>");
                        }
                        else if(isEarlyAdopter) {
                            newComment = newComment.replace(/#badgelink/gi, "<a id=\"EABadge\" class=\"s earlyadop-badge\" href=\"" + baseHREF + "store\"></a>");
                        } else {
                            newComment = newComment.replace(/#badgelink/gi, "");
                        }
                        
                        
                        var decodedComment = htmlDecode(item.comment);
                        decodedComment = decodedComment.replace(/%5c/gi, "\\");
                        
                        newComment = newComment.replace(/#comment/gi, ("<p>" + decodedComment + "</p>").replace("<p></p>",""));
                        newComment = newComment.replace(/#timeago/gi, "<abbr class=\"timeago\" title=\"" + item.postDate + "\">" + item.alternativePostDate + "</abbr>");
                        
                        allNewComments += newComment;
                    });
                    
                    
                    
                    $('#all-comments-wrap').html(allNewComments + $('#all-comments-wrap').html());
                    jQuery("abbr.timeago").timeago();
                    highlightSelfReferences();
                    initCP();
                });
                
                if(newPage == totalPages) {
                    $('#next').hide();
                }else {
                    $('#next').show();
                }
                
                if(newPage == 1) {
                    $('#prev').hide();
                }else {
                    $('#prev').show();
                }

                // Select correct page
                $('#comment-pagelink-' + currentPage).removeClass("selected");
                currentPage = newPage;
                $('#comment-pagelink-' + currentPage).addClass("selected");

                
                
                
                history.pushState(null, document.title, "?page=" + currentPage);
                
                

            }
        }
    </script>

    
    
    <script>
        // Site notification
        $(document).ready(function () {
            var isMobile = /(iphone|ipod|ipad|android|blackberry|bb10|playbook|palm|symbian|nokia|windows\s+ce|phone|mobile|tablet)/i.test(navigator.userAgent);
            if (!isMobile)
                $('#sitewide-notice').slideDown("slow");
        });
        function remSiteNotice(noticeID) {
            $('#sitewide-notice').slideUp("fast");
            var today = new Date();
            var expire = new Date();
            expire.setTime(today.getTime() + 3600000 * 24 * 120);
            document.cookie = "ln=" + noticeID + ";expires=" + expire.toGMTString();
        }
    </script>
    

    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-21804850-2']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        function plusone_callback(response) {
            $.ajax({
                url: RelPath + "handlers/gp1.ashx?o=" + response.state + "&u=" + response.href,
                context: document.body,
                success: function () {

                }
            });
        }




    </script>

    </form>

<div>
<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script src="../js/clearly.js"></script>
<script>
var html = window.__getMyClearlyResults().html;
$("html").html(html);
$("body").append('<link type="text/css" href="../css/article.css">')</script>
</div></body>
</html>