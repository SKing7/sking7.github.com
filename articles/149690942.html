<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>基于用户投票的排名算法：牛顿冷却定律 - 博客 - 伯乐在线</title>
<link rel="stylesheet" href="../css/article.css" />
</head>
<body>
<div class="m-content">
<h1>基于用户投票的排名算法：牛顿冷却定律 - 博客 - 伯乐在线</h1>
<div><p>来源：<a href="http://www.ruanyifeng.com/blog/2012/03/ranking_algorithm_newton_s_law_of_cooling.html" rel="nofollow" target="_blank">阮一峰</a></p><p>这个系列的前三篇，介绍了<a href="http://blog.jobbole.com/15713/">Hacker News</a>，<a href="http://blog.jobbole.com/15727/">Reddit</a>和<a href="http://blog.jobbole.com/16146/">Stack Overflow</a>的排名算法。</p><p>今天，讨论一个更一般的数学模型。</p><p>这个系列的每篇文章，都是可以分开读的。但是，为了保证所有人都在同一页上，我再说一下，到目前为止，<strong>我们用不同方法，企图解决的都是同一个问题：根据用户的投票，决定最近一段时间内的”热文排名”。<span id="more-16327"></span></strong></p><p>你可能会觉得，这是一个全新的课题，伴随着互联网而产生，需要全新的方法来解决。但是，实际上不是。我们可以把”热文排名”想象成一个”自然冷却”的过程：</p><p>（1）任一时刻，网站中所有的文章，都有一个”当前温度”，温度最高的文章就排在第一位。</p><p>（2）如果一个用户对某篇文章投了赞成票，该文章的温度就上升一度。</p><p>（3）随着时间流逝，所有文章的温度都逐渐”冷却”。</p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling1.jpg" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling1.jpg" alt="基于用户投票的排名算法：牛顿冷却定律 " width="500" height="333" /></a></p><p>这样假设的意义，在于我们可以照搬物理学的冷却定律，使用现成的公式，建立”温度”与”时间”之间的函数关系，轻松构建一个<a href="http://en.wikipedia.org/wiki/Exponential_decay" target="_blank">“指数式衰减”</a>（Exponential decay）的过程。</p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling2.png" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling2.png" alt="基于用户投票的排名算法：牛顿冷却定律 " width="400" height="250" /></a></p><p>伟大的物理学家牛顿，早在17世纪就提出了温度冷却的数学公式，被后人称作<a href="http://episte.math.ntu.edu.tw/applications/ap_cooling/index.html" target="_blank">“牛顿冷却定律”</a>（Newton’s Law of Cooling）。我们就用这个定律构建排名算法。</p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling3.jpg" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling3.jpg" alt="基于用户投票的排名算法：牛顿冷却定律 " width="350" height="421" /></a></p><p>“牛顿冷却定律”非常简单，用一句话就可以概况：</p><p><span><strong>物体的冷却速度，与其当前温度与室温之间的温差成正比。</strong></span></p><p>写成数学公式就是：</p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling4.png" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling4.png" alt="基于用户投票的排名算法：牛顿冷却定律 " width="481" height="60" /></a></p><p>其中，</p><p><span>- T(t)是温度（T）的时间（t）函数。微积分知识告诉我们，温度变化（冷却）的速率就是温度函数的导数T’(t)。</span></p><p><span>- H代表室温，T(t)-H就是当前温度与室温之间的温差。由于当前温度高于室温，所以这是一个正值。</span></p><p><span>- 常数α（α&gt;0）表示室温与降温速率之间的比例关系。前面的负号表示降温。不同的物质有不同的α值。</span></p><p>这是一个微分方程，为了计算当前温度，需要求出T(t)的函数表达式。</p><p>第一步，改写方程，然后等式两边取积分。</p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling5.png" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling5.png" alt="基于用户投票的排名算法：牛顿冷却定律 " width="194" height="80" /></a></p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling6.png" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling6.png" alt="基于用户投票的排名算法：牛顿冷却定律 " width="353" height="80" /></a></p><p>第二步，求出这个积分的解（c为常数项）。</p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling7.png" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling7.png" alt="基于用户投票的排名算法：牛顿冷却定律 " width="377" height="40" /></a></p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling8.png" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling8.png" alt="基于用户投票的排名算法：牛顿冷却定律 " width="257" height="40" /></a></p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling9.png" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling9.png" alt="基于用户投票的排名算法：牛顿冷却定律 " width="293" height="40" /></a></p><p>第三步，假定在时刻t<sub>0</sub>，该物体的温度是T(t<sub>0</sub>)，简写为T<sub>0</sub>。代入上面的方程，得到</p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling11.png" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling11.png" alt="基于用户投票的排名算法：牛顿冷却定律 " width="296" height="40" /></a></p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling12.png" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling12.png" alt="基于用户投票的排名算法：牛顿冷却定律 " width="282" height="40" /></a></p><p>第四步，将上一步的C代入第二步的方程。</p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling13.png" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling13.png" alt="基于用户投票的排名算法：牛顿冷却定律 " width="350" height="40" /></a></p><p>假定室温H为0度，即所有物体最终都会”冷寂”，方程就可以简化为</p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling14.png" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling14.png" alt="基于用户投票的排名算法：牛顿冷却定律 " width="217" height="40" /></a></p><p>上面这个方程，就是我们想要的最终结果：</p><p><span><strong>本期温度 = 上一期温度 x exp(-(冷却系数) x 间隔的小时数)</strong></span></p><p>将这个公式用在”排名算法”，就相当于（假定本期没有增加净赞成票）</p><p><span><strong>本期得分 = 上一期得分 x exp(-(冷却系数) x 间隔的小时数)</strong></span></p><p>其中，”冷却系数”是一个你自己决定的值。如果假定一篇新文章的初始分数是100分，24小时之后”冷却”为1分，那么可以计算得到”冷却系数”约等于0.192。如果你想放慢”热文排名”的更新率，”冷却系数”就取一个较小的值，否则就取一个较大的值。</p><p><a href="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling16.jpg" rel="lightbox[16327]" title="基于用户投票的排名算法：牛顿冷却定律 "><img title="基于用户投票的排名算法：牛顿冷却定律 " src="http://cdn2.jobbole.com/2012/03/Newtons-law-of-cooling16.jpg" alt="基于用户投票的排名算法：牛顿冷却定律 " width="600" height="299" /></a></p><p>[参考文献]</p><p>*　<a href="http://www.evanmiller.org/rank-hotness-with-newtons-law-of-cooling.html" target="_blank">Rank Hotness With Newton’s Law of Cooling</a></p><p>（完）</p><br /></div></div>
<script>var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34802167-1']); _gaq.push(['_setDomainName', 'liuzhe.co']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })();</script></body>
</html>