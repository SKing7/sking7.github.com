<!DOCTYPE html>
<html b:version='2' class='v2' dir='ltr' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
<meta content='IE=EmulateIE7' http-equiv='X-UA-Compatible'/>
<meta content='width=1100' name='viewport'/>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<script type="text/javascript">(function() { var b=window,e="jstiming",g="tick";(function(){function d(a){this.t={};this.tick=function(a,d,c){c=void 0!=c?c:(new Date).getTime();this.t[a]=[c,d]};this[g]("start",null,a)}var a=new d;b.jstiming={Timer:d,load:a};if(b.performance&&b.performance.timing){var a=b.performance.timing,c=b[e].load,f=a.navigationStart,a=a.responseStart;0<f&&a>=f&&(c[g]("_wtsrt",void 0,f),c[g]("wtsrt_","_wtsrt",a),c[g]("tbsd_","wtsrt_"))}try{a=null,b.chrome&&b.chrome.csi&&(a=Math.floor(b.chrome.csi().pageT),c&&0<f&&(c[g]("_tbnd",void 0,b.chrome.csi().startE),
c[g]("tbnd_","_tbnd",f))),null==a&&b.gtbExternal&&(a=b.gtbExternal.pageT()),null==a&&b.external&&(a=b.external.pageT,c&&0<f&&(c[g]("_tbnd",void 0,b.external.startE),c[g]("tbnd_","_tbnd",f))),a&&(b[e].pt=a)}catch(l){}})();b.tickAboveFold=function(d){var a=0;if(d.offsetParent){do a+=d.offsetTop;while(d=d.offsetParent)}d=a;750>=d&&b[e].load[g]("aft")};var h=!1;function k(){h||(h=!0,b[e].load[g]("firstScrollTime"))}b.addEventListener?b.addEventListener("scroll",k,!1):b.attachEvent("onscroll",k);
 })();</script>
<meta content='blogger' name='generator'/>
<link href='http://www.2ality.com/favicon.ico' rel='icon' type='image/x-icon'/>
<link href='http://www.2ality.com/2013/09/data-in-prototypes.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="&#9313;ality &#8211; JavaScript and more - Atom" href="http://www.2ality.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="&#9313;ality &#8211; JavaScript and more - RSS" href="http://www.2ality.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="&#9313;ality &#8211; JavaScript and more - Atom" href="http://www.blogger.com/feeds/8100407163665430627/posts/default" />

<link rel="alternate" type="application/atom+xml" title="&#9313;ality &#8211; JavaScript and more - Atom" href="http://www.2ality.com/feeds/8511104266896154828/comments/default" />
<!--[if IE]><script type="text/javascript" src="//www.blogger.com/static/v1/jsbin/4163410827-ieretrofit.js"></script>
<![endif]-->
<link href='https://plus.google.com/110516491705475800224' rel='publisher'/>
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<title>Data in prototype properties</title>
<link type='text/css' rel='stylesheet' href='//www.blogger.com/static/v1/widgets/2220499320-widget_css_2_bundle.css' />
<link type='text/css' rel='stylesheet' href='//www.blogger.com/dyn-css/authorization.css?targetBlogID=8100407163665430627&amp;zx=6a3eb204-f6eb-4f28-ba82-667ef4519192&quot;/&gt;
' />
<style id='page-skin-1' type='text/css'><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Watermark
Designer: Josh Peterson
URL:      www.noaesthetic.com
----------------------------------------------- */
/* Variable definitions
====================
<Variable name="keycolor" description="Main Color" type="color" default="#c0a154"/>
<Group description="Page Text" selector="body">
<Variable name="body.font" description="Font" type="font"
default="normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="body.text.color" description="Text Color" type="color" default="#333333"/>
</Group>
<Group description="Backgrounds" selector=".main-inner">
<Variable name="body.background.color" description="Outer Background" type="color" default="#c0a154"/>
<Variable name="footer.background.color" description="Footer Background" type="color" default="transparent"/>
</Group>
<Group description="Links" selector=".main-inner">
<Variable name="link.color" description="Link Color" type="color" default="#cc3300"/>
<Variable name="link.visited.color" description="Visited Color" type="color" default="#993322"/>
<Variable name="link.hover.color" description="Hover Color" type="color" default="#ff3300"/>
</Group>
<Group description="Blog Title" selector=".header h1">
<Variable name="header.font" description="Title Font" type="font"
default="normal normal 60px Georgia, Utopia, 'Palatino Linotype', Palatino, serif"/>
<Variable name="header.text.color" description="Title Color" type="color" default="#ffffff" />
</Group>
<Group description="Blog Description" selector=".header .description">
<Variable name="description.text.color" description="Description Color" type="color"
default="#997755" />
</Group>
<Group description="Tabs Text" selector=".tabs-inner .widget li a">
<Variable name="tabs.font" description="Font" type="font"
default="normal normal 20px Georgia, Utopia, 'Palatino Linotype', Palatino, serif"/>
<Variable name="tabs.text.color" description="Text Color" type="color" default="#cc3300"/>
<Variable name="tabs.selected.text.color" description="Selected Color" type="color" default="#000000"/>
</Group>
<Group description="Tabs Background" selector=".tabs-outer .PageList">
<Variable name="tabs.background.color" description="Background Color" type="color" default="transparent"/>
<Variable name="tabs.separator.color" description="Separator Color" type="color" default="#c0a154"/>
</Group>
<Group description="Date Header" selector="h2.date-header">
<Variable name="date.font" description="Font" type="font"
default="normal normal 16px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="date.text.color" description="Text Color" type="color" default="#997755"/>
</Group>
<Group description="Post" selector="h3.post-title, .comments h4">
<Variable name="post.title.font" description="Title Font" type="font"
default="normal normal 30px Georgia, Utopia, 'Palatino Linotype', Palatino, serif"/>
<Variable name="post.background.color" description="Background Color" type="color" default="transparent"/>
<Variable name="post.border.color" description="Border Color" type="color" default="#ccbb99" />
</Group>
<Group description="Post Footer" selector=".post-footer">
<Variable name="post.footer.text.color" description="Text Color" type="color" default="#997755"/>
</Group>
<Group description="Gadgets" selector="h2">
<Variable name="widget.title.font" description="Title Font" type="font"
default="normal normal 20px Georgia, Utopia, 'Palatino Linotype', Palatino, serif"/>
<Variable name="widget.title.text.color" description="Title Color" type="color" default="#000000"/>
<Variable name="widget.alternate.text.color" description="Alternate Color" type="color" default="#777777"/>
</Group>
<Group description="Footer" selector=".footer-inner">
<Variable name="footer.text.color" description="Text Color" type="color" default="#333333"/>
<Variable name="footer.widget.title.text.color" description="Gadget Title Color" type="color" default="#000000"/>
</Group>
<Group description="Footer Links" selector=".footer-inner">
<Variable name="footer.link.color" description="Link Color" type="color" default="#cc3300"/>
<Variable name="footer.link.visited.color" description="Visited Color" type="color" default="#993322"/>
<Variable name="footer.link.hover.color" description="Hover Color" type="color" default="#ff3300"/>
</Group>
<Variable name="body.background" description="Body Background" type="background"
color="#c0a154" default="$(color) url(http://www.blogblog.com/1kt/watermark/body_background_birds.png) repeat scroll top left"/>
<Variable name="body.background.overlay" description="Overlay Background" type="background" color="#c0a154"
default="transparent url(http://www.blogblog.com/1kt/watermark/body_overlay_birds.png) no-repeat scroll top right"/>
<Variable name="body.background.overlay.height" description="Overlay Background Height" type="length" default="121px"/>
<Variable name="tabs.background.inner" description="Tabs Background Inner" type="url" default="none"/>
<Variable name="tabs.background.outer" description="Tabs Background Outer" type="url" default="none"/>
<Variable name="tabs.border.size" description="Tabs Border Size" type="length" default="0"/>
<Variable name="tabs.shadow.spread" description="Tabs Shadow Spread" type="length" default="0"/>
<Variable name="main.padding.top" description="Main Padding Top" type="length" default="30px"/>
<Variable name="main.cap.height" description="Main Cap Height" type="length" default="0"/>
<Variable name="main.cap.image" description="Main Cap Image" type="url" default="none"/>
<Variable name="main.cap.overlay" description="Main Cap Overlay" type="url" default="none"/>
<Variable name="main.background" description="Main Background" type="background"
default="transparent none no-repeat scroll top left"/>
<Variable name="post.background.url" description="Post Background URL" type="url"
default="url(http://www.blogblog.com/1kt/watermark/post_background_birds.png)"/>
<Variable name="post.border.size" description="Post Border Size" type="length" default="1px"/>
<Variable name="post.border.style" description="Post Border Style" type="string" default="dotted"/>
<Variable name="post.shadow.spread" description="Post Shadow Spread" type="length" default="0"/>
<Variable name="footer.background" description="Footer Background" type="background"
color="#330000" default="$(color) url(http://www.blogblog.com/1kt/watermark/body_background_navigator.png) repeat scroll top left"/>
<Variable name="startSide" description="Side where text starts in blog language" type="automatic" default="left"/>
<Variable name="endSide" description="Side where text ends in blog language" type="automatic" default="right"/>
*/
/* Use this with templates/1ktemplate-*.html */
/* Content
----------------------------------------------- */
body, .body-fauxcolumn-outer {
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #333333;
background: #c0a154 url(http://www.blogblog.com/1kt/watermark/body_background_birds.png) repeat scroll top left;
}
html body .content-outer {
min-width: 0;
max-width: 100%;
width: 100%;
}
.content-outer {
font-size: 92%;
}
a:link {
text-decoration:none;
color: #cc3300;
}
a:visited {
text-decoration:none;
color: #993322;
}
a:hover {
text-decoration:underline;
color: #ff3300;
}
.body-fauxcolumns .cap-top {
margin-top: 30px;
background: transparent url(http://www.blogblog.com/1kt/watermark/body_overlay_birds.png) no-repeat scroll top right;
height: 121px;
}
.content-inner {
padding: 0;
}
/* Header
----------------------------------------------- */
.header-inner .Header .titlewrapper,
.header-inner .Header .descriptionwrapper {
padding-left: 20px;
padding-right: 20px;
}
.Header h1 {
font: normal normal 60px Georgia, Utopia, 'Palatino Linotype', Palatino, serif;
color: #ffffff;
text-shadow: 2px 2px rgba(0, 0, 0, .1);
}
.Header h1 a {
color: #ffffff;
}
.Header .description {
font-size: 140%;
color: #997755;
}
/* Tabs
----------------------------------------------- */
.tabs-inner .section {
margin: 0 20px;
}
.tabs-inner .PageList, .tabs-inner .LinkList, .tabs-inner .Labels {
margin-left: -11px;
margin-right: -11px;
background-color: transparent;
border-top: 0 solid #ffffff;
border-bottom: 0 solid #ffffff;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .3);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .3);
-goog-ms-box-shadow: 0 0 0 rgba(0, 0, 0, .3);
box-shadow: 0 0 0 rgba(0, 0, 0, .3);
}
.tabs-inner .PageList .widget-content,
.tabs-inner .LinkList .widget-content,
.tabs-inner .Labels .widget-content {
margin: -3px -11px;
background: transparent none  no-repeat scroll right;
}
.tabs-inner .widget ul {
padding: 2px 25px;
max-height: 34px;
background: transparent none no-repeat scroll left;
}
.tabs-inner .widget li {
border: none;
}
.tabs-inner .widget li a {
display: inline-block;
padding: .25em 1em;
font: normal normal 20px Georgia, Utopia, 'Palatino Linotype', Palatino, serif;
color: #cc3300;
border-right: 1px solid #c0a154;
}
.tabs-inner .widget li:first-child a {
border-left: 1px solid #c0a154;
}
.tabs-inner .widget li.selected a, .tabs-inner .widget li a:hover {
color: #000000;
}
/* Headings
----------------------------------------------- */
h2 {
font: normal normal 20px Georgia, Utopia, 'Palatino Linotype', Palatino, serif;
color: #000000;
margin: 0 0 .5em;
}
h2.date-header {
font: normal normal 16px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #997755;
}
/* Main
----------------------------------------------- */
.main-inner .column-center-inner,
.main-inner .column-left-inner,
.main-inner .column-right-inner {
padding: 0 5px;
}
.main-outer {
margin-top: 0;
background: transparent none no-repeat scroll top left;
}
.main-inner {
padding-top: 30px;
}
.main-cap-top {
position: relative;
}
.main-cap-top .cap-right {
position: absolute;
height: 0;
width: 100%;
bottom: 0;
background: transparent none repeat-x scroll bottom center;
}
.main-cap-top .cap-left {
position: absolute;
height: 245px;
width: 280px;
right: 0;
bottom: 0;
background: transparent none no-repeat scroll bottom left;
}
/* Posts
----------------------------------------------- */
.post-outer {
padding: 15px 20px;
margin: 0 0 25px;
background: transparent url(http://www.blogblog.com/1kt/watermark/post_background_birds.png) repeat scroll top left;
_background-image: none;
border: dotted 1px #ccbb99;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
-goog-ms-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
box-shadow: 0 0 0 rgba(0, 0, 0, .1);
}
h3.post-title {
font: normal normal 30px Georgia, Utopia, 'Palatino Linotype', Palatino, serif;
margin: 0;
}
.comments h4 {
font: normal normal 30px Georgia, Utopia, 'Palatino Linotype', Palatino, serif;
margin: 1em 0 0;
}
.post-body {
font-size: 105%;
line-height: 1.5;
position: relative;
}
.post-header {
margin: 0 0 1em;
color: #997755;
}
.post-footer {
margin: 10px 0 0;
padding: 10px 0 0;
color: #997755;
border-top: dashed 1px #777777;
}
#blog-pager {
font-size: 140%
}
#comments .comment-author {
padding-top: 1.5em;
border-top: dashed 1px #777777;
background-position: 0 1.5em;
}
#comments .comment-author:first-child {
padding-top: 0;
border-top: none;
}
.avatar-image-container {
margin: .2em 0 0;
}
/* Widgets
----------------------------------------------- */
.widget ul, .widget #ArchiveList ul.flat {
padding: 0;
list-style: none;
}
.widget ul li, .widget #ArchiveList ul.flat li {
padding: .35em 0;
text-indent: 0;
border-top: dashed 1px #777777;
}
.widget ul li:first-child, .widget #ArchiveList ul.flat li:first-child {
border-top: none;
}
.widget .post-body ul {
list-style: disc;
}
.widget .post-body ul li {
border: none;
}
.widget .zippy {
color: #777777;
}
.post-body img, .post-body .tr-caption-container, .Profile img, .Image img,
.BlogList .item-thumbnail img {
padding: 5px;
background: #fff;
-moz-box-shadow: 1px 1px 5px rgba(0, 0, 0, .5);
-webkit-box-shadow: 1px 1px 5px rgba(0, 0, 0, .5);
-goog-ms-box-shadow: 1px 1px 5px rgba(0, 0, 0, .5);
box-shadow: 1px 1px 5px rgba(0, 0, 0, .5);
}
.post-body img, .post-body .tr-caption-container {
padding: 8px;
}
.post-body .tr-caption-container {
color: #333333;
}
.post-body .tr-caption-container img {
padding: 0;
background: transparent;
border: none;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
-goog-ms-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
box-shadow: 0 0 0 rgba(0, 0, 0, .1);
}
/* Footer
----------------------------------------------- */
.footer-outer {
color:#ccbb99;
background: #330000 url(http://www.blogblog.com/1kt/watermark/body_background_navigator.png) repeat scroll top left;
}
.footer-outer a {
color: #ff7755;
}
.footer-outer a:visited {
color: #dd5533;
}
.footer-outer a:hover {
color: #ff9977;
}
.footer-outer .widget h2 {
color: #eeddbb;
}
/* Mobile
----------------------------------------------- */
html .mobile .mobile-date-outer {
border-bottom: none;
background: transparent url(http://www.blogblog.com/1kt/watermark/post_background_birds.png) repeat scroll top left;
_background-image: none;
margin-bottom: 10px;
}
.mobile .main-cap-top {
z-index: -1;
}
.mobile .content-outer {
font-size: 100%;
}
.mobile .post-outer {
padding: 10px;
}
.mobile .main-cap-top .cap-left {
background: transparent none no-repeat scroll bottom left;
}
.mobile .body-fauxcolumns .cap-top {
margin: 0;
}
.mobile-link-button {
background: transparent url(http://www.blogblog.com/1kt/watermark/post_background_birds.png) repeat scroll top left;
}
.mobile-link-button a:link, .mobile-link-button a:visited {
color: #cc3300;
}
.mobile-index-date .date-header {
color: #997755;
}
.mobile-index-contents {
color: #333333;
}

--></style>
<style id='template-skin-1' type='text/css'><!--
body {
min-width: 1000px;
}
.content-outer, .content-fauxcolumn-outer, .region-inner {
min-width: 1000px;
max-width: 1000px;
_width: 1000px;
}
.main-inner .columns {
padding-left: 180px;
padding-right: 180px;
}
.main-inner .fauxcolumn-center-outer {
left: 180px;
right: 180px;
/* IE6 does not respect left and right together */
_width: expression(this.parentNode.offsetWidth -
parseInt("180px") -
parseInt("180px") + 'px');
}
.main-inner .fauxcolumn-left-outer {
width: 180px;
}
.main-inner .fauxcolumn-right-outer {
width: 180px;
}
.main-inner .column-left-outer {
width: 180px;
right: 100%;
margin-left: -180px;
}
.main-inner .column-right-outer {
width: 180px;
margin-right: -180px;
}
#layout {
min-width: 0;
}
#layout .content-outer {
min-width: 0;
width: 800px;
}
#layout .region-inner {
min-width: 0;
width: auto;
}
--></style>
<!--BEGIN: rauschma-->
<!-- Must be valid XML! -->
<!--automatic attribution via Twitter bookmarklet-->
<link href='http://twitter.com/rauschma' rel='me'/>
<style>
@import "http://dl.2ality.com/prettify/prettify.css";

/****** Fix blogger CSS *****/

.entry-content h3 {
    margin-top: 1em;
    margin-bottom: 0.4em;
}
.entry-content h4 {
    margin-top: 0.5em;
    margin-bottom: 0.2em;
}
/* Normally, images inside a post have a shadow, padding and a white background. This class lets you switch that off. */
img.noshadow {
    padding: 0;

    background: transparent;
    border: none;

    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
}

/****** Improve CSS *****/

.entry-content li {
    margin-top: 0.5em;
}

/* prettify.js uses ol to number lines => no additional space */
ol.linenums li {
    margin-top: 0em;
}

/****** Tables *****/

td {
    vertical-align: text-top;
}
table.framed {
    border-collapse: collapse;
}
table.framed td {
    border: thin solid black;
    padding-top: 0.3em;
    padding-bottom: 0.3em;
    padding-left: 0.6em;
    padding-right: 0.6em;
}
table.framed td.right {
    text-align: right;
}
table.framed tr.doubleline {
    border-bottom: double;
}

/****** Counters for headings *****/
/* Avoid prefixed numbers via the class "nocount" */

    body {
        counter-reset: section;
    }
    h1 {
        counter-reset: section;
    }
    /* Class countheads switches on counting.
       It can be put on the first h3. */
    .countheads~h3:before, h3.countheads:before {
        content: counter(section) ".\0000a0\0000a0";
        counter-increment: section;
    }
    h3.nocount:before {
        content: none;
        counter-increment: none;
    }
    h3 {
        counter-reset: subsection;
    }
    .countheads~h4:before {
        content: counter(section) "." counter(subsection) ".\0000a0\0000a0";
        counter-increment: subsection;
    }
    h4.nocount:before {
        content: none;
        counter-increment: none;
    }

/****** References *****/

    li:target {
        background-color: #BFEFFF;
    }
    ol#references {
        list-style:none;
    	margin-left: 0;
    	padding-left: 1.8em;
    	text-indent: -1.8em;

        counter-reset: refcounter;
    }

    ol#references > li:before {
        content: "[" counter(refcounter) "] ";
        counter-increment: refcounter;
    }

/****** AdPacks.com *****/

    body .one .bsa_it_ad { background: transparent; border: none; font-family: inherit; padding: 0 15px 0 10px; margin: 0; text-align: right; }
    body .one .bsa_it_ad:hover img { -moz-box-shadow: 0 0 3px #000; -webkit-box-shadow: 0 0 3px #000; box-shadow: 0 0 3px #000; }
    body .one .bsa_it_ad .bsa_it_i { display: block; padding: 0; float: none; margin: 0 0 5px; }
    body .one .bsa_it_ad .bsa_it_i img { padding: 0; border: none; }
    body .one .bsa_it_ad .bsa_it_t { padding: 6px 0; }
    body .one .bsa_it_ad .bsa_it_d { padding: 0; font-size: 12px; color: #333; }
    body .one .bsa_it_p { display: none; }
    body #bsap_aplink, body #bsap_aplink:hover { display: block; font-size: 10px; margin: 12px 15px 0; text-align: right; }

</style>
<meta content='701060859' property='fb:admins'/>
<!-- Facebook (for FB Insights) -->
<!--END: rauschma-->
<script type="text/javascript">
if (window.jstiming) window.jstiming.load.tick('headEnd');
</script></head>
<body class='loading'>
<div class='navbar section' id='navbar'>
</div>
<div class='body-fauxcolumns'>
<div class='fauxcolumn-outer body-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content'>
<div class='content-fauxcolumns'>
<div class='fauxcolumn-outer content-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content-outer'>
<div class='content-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left content-fauxborder-left'>
<div class='fauxborder-right content-fauxborder-right'></div>
<div class='content-inner'>
<header>
<div class='header-outer'>
<div class='header-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left header-fauxborder-left'>
<div class='fauxborder-right header-fauxborder-right'></div>
<div class='region-inner header-inner'>
<div class='header section' id='header'><div class='widget Header' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<a href='http://www.2ality.com/'>&#9313;ality &#8211; JavaScript and more</a>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'><span>
</span></p>
</div>
</div>
</div></div>
</div>
</div>
<div class='header-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</header>
<div class='tabs-outer'>
<div class='tabs-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left tabs-fauxborder-left'>
<div class='fauxborder-right tabs-fauxborder-right'></div>
<div class='region-inner tabs-inner'>
<div class='tabs section' id='crosscol'><div class='widget PageList' id='PageList1'>
<h2>Pages</h2>
<div class='widget-content'>
<ul>
<li><a href='http://www.2ality.com/'>Home</a></li>
<li><a href='http://www.2ality.com/p/about.html'>About</a></li>
<li><a href='http://www.2ality.com/p/best.html'>Best of</a></li>
<li><a href='http://www.2ality.com/p/subscribe.html'>Subscribe</a></li>
<li><a href='http://www.2ality.com/p/advertise.html'>Advertise</a></li>
</ul>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=8100407163665430627&widgetType=PageList&widgetId=PageList1&action=editWidget&sectionId=crosscol' onclick='return _WidgetManager._PopupConfig(document.getElementById("PageList1"));' target='configPageList1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div></div>
<div class='tabs section' id='crosscol-overflow'><div class='widget HTML' id='HTML4'>
<div class='widget-content'>
Upcoming: my <a href="http://www.jsguide.org/">programmer&#8217;s guide to JavaScript</a> (free online).
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=8100407163665430627&widgetType=HTML&widgetId=HTML4&action=editWidget&sectionId=crosscol-overflow' onclick='return _WidgetManager._PopupConfig(document.getElementById("HTML4"));' target='configHTML4' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div></div>
</div>
</div>
<div class='tabs-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='main-outer'>
<div class='main-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left main-fauxborder-left'>
<div class='fauxborder-right main-fauxborder-right'></div>
<div class='region-inner main-inner'>
<div class='columns fauxcolumns'>
<div class='fauxcolumn-outer fauxcolumn-center-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-left-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-right-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<!-- corrects IE6 width calculation -->
<div class='columns-inner'>
<div class='column-center-outer'>
<div class='column-center-inner'>
<div class='main section' id='main'><div class='widget Blog' id='Blog1'>
<script src=''></script>
<div class='blog-posts hfeed'>
<!-- google_ad_section_start(name=default) -->

          <div class="date-outer">
        
<h2 class='date-header'><span>2013-09-10</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry'>
<a name='8511104266896154828'></a>
<h3 class='post-title entry-title'>
Data in prototype properties
</h3>
<div class='post-header'>
<div class='post-header-line-1'><span class='post-labels'>
Labels:
<a href='http://www.2ality.com/search/label/dev' rel='tag'>dev</a>,
<a href='http://www.2ality.com/search/label/javascript' rel='tag'>javascript</a>,
<a href='http://www.2ality.com/search/label/jslang' rel='tag'>jslang</a>
</span>
</div>
</div>
<div class='post-body entry-content'>
<b>Update 2013-09-14:</b> New sections 1.2, 2 and 3.
<p>
This blog post explains when you should and should not put data in prototype properties.

<a name='more'></a>

<h3 class="countheads">Avoid: prototype properties with initial values for instance properties</h3>

Prototypes contain properties that are shared by several objects. As such, they work well for methods. Additionally, with the technique shown below, you can also use them to provide initial values for instance properties. I&#8217;ll later explain why that is not recommended.
<p>
A constructor usually sets instance properties to initial values. If one such value is a default then you don&#8217;t need to create an instance property. You only need a prototype property with the same name whose value is the default. For example:
<pre>
    /**
     * Anti-pattern: don&#8217;t do this
     *
     * @param data an array with names
     */
    function Names(data) {
        if (data) {
            // There is a parameter
            // =&gt; create instance property
            this.data = data;
        }
    }
    Names.prototype.data = [];
</pre>

The parameter <tt>data</tt> is optional. If it is missing, the instance does not get a property <tt>data</tt>, but inherits <tt>Names.prototype.data</tt>, instead.
<p>
This approach mostly works: You can create an instance <tt>n</tt> of <tt>Names</tt>. Getting <tt>n.data</tt> reads <tt>Names.prototype.data</tt>. Setting <tt>n.data</tt> creates a new own property in <tt>n</tt> and preserves the shared default value in the prototype.
We only have a problem if we change the default value (instead of replacing it with a new value):
<pre>
    &gt; var n1 = new Names();
    &gt; var n2 = new Names();

    &gt; n1.data.push('jane'); // change default value
    &gt; n1.data
    [ 'jane' ]

    &gt; n2.data
    [ 'jane' ]
</pre>

Explanation: <tt>push()</tt> changed the array in <tt>Names.prototype.data</tt>. Since that array is shared by all instances without an own property <tt>data</tt>, <tt>n2.data</tt>&#8217;s initial value has changed, too.

<h4>Best practice: don&#8217;t share default values</h4>

Therefore, it is better to not share default values and to always create new ones:

<pre>
    function Names(data) {
        this.data = data || [];
    }
</pre>

Obviously, the problem of modifying a shared default value does not arise if that value is immutable (as all primitives <a class="ptr">[1]</a> are). But for consistency&#8217;s sake, it&#8217;s best to stick to a single way of setting up properties. I also prefer to maintain the usual separation of concerns <a class="ptr">[2]</a>: the constructor sets up the instance properties, the prototype contains the methods.
<p>
ECMAScript 6 will make this even more of a best practice, because constructor parameters can have default values and you can define prototype methods in class bodies, but not prototype properties with data.

<h4>Creating instance properties on demand</h4>

Occasionally, creating a property value is an expensive operation (computationally or storage-wise). Then you can create an instance poperty on demand:

<pre>
    function Names(data) {
        if (data) this.data = data;
    }
    Names.prototype = {
        constructor: Names,
        get data() {
            // Define, don&#8217;t assign <a class="ptr">[3]</a>
            // =&gt; ensures an own property is created
            Object.defineProperty(this, 'data', {
                value: [],
                enumerable: true
                // Default &#8211; configurable: false, writable: false
                // Set to true if property&#8217;s value must be changeable
            });
            return this.data;
        }
    };
</pre>
(As an aside, we have replaced the original object in <tt>Names.prototype</tt>, which is why we need to set up the property <tt>constructor</tt> <a class="ptr">[4]</a>.)
<p>
Obviously, that is quite a bit of work, so you have to be sure it is worth it.

<h3>Avoid non-polymorphic prototype properties</h3>

If the same property (same name, same semantics) exists in several prototypes, it is called <i>polymorphic</i>. Then the result of reading the property via an instance is dynamically determined via that instance&#8217;s prototype.
Prototype properties that are not used polymorphically can be replaced by variables (which better reflects their non-polymorphic use).
<p>
Example: You can store a constant in a prototype property and access it via <tt>this</tt>.
<pre>
    function Foo() {}
    Foo.prototype.FACTOR = 42;  // primitive value, immutable
    Foo.prototype.compute = function (x) {
        return x * this.FACTOR;
    };
</pre>

This constant is not polymorphic. Therefore, you can just as well access it via a variable:

<pre>
    // This code should be inside an IIFE <a class="ptr">[5]</a> or a module
    function Foo() {}
    var FACTOR = 42;  // primitive value, immutable
    Foo.prototype.compute = function (x) {
        return x * FACTOR;
    };
</pre>

The same holds for storing mutable data in non-polymorphic prototype properties.
<p>
Mutable prototype properties are difficult to manage. If they are non-polymorphic then you can at least replace them with variables.

<h3>Polymorphic prototype properties</h3>

An example of polymorphic prototype properties with immutable data: Tagging instances of a constructor via prototype properties enables you to tell them apart from instances of a different constructor.
<pre>
    function ConstrA() { }
    ConstrA.prototype.TYPE_NAME = 'ConstrA';
    
    function ConstrB() { }
    ConstrB.prototype.TYPE_NAME = 'ConstrB';
</pre>

Thanks to the polymorphic &#8220;tag&#8221; <tt>TYPE_NAME</tt>, you can distinguish the instances of <tt>ConstrA</tt> and <tt>ConstrB</tt> even when they cross frames (then <tt>instanceof</tt> does not work&nbsp;<a class="ptr">[6]</a>).


<h3>References</h3>

<ol id="references">
    <li><a href="http://www.2ality.com/2013/01/categorizing-values.html">Categorizing values in JavaScript</a></li>
    <li><a href="http://www.2ality.com/2012/01/js-inheritance-by-example.html">JavaScript inheritance by example</a></li>
    <li><a href="http://www.2ality.com/2012/08/property-definition-assignment.html">Properties in JavaScript: definition versus assignment</a></li>
    <li><a href="http://www.2ality.com/2011/06/constructor-property.html">What&#8217;s up with the &#8220;constructor&#8221; property in JavaScript?</a></li>
    <li><a href="http://www.2ality.com/2011/02/javascript-variable-scoping-and-its.html">JavaScript variable scoping and its pitfalls</a></li>
    <li><a href="http://www.2ality.com/2013/01/categorizing-values.html">Categorizing values in JavaScript</a> [Sect. 2.4 explains that <tt>instanceof</tt> doesn&#8217;t work if objects cross frames]</li>
</ol>
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'><div class='post-share-buttons'>
<a class='goog-inline-block share-button sb-email' href='http://www.blogger.com/share-post.g?blogID=8100407163665430627&postID=8511104266896154828&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='http://www.blogger.com/share-post.g?blogID=8100407163665430627&postID=8511104266896154828&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='http://www.blogger.com/share-post.g?blogID=8100407163665430627&postID=8511104266896154828&target=twitter' target='_blank' title='Share to Twitter'><span class='share-button-link-text'>Share to Twitter</span></a><a class='goog-inline-block share-button sb-facebook' href='http://www.blogger.com/share-post.g?blogID=8100407163665430627&postID=8511104266896154828&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><div class='goog-inline-block dummy-container'><g:plusone source='blogger:blog:plusone' href='http://www.2ality.com/2013/09/data-in-prototypes.html' size='medium' width='300' annotation='inline'/></div>
</div>
<span class='post-comment-link'>
</span>
<span class='post-backlinks post-comment-link'>
</span>
<span class='post-icons'>
<span class='item-control blog-admin pid-88863769'>
<a href='http://www.blogger.com/post-edit.g?blogID=8100407163665430627&postID=8511104266896154828&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='http://img2.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
</div>
<div class='post-footer-line post-footer-line-2'></div>
<div class='post-footer-line post-footer-line-3'></div>
</div>
</div>
<div class='comments' id='comments'>
<a name='comments'></a>
<h4>25 comments:</h4>
<div id='Blog1_comments-block-wrapper'>
<dl class='avatar-comment-indent' id='comments-block'>
<dt class='comment-author ' id='c4962128608383379394'>
<a name='c4962128608383379394'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="ironfroggy">

</span></div>
ironfroggy
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4962128608383379394'>
<p>
You&#39;re making this too broad. The advice is really &quot;Don&#39;t share *mutable* default values&quot;. Just share strings and numbers and booleans.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://www.2ality.com/2013/09/data-in-prototypes.html?showComment=1378818434996#c4962128608383379394' title='comment permalink'>
September 10, 2013 at 3:07 PM
</a>
<span class='item-control blog-admin pid-1705254443'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=8100407163665430627&postID=4962128608383379394' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c9123778393176477542'>
<a name='c9123778393176477542'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://rauschma.de/" rel="nofollow" onclick=""><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="Axel Rauschmayer">

</a></span></div>
<a href='http://rauschma.de/' rel='nofollow'>Axel Rauschmayer</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-9123778393176477542'>
<p>
That&#8217;s certainly a safe thing to do, but I prefer consistency in this case.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://www.2ality.com/2013/09/data-in-prototypes.html?showComment=1378819347220#c9123778393176477542' title='comment permalink'>
September 10, 2013 at 3:22 PM
</a>
<span class='item-control blog-admin pid-562911534'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=8100407163665430627&postID=9123778393176477542' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c9158452177114376903'>
<a name='c9158452177114376903'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="Andrew">

</span></div>
Andrew
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-9158452177114376903'>
<p>
It&#39;s worth pointing out that if there&#39;s a need to share a &#39;static&#39; variable/value, this is not an anti-pattern.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://www.2ality.com/2013/09/data-in-prototypes.html?showComment=1378820589864#c9158452177114376903' title='comment permalink'>
September 10, 2013 at 3:43 PM
</a>
<span class='item-control blog-admin pid-562911534'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=8100407163665430627&postID=9158452177114376903' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c3493697516052847782'>
<a name='c3493697516052847782'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="&#9775; Markus A. Stone">

</span></div>
&#9775; Markus A. Stone
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3493697516052847782'>
<p>
This is indeed an important point that is often overlooked, specially when describing the use of Object.create() as a way to create objects.<br /><br />Using only primitives might be the possible &quot;best practice&quot;, as it avoids the issue (&quot;length&quot; is a property of the prototype of String and Array for example). But generally, the best way I&#39;ve found to think about prototypes is as &quot;interfaces&quot; of what the copied object &quot;will&quot; do. In other works, objects carry state, prototypes define the interface to interact with that state.<br /><br />To me this concept gives consistency, which is key in dynamic languages like javascript. I even think that if you delegate some method creation to the constructor (a typical pattern), you should define a placeholder for that method in the prototype to declare the interface (an id or noop function). This makes the code easier to read and document.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://www.2ality.com/2013/09/data-in-prototypes.html?showComment=1378822253435#c3493697516052847782' title='comment permalink'>
September 10, 2013 at 4:10 PM
</a>
<span class='item-control blog-admin pid-1705254443'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=8100407163665430627&postID=3493697516052847782' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2871733888844383110'>
<a name='c2871733888844383110'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="che guevarra">

</span></div>
che guevarra
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2871733888844383110'>
<p>
This pattern recently destroyed my website performance. It is nice to see it labeled as an anti pattern.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://www.2ality.com/2013/09/data-in-prototypes.html?showComment=1378876813200#c2871733888844383110' title='comment permalink'>
September 11, 2013 at 7:20 AM
</a>
<span class='item-control blog-admin pid-562911534'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=8100407163665430627&postID=2871733888844383110' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8015780166593720824'>
<a name='c8015780166593720824'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="jhohlfeld">

</span></div>
jhohlfeld
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8015780166593720824'>
<p>
Banana skin I also fell over lately. Nice to see you elaborate about it - I&#39;m not shure whether I should go and check all my legacy code ;)
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://www.2ality.com/2013/09/data-in-prototypes.html?showComment=1378901104322#c8015780166593720824' title='comment permalink'>
September 11, 2013 at 2:05 PM
</a>
<span class='item-control blog-admin pid-1705254443'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=8100407163665430627&postID=8015780166593720824' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8933615241383321261'>
<a name='c8933615241383321261'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="ironfroggy">

</span></div>
ironfroggy
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8933615241383321261'>
<p>
There is also an important trade off here that needs to be mentioned: Storing non-mutable defaults on the prototype is a good way to reduce memory usage in large applications.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://www.2ality.com/2013/09/data-in-prototypes.html?showComment=1378902252386#c8933615241383321261' title='comment permalink'>
September 11, 2013 at 2:24 PM
</a>
<span class='item-control blog-admin pid-1705254443'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=8100407163665430627&postID=8933615241383321261' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c6856701779961807554'>
<a name='c6856701779961807554'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="Justin Sousa">

</span></div>
Justin Sousa
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6856701779961807554'>
<p>
Exactly, setting up default values is best left in the constructor
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://www.2ality.com/2013/09/data-in-prototypes.html?showComment=1379080971945#c6856701779961807554' title='comment permalink'>
September 13, 2013 at 4:02 PM
</a>
<span class='item-control blog-admin pid-2016797399'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=8100407163665430627&postID=6856701779961807554' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2885984612853791086'>
<a name='c2885984612853791086'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="random">

</span></div>
random
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2885984612853791086'>
<p>
You&#39;re trading off a bit of lookup performance by having accessing code walk the prototype stack, though.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://www.2ality.com/2013/09/data-in-prototypes.html?showComment=1379085883896#c2885984612853791086' title='comment permalink'>
September 13, 2013 at 5:24 PM
</a>
<span class='item-control blog-admin pid-1705254443'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=8100407163665430627&postID=2885984612853791086' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8749163738988981796'>
<a name='c8749163738988981796'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://unit.io/" rel="nofollow" onclick=""><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="Tim Oxley">

</a></span></div>
<a href='http://unit.io/' rel='nofollow'>Tim Oxley</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8749163738988981796'>
<p>
this tip has nothing to do with performance
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://www.2ality.com/2013/09/data-in-prototypes.html?showComment=1379088898484#c8749163738988981796' title='comment permalink'>
September 13, 2013 at 6:14 PM
</a>
<span class='item-control blog-admin pid-2016797399'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=8100407163665430627&postID=8749163738988981796' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c1901643915244352926'>
<a name='c1901643915244352926'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="WebReflection">

</span></div>
WebReflection
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1901643915244352926'>
<p>
This post is misleading in many ways. Storing data in the prototype is not an anti-pattern is &quot;just a pattern&quot; and not storing it is not a best practice but eventually a hint when data is not supposed to be shared across instances. It&#39;s like saying that defining prototype methods within a closure that uses private methods and variables reusable within all instances indirectly is an anti-pattern while is just &quot;a pattern to have private like behavior&quot;.<br /><br />Last, but not least, the best practice is not to create a potentially unused Array per each instance, rather use the prototype to make that Array creation necessary only when used.<br /><br />```<br />function Constructor() {}<br /><br />Object.defineProperty(<br />  Constructor.prototype,<br />  &#39;data&#39;,<br />  {<br />    enumerable: true, // if needed<br />    configurable: true,<br />    get: function () {<br />      return Object.defineProperty(<br />        this,<br />        &#39;data&#39;,<br />        {value: [], enumerable: true}<br />      ).data;<br />    }<br />  }<br />);<br /><br />```
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://www.2ality.com/2013/09/data-in-prototypes.html?showComment=1379091727580#c1901643915244352926' title='comment permalink'>
September 13, 2013 at 7:02 PM
</a>
<span class='item-control blog-admin pid-1394804871'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=8100407163665430627&postID=1901643915244352926' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2685075340904373248'>
<a name='c2685075340904373248'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="WebReflection">

</span></div>
WebReflection
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2685075340904373248'>
<p>
that&#39;s exactly what&#39;s wrong with these kind of posts. Instead of teaching developers what&#39;s going on and when a pattern is better than another, somebody labels them as &quot;anti-pattern&quot; and people without understanding stop at the topic without realizing that when shared properties are meant, the `data` in the prototype is the best performance oriented advice indeed. Creating a data array per each instance if the property might not be even used, that&#39;s a GC, RAM, and performance oriented **problem**
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://www.2ality.com/2013/09/data-in-prototypes.html?showComment=1379092323993#c2685075340904373248' title='comment permalink'>
September 13, 2013 at 7:12 PM
</a>
<span class='item-control blog-admin pid-562911534'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=8100407163665430627&postID=2685075340904373248' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c6553594259268750246'>
<a name='c6553594259268750246'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="WebReflection">

</span></div>
WebReflection
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6553594259268750246'>
<p>
exactly ... this has been marked as something evil while it&#39;s a pretty powerful feature when it comes to state-machine like approaches and shared states across all instances.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://www.2ality.com/2013/09/data-in-prototypes.html?showComment=1379092652712#c6553594259268750246' title='comment permalink'>
September 13, 2013 at 7:17 PM
</a>
<span class='item-control blog-admin pid-911138909'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=8100407163665430627&postID=6553594259268750246' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c4240308611157105317'>
<a name='c4240308611157105317'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="http://img1.blogblog.com/img/blank.gif" width="16" height="16" alt="" title="Darlan Alves">

</span></div>
Darlan Alves
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4240308611157105317'>
<p>
I&#39;m not sure if it&#39;s the best approach. It&#39;s nice to have consistency, but it may be painful if you use a default property value + inheritance. In a simple scenario, you would repeat the code that defines default values on every subclass. A change on default values would be necessary on every subclass too. <br />Also, the performanc